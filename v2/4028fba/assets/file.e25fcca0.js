import{a4 as e,r as t,a3 as n,aa as r,ab as o,R as i,ac as a,l as s,j as l,n as u,C as c,H as d,s as f,p,S as h,u as m,a5 as g,D as v,W as y,X as b,A as _,z as w,Y as E,Z as S,t as x,L as O,q as A,ad as k,V as P}from"./vendor.a4c78c95.js";import{a as T,g as L}from"./clsx.m.4a4ebb96.js";import{I as C,i as R,C as M}from"./index.1a375fd9.js";import{b as D,u as I,_ as j}from"./index.003a5d4e.js";import{_ as N}from"./index.bc788cc5.js";import{u as B}from"./useTitle.c616e87e.js";import"./index.esm.5e7f2bbc.js";var U,F={exports:{}};
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/U=F,function(){var e={}.hasOwnProperty;function t(){for(var n=[],r=0;r<arguments.length;r++){var o=arguments[r];if(o){var i=typeof o;if("string"===i||"number"===i)n.push(o);else if(Array.isArray(o)){if(o.length){var a=t.apply(null,o);a&&n.push(a)}}else if("object"===i)if(o.toString===Object.prototype.toString)for(var s in o)e.call(o,s)&&o[s]&&n.push(s);else n.push(o.toString())}}return n.join(" ")}U.exports?(t.default=t,U.exports=t):window.classNames=t}();var V=F.exports,z={exports:{}},H=z.exports=function e(t,n,r){var o,i,a=window,s="application/octet-stream",l=r||s,u=t,c=!n&&!r&&u,d=document.createElement("a"),f=function(e){return String(e)},p=a.Blob||a.MozBlob||a.WebKitBlob||f,h=n||"download";if(p=p.call?p.bind(a):Blob,"true"===String(this)&&(l=(u=[u,l])[0],u=u[1]),c&&c.length<2048&&(h=c.split("/").pop().split("?")[0],d.href=c,-1!==d.href.indexOf(c))){var m=new XMLHttpRequest;return m.open("GET",c,!0),m.responseType="blob",m.onload=function(t){e(t.target.response,h,s)},setTimeout((function(){m.send()}),0),m}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(u)){if(!(u.length>2096103.424&&p!==f))return navigator.msSaveBlob?navigator.msSaveBlob(b(u),h):_(u);l=(u=b(u)).type||s}else if(/([\x80-\xff])/.test(u)){for(var g=0,v=new Uint8Array(u.length),y=v.length;g<y;++g)v[g]=u.charCodeAt(g);u=new p([v],{type:l})}function b(e){for(var t=e.split(/[:;,]/),n=t[1],r=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),o=r.length,i=0,a=new Uint8Array(o);i<o;++i)a[i]=r.charCodeAt(i);return new p([a],{type:n})}function _(e,t){if("download"in d)return d.href=e,d.setAttribute("download",h),d.className="download-js-link",d.innerHTML="downloading...",d.style.display="none",document.body.appendChild(d),setTimeout((function(){d.click(),document.body.removeChild(d),!0===t&&setTimeout((function(){a.URL.revokeObjectURL(d.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=document.createElement("iframe");document.body.appendChild(n),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,s)),n.src=e,setTimeout((function(){document.body.removeChild(n)}),333)}if(o=u instanceof p?u:new p([u],{type:l}),navigator.msSaveBlob)return navigator.msSaveBlob(o,h);if(a.URL)_(a.URL.createObjectURL(o),!0);else{if("string"==typeof o||o.constructor===f)try{return _("data:"+l+";base64,"+a.btoa(o))}catch(w){return _("data:"+l+","+encodeURIComponent(o))}(i=new FileReader).onload=function(e){_(this.result)},i.readAsDataURL(o)}return!0},G={exports:{}};G.exports=$,G.exports.isMobile=$,G.exports.default=$;var W=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,K=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function $(e){e||(e={});var t=e.ua;if(t||"undefined"==typeof navigator||(t=navigator.userAgent),t&&t.headers&&"string"==typeof t.headers["user-agent"]&&(t=t.headers["user-agent"]),"string"!=typeof t)return!1;var n=e.tablet?K.test(t):W.test(t);return!n&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==t.indexOf("Macintosh")&&-1!==t.indexOf("Safari")&&(n=!0),n}var q=G.exports,Y={},X={exports:{}},Q={exports:{}};!function(e){function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}(Q),function(e){var t=Q.exports.default;function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}e.exports=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var o=n(r);if(o&&o.has(e))return o.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var l=a?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(i,s,l):i[s]=e[s]}return i.default=e,o&&o.set(e,i),i},e.exports.default=e.exports,e.exports.__esModule=!0}(X);var Z={exports:{}};!function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0}(Z);var J={exports:{}},ee={exports:{}};!function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0}(ee),function(e){var t=ee.exports;function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?n(Object(o),!0).forEach((function(n){t(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e},e.exports.default=e.exports,e.exports.__esModule=!0}(J);var te={exports:{}};!function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0}(te);var ne={exports:{}};!function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0}(ne);var re={exports:{}},oe={exports:{}};!function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,t(n,r)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}(oe),function(e){var t=oe.exports;e.exports=function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&t(e,n)},e.exports.default=e.exports,e.exports.__esModule=!0}(re);var ie={exports:{}},ae={exports:{}};!function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,t(n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}(ae);var se={exports:{}};!function(e){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.default=e.exports,e.exports.__esModule=!0}(se);var le={exports:{}},ue={exports:{}};!function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0}(ue),function(e){var t=Q.exports.default,n=ue.exports;e.exports=function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return n(e)},e.exports.default=e.exports,e.exports.__esModule=!0}(le),function(e){var t=ae.exports,n=se.exports,r=le.exports;e.exports=function(e){var o=n();return function(){var n,i=t(e);if(o){var a=t(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return r(this,n)}},e.exports.default=e.exports,e.exports.__esModule=!0}(ie);var ce={};Object.defineProperty(ce,"__esModule",{value:!0}),ce.warning=fe,ce.note=pe,ce.resetWarned=function(){de={}},ce.call=he,ce.warningOnce=me,ce.noteOnce=function(e,t){he(pe,e,t)},ce.default=void 0;var de={};function fe(e,t){}function pe(e,t){}function he(e,t,n){t||de[n]||(e(!1,n),de[n]=!0)}function me(e,t){he(fe,e,t)}var ge=me;ce.default=ge;var ve={},ye=Z.exports;Object.defineProperty(ve,"__esModule",{value:!0}),ve.default=void 0;var be=ye(J.exports),_e=ye(ee.exports),we=ye(t.exports),Ee=function(e){var t,n,r=e.className,o=e.included,i=e.vertical,a=e.style,s=e.length,l=e.offset,u=e.reverse;s<0&&(u=!u,s=Math.abs(s),l=100-l);var c=i?(t={},(0,_e.default)(t,u?"top":"bottom","".concat(l,"%")),(0,_e.default)(t,u?"bottom":"top","auto"),(0,_e.default)(t,"height","".concat(s,"%")),t):(n={},(0,_e.default)(n,u?"right":"left","".concat(l,"%")),(0,_e.default)(n,u?"left":"right","auto"),(0,_e.default)(n,"width","".concat(s,"%")),n),d=(0,be.default)((0,be.default)({},a),c);return o?we.default.createElement("div",{className:r,style:d}):null};ve.default=Ee;var Se={},xe={exports:{}};!function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,t.apply(this,arguments)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}(xe);var Oe={exports:{}},Ae={exports:{}};!function(e){e.exports=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o},e.exports.default=e.exports,e.exports.__esModule=!0}(Ae),function(e){var t=Ae.exports;e.exports=function(e,n){if(null==e)return{};var r,o,i=t(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i},e.exports.default=e.exports,e.exports.__esModule=!0}(Oe);var ke={exports:{}},Pe={exports:{}},Te={exports:{}};!function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.default=e.exports,e.exports.__esModule=!0}(Te),function(e){var t=Te.exports;e.exports=function(e){if(Array.isArray(e))return t(e)},e.exports.default=e.exports,e.exports.__esModule=!0}(Pe);var Le={exports:{}};!function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0}(Le);var Ce={exports:{}};!function(e){var t=Te.exports;e.exports=function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0}(Ce);var Re={exports:{}};!function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0}(Re),function(e){var t=Pe.exports,n=Le.exports,r=Ce.exports,o=Re.exports;e.exports=function(e){return t(e)||n(e)||r(e)||o()},e.exports.default=e.exports,e.exports.__esModule=!0}(ke);var Me={exports:{}},De={exports:{}};!function(e){var t=ae.exports;e.exports=function(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&null!==(e=t(e)););return e},e.exports.default=e.exports,e.exports.__esModule=!0}(De),function(e){var t=De.exports;function n(r,o,i){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=n=Reflect.get,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e,n,r){var o=t(e,n);if(o){var i=Object.getOwnPropertyDescriptor(o,n);return i.get?i.get.call(r):i.value}},e.exports.default=e.exports,e.exports.__esModule=!0),n(r,o,i||r)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0}(Me);var Ie={},je={exports:{}};!function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0}(je);var Ne=je.exports;Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.default=function(e,t,n,r){var o=Be.default.unstable_batchedUpdates?function(e){Be.default.unstable_batchedUpdates(n,e)}:n;e.addEventListener&&e.addEventListener(t,o,r);return{remove:function(){e.removeEventListener&&e.removeEventListener(t,o)}}};var Be=Ne(n.exports);var Ue={},Fe=Z.exports;Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.default=void 0;var Ve=Fe(ee.exports),ze=Fe(J.exports),He=Fe(t.exports),Ge=Fe(F.exports),We=Fe(ce),Ke=function(e){var t=e.prefixCls,n=e.vertical,r=e.reverse,o=e.marks,i=e.dots,a=e.step,s=e.included,l=e.lowerBound,u=e.upperBound,c=e.max,d=e.min,f=e.dotStyle,p=e.activeDotStyle,h=c-d,m=function(e,t,n,r,o,i){(0,We.default)(!n||r>0,"`Slider[step]` should be a positive number in order to make Slider[dots] work.");var a=Object.keys(t).map(parseFloat).sort((function(e,t){return e-t}));if(n&&r)for(var s=o;s<=i;s+=r)-1===a.indexOf(s)&&a.push(s);return a}(0,o,i,a,d,c).map((function(e){var o,i="".concat(Math.abs(e-d)/h*100,"%"),a=!s&&e===u||s&&e<=u&&e>=l,c=n?(0,ze.default)((0,ze.default)({},f),{},(0,Ve.default)({},r?"top":"bottom",i)):(0,ze.default)((0,ze.default)({},f),{},(0,Ve.default)({},r?"right":"left",i));a&&(c=(0,ze.default)((0,ze.default)({},c),p));var m=(0,Ge.default)((o={},(0,Ve.default)(o,"".concat(t,"-dot"),!0),(0,Ve.default)(o,"".concat(t,"-dot-active"),a),(0,Ve.default)(o,"".concat(t,"-dot-reverse"),r),o));return He.default.createElement("span",{className:m,style:c,key:e})}));return He.default.createElement("div",{className:"".concat(t,"-step")},m)};Ue.default=Ke;var $e={},qe=Z.exports;Object.defineProperty($e,"__esModule",{value:!0}),$e.default=void 0;var Ye=qe(J.exports),Xe=qe(ee.exports),Qe=qe(Q.exports),Ze=qe(t.exports),Je=qe(F.exports),et=function(e){var t=e.className,n=e.vertical,r=e.reverse,o=e.marks,i=e.included,a=e.upperBound,s=e.lowerBound,l=e.max,u=e.min,c=e.onClickLabel,d=Object.keys(o),f=l-u,p=d.map(parseFloat).sort((function(e,t){return e-t})).map((function(e){var l,d=o[e],p="object"===(0,Qe.default)(d)&&!Ze.default.isValidElement(d),h=p?d.label:d;if(!h&&0!==h)return null;var m=!i&&e===a||i&&e<=a&&e>=s,g=(0,Je.default)((l={},(0,Xe.default)(l,"".concat(t,"-text"),!0),(0,Xe.default)(l,"".concat(t,"-text-active"),m),l)),v=(0,Xe.default)({marginBottom:"-50%"},r?"top":"bottom","".concat((e-u)/f*100,"%")),y=(0,Xe.default)({transform:"translateX(".concat(r?"50%":"-50%",")"),msTransform:"translateX(".concat(r?"50%":"-50%",")")},r?"right":"left","".concat((e-u)/f*100,"%")),b=n?v:y,_=p?(0,Ye.default)((0,Ye.default)({},b),d.style):b;return Ze.default.createElement("span",{className:g,style:_,key:e,onMouseDown:function(t){return c(t,e)},onTouchStart:function(t){return c(t,e)}},h)}));return Ze.default.createElement("div",{className:t},p)};$e.default=et;var tt={},nt=Z.exports;Object.defineProperty(tt,"__esModule",{value:!0}),tt.default=void 0;var rt=nt(xe.exports),ot=nt(J.exports),it=nt(ee.exports),at=nt(Oe.exports),st=nt(te.exports),lt=nt(ne.exports),ut=nt(re.exports),ct=nt(ie.exports),dt=nt(t.exports),ft=nt(F.exports),pt=nt(Ie),ht=["prefixCls","vertical","reverse","offset","style","disabled","min","max","value","tabIndex","ariaLabel","ariaLabelledBy","ariaValueTextFormatter"],mt=function(e){(0,ut.default)(n,e);var t=(0,ct.default)(n);function n(){var e;(0,st.default)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={clickFocused:!1},e.onMouseUpListener=void 0,e.handle=void 0,e.setHandleRef=function(t){e.handle=t},e.handleMouseUp=function(){document.activeElement===e.handle&&e.setClickFocus(!0)},e.handleMouseDown=function(t){t.preventDefault(),e.focus()},e.handleBlur=function(){e.setClickFocus(!1)},e.handleKeyDown=function(){e.setClickFocus(!1)},e}return(0,lt.default)(n,[{key:"componentDidMount",value:function(){this.onMouseUpListener=(0,pt.default)(document,"mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"setClickFocus",value:function(e){this.setState({clickFocused:e})}},{key:"clickFocus",value:function(){this.setClickFocus(!0),this.focus()}},{key:"focus",value:function(){this.handle.focus()}},{key:"blur",value:function(){this.handle.blur()}},{key:"render",value:function(){var e,t,n,r=this.props,o=r.prefixCls,i=r.vertical,a=r.reverse,s=r.offset,l=r.style,u=r.disabled,c=r.min,d=r.max,f=r.value,p=r.tabIndex,h=r.ariaLabel,m=r.ariaLabelledBy,g=r.ariaValueTextFormatter,v=(0,at.default)(r,ht),y=(0,ft.default)(this.props.className,(0,it.default)({},"".concat(o,"-handle-click-focused"),this.state.clickFocused)),b=i?(e={},(0,it.default)(e,a?"top":"bottom","".concat(s,"%")),(0,it.default)(e,a?"bottom":"top","auto"),(0,it.default)(e,"transform",a?null:"translateY(+50%)"),e):(t={},(0,it.default)(t,a?"right":"left","".concat(s,"%")),(0,it.default)(t,a?"left":"right","auto"),(0,it.default)(t,"transform","translateX(".concat(a?"+":"-","50%)")),t),_=(0,ot.default)((0,ot.default)({},l),b),w=p||0;return(u||null===p)&&(w=null),g&&(n=g(f)),dt.default.createElement("div",(0,rt.default)({ref:this.setHandleRef,tabIndex:w},v,{className:y,style:_,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,role:"slider","aria-valuemin":c,"aria-valuemax":d,"aria-valuenow":f,"aria-disabled":!!u,"aria-label":h,"aria-labelledby":m,"aria-valuetext":n}))}}]),n}(dt.default.Component);tt.default=mt;var gt={},vt={};Object.defineProperty(vt,"__esModule",{value:!0}),vt.default=void 0;var yt={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=yt.F1&&t<=yt.F12)return!1;switch(t){case yt.ALT:case yt.CAPS_LOCK:case yt.CONTEXT_MENU:case yt.CTRL:case yt.DOWN:case yt.END:case yt.ESC:case yt.HOME:case yt.INSERT:case yt.LEFT:case yt.MAC_FF_META:case yt.META:case yt.NUMLOCK:case yt.NUM_CENTER:case yt.PAGE_DOWN:case yt.PAGE_UP:case yt.PAUSE:case yt.PRINT_SCREEN:case yt.RIGHT:case yt.SHIFT:case yt.UP:case yt.WIN_KEY:case yt.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=yt.ZERO&&e<=yt.NINE)return!0;if(e>=yt.NUM_ZERO&&e<=yt.NUM_MULTIPLY)return!0;if(e>=yt.A&&e<=yt.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case yt.SPACE:case yt.QUESTION_MARK:case yt.NUM_PLUS:case yt.NUM_MINUS:case yt.NUM_PERIOD:case yt.NUM_DIVISION:case yt.SEMICOLON:case yt.DASH:case yt.EQUALS:case yt.COMMA:case yt.PERIOD:case yt.SLASH:case yt.APOSTROPHE:case yt.SINGLE_QUOTE:case yt.OPEN_SQUARE_BRACKET:case yt.BACKSLASH:case yt.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},bt=yt;vt.default=bt;var _t=Z.exports;Object.defineProperty(gt,"__esModule",{value:!0}),gt.calculateNextValue=At,gt.ensureValueInRange=function(e,t){var n=t.max,r=t.min;if(e<=r)return r;if(e>=n)return n;return e},gt.ensureValuePrecision=function(e,t){var n=t.step,r=isFinite(xt(e,t))?xt(e,t):0;return null===n?r:parseFloat(r.toFixed(Ot(n)))},gt.getClosestPoint=xt,gt.getHandleCenterPosition=function(e,t){var n=t.getBoundingClientRect();return e?n.top+.5*n.height:window.pageXOffset+n.left+.5*n.width},gt.getKeyboardValueMutator=function(e,t,n){var r="increase",o="decrease",i=r;switch(e.keyCode){case St.default.UP:i=t&&n?o:r;break;case St.default.RIGHT:i=!t&&n?o:r;break;case St.default.DOWN:i=t&&n?r:o;break;case St.default.LEFT:i=!t&&n?r:o;break;case St.default.END:return function(e,t){return t.max};case St.default.HOME:return function(e,t){return t.min};case St.default.PAGE_UP:return function(e,t){return e+2*t.step};case St.default.PAGE_DOWN:return function(e,t){return e-2*t.step};default:return}return function(e,t){return At(i,e,t)}},gt.getMousePosition=function(e,t){return e?t.clientY:t.pageX},gt.getPrecision=Ot,gt.getTouchPosition=function(e,t){return e?t.touches[0].clientY:t.touches[0].pageX},gt.isEventFromHandle=function(e,t){try{return Object.keys(t).some((function(n){return e.target===(0,Et.findDOMNode)(t[n])}))}catch(n){return!1}},gt.isNotTouchEvent=function(e){return e.touches.length>1||"touchend"===e.type.toLowerCase()&&e.touches.length>0},gt.isValueOutOfRange=function(e,t){var n=t.min,r=t.max;return e<n||e>r},gt.pauseEvent=function(e){e.stopPropagation(),e.preventDefault()};var wt=_t(ke.exports),Et=n.exports,St=_t(vt);function xt(e,t){var n=t.marks,r=t.step,o=t.min,i=t.max,a=Object.keys(n).map(parseFloat);if(null!==r){var s=Math.pow(10,Ot(r)),l=Math.floor((i*s-o*s)/(r*s)),u=Math.min((e-o)/r,l),c=Math.round(u)*r+o;a.push(c)}var d=a.map((function(t){return Math.abs(e-t)}));return a[d.indexOf(Math.min.apply(Math,(0,wt.default)(d)))]}function Ot(e){var t=e.toString(),n=0;return t.indexOf(".")>=0&&(n=t.length-t.indexOf(".")-1),n}function At(e,t,n){var r={increase:function(e,t){return e+t},decrease:function(e,t){return e-t}},o=r[e](Object.keys(n.marks).indexOf(JSON.stringify(t)),1),i=Object.keys(n.marks)[o];return n.step?r[e](t,n.step):Object.keys(n.marks).length&&n.marks[i]?n.marks[i]:t}var kt=Z.exports,Pt=X.exports;Object.defineProperty(Se,"__esModule",{value:!0}),Se.default=function(e){var t,n;return n=t=function(e){(0,Bt.default)(n,e);var t=(0,Ut.default)(n);function n(e){var r;(0,Dt.default)(this,n),(r=t.call(this,e)).handlesRefs=void 0,r.sliderRef=void 0,r.document=void 0,r.dragOffset=void 0,r.prevMovedHandleIndex=void 0,r.onTouchMoveListener=void 0,r.onTouchUpListener=void 0,r.onMouseMoveListener=void 0,r.onMouseUpListener=void 0,r.dragTrack=void 0,r.startBounds=void 0,r.onDown=function(e,t){var n=t,o=r.props,i=o.draggableTrack,a=o.vertical,s=r.state.bounds,l=i&&r.positionGetValue&&r.positionGetValue(n)||[],u=$t.isEventFromHandle(e,r.handlesRefs);if(r.dragTrack=i&&s.length>=2&&!u&&!l.map((function(e,t){var n=!!t||e>=s[t];return t===l.length-1?e<=s[t]:n})).some((function(e){return!e})),r.dragTrack)r.dragOffset=n,r.startBounds=(0,Mt.default)(s);else{if(u){var c=$t.getHandleCenterPosition(a,e.target);r.dragOffset=n-c,n=c}else r.dragOffset=0;r.onStart(n)}},r.onMouseDown=function(e){if(0===e.button){r.removeDocumentEvents();var t=r.props.vertical,n=$t.getMousePosition(t,e);r.onDown(e,n),r.addDocumentMouseEvents()}},r.onTouchStart=function(e){if(!$t.isNotTouchEvent(e)){var t=r.props.vertical,n=$t.getTouchPosition(t,e);r.onDown(e,n),r.addDocumentTouchEvents(),$t.pauseEvent(e)}},r.onFocus=function(e){var t=r.props,n=t.onFocus,o=t.vertical;if($t.isEventFromHandle(e,r.handlesRefs)&&!r.dragTrack){var i=$t.getHandleCenterPosition(o,e.target);r.dragOffset=0,r.onStart(i),$t.pauseEvent(e),n&&n(e)}},r.onBlur=function(e){var t=r.props.onBlur;r.dragTrack||r.onEnd(),t&&t(e)},r.onMouseUp=function(){r.handlesRefs[r.prevMovedHandleIndex]&&r.handlesRefs[r.prevMovedHandleIndex].clickFocus()},r.onMouseMove=function(e){if(r.sliderRef){var t=$t.getMousePosition(r.props.vertical,e);r.onMove(e,t-r.dragOffset,r.dragTrack,r.startBounds)}else r.onEnd()},r.onTouchMove=function(e){if(!$t.isNotTouchEvent(e)&&r.sliderRef){var t=$t.getTouchPosition(r.props.vertical,e);r.onMove(e,t-r.dragOffset,r.dragTrack,r.startBounds)}else r.onEnd()},r.onKeyDown=function(e){r.sliderRef&&$t.isEventFromHandle(e,r.handlesRefs)&&r.onKeyboard(e)},r.onClickMarkLabel=function(e,t){e.stopPropagation(),r.onChange({value:t}),r.setState({value:t},(function(){return r.onEnd(!0)}))},r.saveSlider=function(e){r.sliderRef=e};var o=e.step,i=e.max,a=e.min,s=!isFinite(i-a)||(i-a)%o==0;return(0,Ht.default)(!o||Math.floor(o)!==o||s,"Slider[max] - Slider[min] (".concat(i-a,") should be a multiple of Slider[step] (").concat(o,")")),r.handlesRefs={},r}return(0,It.default)(n,[{key:"componentDidMount",value:function(){this.document=this.sliderRef&&this.sliderRef.ownerDocument;var e=this.props,t=e.autoFocus,n=e.disabled;t&&!n&&this.focus()}},{key:"componentWillUnmount",value:function(){(0,jt.default)((0,Nt.default)(n.prototype),"componentWillUnmount",this)&&(0,jt.default)((0,Nt.default)(n.prototype),"componentWillUnmount",this).call(this),this.removeDocumentEvents()}},{key:"getSliderStart",value:function(){var e=this.sliderRef,t=this.props,n=t.vertical,r=t.reverse,o=e.getBoundingClientRect();return n?r?o.bottom:o.top:window.pageXOffset+(r?o.right:o.left)}},{key:"getSliderLength",value:function(){var e=this.sliderRef;if(!e)return 0;var t=e.getBoundingClientRect();return this.props.vertical?t.height:t.width}},{key:"addDocumentTouchEvents",value:function(){this.onTouchMoveListener=(0,Vt.default)(this.document,"touchmove",this.onTouchMove),this.onTouchUpListener=(0,Vt.default)(this.document,"touchend",this.onEnd)}},{key:"addDocumentMouseEvents",value:function(){this.onMouseMoveListener=(0,Vt.default)(this.document,"mousemove",this.onMouseMove),this.onMouseUpListener=(0,Vt.default)(this.document,"mouseup",this.onEnd)}},{key:"removeDocumentEvents",value:function(){this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchUpListener&&this.onTouchUpListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"focus",value:function(){var e;this.props.disabled||null===(e=this.handlesRefs[0])||void 0===e||e.focus()}},{key:"blur",value:function(){var e=this;this.props.disabled||Object.keys(this.handlesRefs).forEach((function(t){var n,r;null===(n=e.handlesRefs[t])||void 0===n||null===(r=n.blur)||void 0===r||r.call(n)}))}},{key:"calcValue",value:function(e){var t=this.props,n=t.vertical,r=t.min,o=t.max,i=Math.abs(Math.max(e,0)/this.getSliderLength());return n?(1-i)*(o-r)+r:i*(o-r)+r}},{key:"calcValueByPos",value:function(e){var t=(this.props.reverse?-1:1)*(e-this.getSliderStart());return this.trimAlignValue(this.calcValue(t))}},{key:"calcOffset",value:function(e){var t=this.props,n=t.min,r=(e-n)/(t.max-n);return Math.max(0,100*r)}},{key:"saveHandle",value:function(e,t){this.handlesRefs[e]=t}},{key:"render",value:function(){var e,t=this.props,r=t.prefixCls,o=t.className,i=t.marks,a=t.dots,s=t.step,l=t.included,u=t.disabled,c=t.vertical,d=t.reverse,f=t.min,p=t.max,h=t.children,m=t.maximumTrackStyle,g=t.style,v=t.railStyle,y=t.dotStyle,b=t.activeDotStyle,_=(0,jt.default)((0,Nt.default)(n.prototype),"render",this).call(this),w=_.tracks,E=_.handles,S=(0,zt.default)(r,(e={},(0,Rt.default)(e,"".concat(r,"-with-marks"),Object.keys(i).length),(0,Rt.default)(e,"".concat(r,"-disabled"),u),(0,Rt.default)(e,"".concat(r,"-vertical"),c),(0,Rt.default)(e,o,o),e));return Ft.default.createElement("div",{ref:this.saveSlider,className:S,onTouchStart:u?Yt:this.onTouchStart,onMouseDown:u?Yt:this.onMouseDown,onMouseUp:u?Yt:this.onMouseUp,onKeyDown:u?Yt:this.onKeyDown,onFocus:u?Yt:this.onFocus,onBlur:u?Yt:this.onBlur,style:g},Ft.default.createElement("div",{className:"".concat(r,"-rail"),style:(0,Ct.default)((0,Ct.default)({},m),v)}),w,Ft.default.createElement(Gt.default,{prefixCls:r,vertical:c,reverse:d,marks:i,dots:a,step:s,included:l,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:p,min:f,dotStyle:y,activeDotStyle:b}),E,Ft.default.createElement(Wt.default,{className:"".concat(r,"-mark"),onClickLabel:u?Yt:this.onClickMarkLabel,vertical:c,marks:i,included:l,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:p,min:f,reverse:d}),h)}}]),n}(e),t.displayName="ComponentEnhancer(".concat(e.displayName,")"),t.defaultProps=(0,Ct.default)((0,Ct.default)({},e.defaultProps),{},{prefixCls:"rc-slider",className:"",min:0,max:100,step:1,marks:{},handle:function(e){var t=e.index,n=(0,Lt.default)(e,qt);return delete n.dragging,null===n.value?null:Ft.default.createElement(Kt.default,(0,Tt.default)({},n,{key:t}))},onBeforeChange:Yt,onChange:Yt,onAfterChange:Yt,included:!0,disabled:!1,dots:!1,vertical:!1,reverse:!1,trackStyle:[{}],handleStyle:[{}],railStyle:{},dotStyle:{},activeDotStyle:{}}),n};var Tt=kt(xe.exports),Lt=kt(Oe.exports),Ct=kt(J.exports),Rt=kt(ee.exports),Mt=kt(ke.exports),Dt=kt(te.exports),It=kt(ne.exports),jt=kt(Me.exports),Nt=kt(ae.exports),Bt=kt(re.exports),Ut=kt(ie.exports),Ft=kt(t.exports),Vt=kt(Ie),zt=kt(F.exports),Ht=kt(ce),Gt=kt(Ue),Wt=kt($e),Kt=kt(tt),$t=Pt(gt),qt=["index"];function Yt(){}var Xt=X.exports,Qt=Z.exports;Object.defineProperty(Y,"__esModule",{value:!0});var Zt=Y.default=void 0,Jt=Qt(J.exports),en=Qt(te.exports),tn=Qt(ne.exports),nn=Qt(re.exports),rn=Qt(ie.exports),on=Qt(t.exports),an=Qt(ce),sn=Qt(ve),ln=Qt(Se),un=Xt(gt),cn=function(e){(0,nn.default)(n,e);var t=(0,rn.default)(n);function n(e){var r;(0,en.default)(this,n),(r=t.call(this,e)).positionGetValue=function(e){return[]},r.startValue=void 0,r.startPosition=void 0,r.prevMovedHandleIndex=void 0,r.onEnd=function(e){var t=r.state.dragging;r.removeDocumentEvents(),(t||e)&&r.props.onAfterChange(r.getValue()),r.setState({dragging:!1})};var o=void 0!==e.defaultValue?e.defaultValue:e.min,i=void 0!==e.value?e.value:o;return r.state={value:r.trimAlignValue(i),dragging:!1},(0,an.default)(!("minimumTrackStyle"in e),"minimumTrackStyle will be deprecated, please use trackStyle instead."),(0,an.default)(!("maximumTrackStyle"in e),"maximumTrackStyle will be deprecated, please use railStyle instead."),r}return(0,tn.default)(n,[{key:"calcValueByPos",value:function(e){return 0}},{key:"calcOffset",value:function(e){return 0}},{key:"saveHandle",value:function(e,t){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.min,o=n.max,i=n.value,a=n.onChange;if("min"in this.props||"max"in this.props){var s=void 0!==i?i:t.value,l=this.trimAlignValue(s,this.props);l!==t.value&&(this.setState({value:l}),r===e.min&&o===e.max||!un.isValueOutOfRange(s,this.props)||a(l))}}},{key:"onChange",value:function(e){var t=this.props,n=!("value"in t),r=e.value>this.props.max?(0,Jt.default)((0,Jt.default)({},e),{},{value:this.props.max}):e;n&&this.setState(r);var o=r.value;t.onChange(o)}},{key:"onStart",value:function(e){this.setState({dragging:!0});var t=this.props,n=this.getValue();t.onBeforeChange(n);var r=this.calcValueByPos(e);this.startValue=r,this.startPosition=e,r!==n&&(this.prevMovedHandleIndex=0,this.onChange({value:r}))}},{key:"onMove",value:function(e,t){un.pauseEvent(e);var n=this.state.value,r=this.calcValueByPos(t);r!==n&&this.onChange({value:r})}},{key:"onKeyboard",value:function(e){var t=this.props,n=t.reverse,r=t.vertical,o=un.getKeyboardValueMutator(e,r,n);if(o){un.pauseEvent(e);var i=this.state.value,a=o(i,this.props),s=this.trimAlignValue(a);if(s===i)return;this.onChange({value:s}),this.props.onAfterChange(s),this.onEnd()}}},{key:"getValue",value:function(){return this.state.value}},{key:"getLowerBound",value:function(){var e=this.props.startPoint||this.props.min;return this.state.value>e?e:this.state.value}},{key:"getUpperBound",value:function(){return this.state.value<this.props.startPoint?this.props.startPoint:this.state.value}},{key:"trimAlignValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===e)return null;var n=(0,Jt.default)((0,Jt.default)({},this.props),t),r=un.ensureValueInRange(e,n);return un.ensureValuePrecision(r,n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.prefixCls,r=t.vertical,o=t.included,i=t.disabled,a=t.minimumTrackStyle,s=t.trackStyle,l=t.handleStyle,u=t.tabIndex,c=t.ariaLabelForHandle,d=t.ariaLabelledByForHandle,f=t.ariaValueTextFormatterForHandle,p=t.min,h=t.max,m=t.startPoint,g=t.reverse,v=t.handle,y=this.state,b=y.value,_=y.dragging,w=this.calcOffset(b),E=v({className:"".concat(n,"-handle"),prefixCls:n,vertical:r,offset:w,value:b,dragging:_,disabled:i,min:p,max:h,reverse:g,index:0,tabIndex:u,ariaLabel:c,ariaLabelledBy:d,ariaValueTextFormatter:f,style:l[0]||l,ref:function(t){return e.saveHandle(0,t)}}),S=void 0!==m?this.calcOffset(m):0,x=s[0]||s;return{tracks:on.default.createElement(sn.default,{className:"".concat(n,"-track"),vertical:r,included:o,offset:S,reverse:g,length:w-S,style:(0,Jt.default)((0,Jt.default)({},a),x)}),handles:E}}}]),n}(on.default.Component),dn=(0,ln.default)(cn);function fn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return pn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mn(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return gn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Zt=Y.default=dn;var yn={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=yn.F1&&t<=yn.F12)return!1;switch(t){case yn.ALT:case yn.CAPS_LOCK:case yn.CONTEXT_MENU:case yn.CTRL:case yn.DOWN:case yn.END:case yn.ESC:case yn.HOME:case yn.INSERT:case yn.LEFT:case yn.MAC_FF_META:case yn.META:case yn.NUMLOCK:case yn.NUM_CENTER:case yn.PAGE_DOWN:case yn.PAGE_UP:case yn.PAUSE:case yn.PRINT_SCREEN:case yn.RIGHT:case yn.SHIFT:case yn.UP:case yn.WIN_KEY:case yn.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=yn.ZERO&&e<=yn.NINE)return!0;if(e>=yn.NUM_ZERO&&e<=yn.NUM_MULTIPLY)return!0;if(e>=yn.A&&e<=yn.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case yn.SPACE:case yn.QUESTION_MARK:case yn.NUM_PLUS:case yn.NUM_MINUS:case yn.NUM_PERIOD:case yn.NUM_DIVISION:case yn.SEMICOLON:case yn.DASH:case yn.EQUALS:case yn.COMMA:case yn.PERIOD:case yn.SLASH:case yn.APOSTROPHE:case yn.SINGLE_QUOTE:case yn.OPEN_SQUARE_BRACKET:case yn.BACKSLASH:case yn.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},bn=t.exports.forwardRef((function(e,n){var r,o=e.prefixCls,i=void 0===o?"rc-switch":o,a=e.className,s=e.checked,l=e.defaultChecked,u=e.disabled,c=e.loadingIcon,d=e.checkedChildren,f=e.unCheckedChildren,p=e.onClick,h=e.onChange,m=e.onKeyDown,g=mn(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),v=hn(function(e,n){var r=n||{},o=r.defaultValue,i=r.value,a=r.onChange,s=r.postState,l=vn(t.exports.useState((function(){return void 0!==i?i:void 0!==o?"function"==typeof o?o():o:"function"==typeof e?e():e})),2),u=l[0],c=l[1],d=void 0!==i?i:u;s&&(d=s(d));var f=t.exports.useRef(!0);return t.exports.useEffect((function(){f.current?f.current=!1:void 0===i&&c(i)}),[i]),[d,function(e){c(e),d!==e&&a&&a(e,d)}]}(!1,{value:s,defaultValue:l}),2),y=v[0],b=v[1];function _(e,t){var n=y;return u||(b(n=e),null==h||h(n,t)),n}var w=V(i,a,(fn(r={},"".concat(i,"-checked"),y),fn(r,"".concat(i,"-disabled"),u),r));return t.exports.createElement("button",Object.assign({},g,{type:"button",role:"switch","aria-checked":y,disabled:u,className:w,ref:n,onKeyDown:function(e){e.which===yn.LEFT?_(!1,e):e.which===yn.RIGHT&&_(!0,e),null==m||m(e)},onClick:function(e){var t=_(!y,e);null==p||p(t,e)}}),c,t.exports.createElement("span",{className:"".concat(i,"-inner")},y?d:f))}));bn.displayName="Switch";var _n={exports:{}},wn={},En=r(T),Sn={},xn={};Object.defineProperty(xn,"__esModule",{value:!0}),xn.findInArray=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]},xn.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},xn.isNum=function(e){return"number"==typeof e&&!isNaN(e)},xn.int=function(e){return parseInt(e,10)},xn.dontSetMe=function(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))};var On={};Object.defineProperty(On,"__esModule",{value:!0}),On.getPrefix=kn,On.browserPrefixToKey=Pn,On.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},On.default=void 0;var An=["Moz","Webkit","O","ms"];function kn(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";var r=null===(e=window.document)||void 0===e||null===(t=e.documentElement)||void 0===t?void 0:t.style;if(!r)return"";if(n in r)return"";for(var o=0;o<An.length;o++)if(Pn(n,An[o])in r)return An[o];return""}function Pn(e,t){return t?"".concat(t).concat(function(e){for(var t="",n=!0,r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):"-"===e[r]?n=!0:t+=e[r];return t}(e)):e}var Tn=kn();function Ln(e){return(Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}On.default=Tn,Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.matchesSelector=Bn,Sn.matchesSelectorAndParentsTo=function(e,t,n){var r=e;do{if(Bn(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1},Sn.addEvent=function(e,t,n,r){if(!e)return;var o=In({capture:!0},r);e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},Sn.removeEvent=function(e,t,n,r){if(!e)return;var o=In({capture:!0},r);e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},Sn.outerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,Cn.int)(n.borderTopWidth),t+=(0,Cn.int)(n.borderBottomWidth)},Sn.outerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,Cn.int)(n.borderLeftWidth),t+=(0,Cn.int)(n.borderRightWidth)},Sn.innerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,Cn.int)(n.paddingTop),t-=(0,Cn.int)(n.paddingBottom)},Sn.innerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,Cn.int)(n.paddingLeft),t-=(0,Cn.int)(n.paddingRight)},Sn.offsetXYFromParent=function(e,t,n){var r=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),o=(e.clientX+t.scrollLeft-r.left)/n,i=(e.clientY+t.scrollTop-r.top)/n;return{x:o,y:i}},Sn.createCSSTransform=function(e,t){var n=Un(e,t,"px");return jn({},(0,Rn.browserPrefixToKey)("transform",Rn.default),n)},Sn.createSVGTransform=function(e,t){return Un(e,t,"")},Sn.getTranslation=Un,Sn.getTouch=function(e,t){return e.targetTouches&&(0,Cn.findInArray)(e.targetTouches,(function(e){return t===e.identifier}))||e.changedTouches&&(0,Cn.findInArray)(e.changedTouches,(function(e){return t===e.identifier}))},Sn.getTouchIdentifier=function(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier},Sn.addUserSelectStyles=function(e){if(!e)return;var t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t));e.body&&Fn(e.body,"react-draggable-transparent-selection")},Sn.removeUserSelectStyles=function(e){if(!e)return;try{if(e.body&&Vn(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{var t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(n){}},Sn.addClassName=Fn,Sn.removeClassName=Vn;var Cn=xn,Rn=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==Ln(e)&&"function"!=typeof e)return{default:e};var n=Mn(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}r.default=e,n&&n.set(e,r);return r}(On);function Mn(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Mn=function(e){return e?n:t})(e)}function Dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function In(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(n),!0).forEach((function(t){jn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nn="";function Bn(e,t){return Nn||(Nn=(0,Cn.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,Cn.isFunction)(e[t])}))),!!(0,Cn.isFunction)(e[Nn])&&e[Nn](t)}function Un(e,t,n){var r=e.x,o=e.y,i="translate(".concat(r).concat(n,",").concat(o).concat(n,")");if(t){var a="".concat("string"==typeof t.x?t.x:t.x+n),s="".concat("string"==typeof t.y?t.y:t.y+n);i="translate(".concat(a,", ").concat(s,")")+i}return i}function Fn(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function Vn(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var zn={};Object.defineProperty(zn,"__esModule",{value:!0}),zn.getBoundPosition=function(e,t,n){if(!e.props.bounds)return[t,n];var r=e.props.bounds;r="string"==typeof r?r:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(r);var o=Wn(e);if("string"==typeof r){var i,a=o.ownerDocument,s=a.defaultView;if(!((i="parent"===r?o.parentNode:a.querySelector(r))instanceof s.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');var l=i,u=s.getComputedStyle(o),c=s.getComputedStyle(l);r={left:-o.offsetLeft+(0,Hn.int)(c.paddingLeft)+(0,Hn.int)(u.marginLeft),top:-o.offsetTop+(0,Hn.int)(c.paddingTop)+(0,Hn.int)(u.marginTop),right:(0,Gn.innerWidth)(l)-(0,Gn.outerWidth)(o)-o.offsetLeft+(0,Hn.int)(c.paddingRight)-(0,Hn.int)(u.marginRight),bottom:(0,Gn.innerHeight)(l)-(0,Gn.outerHeight)(o)-o.offsetTop+(0,Hn.int)(c.paddingBottom)-(0,Hn.int)(u.marginBottom)}}(0,Hn.isNum)(r.right)&&(t=Math.min(t,r.right));(0,Hn.isNum)(r.bottom)&&(n=Math.min(n,r.bottom));(0,Hn.isNum)(r.left)&&(t=Math.max(t,r.left));(0,Hn.isNum)(r.top)&&(n=Math.max(n,r.top));return[t,n]},zn.snapToGrid=function(e,t,n){var r=Math.round(t/e[0])*e[0],o=Math.round(n/e[1])*e[1];return[r,o]},zn.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},zn.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},zn.getControlPosition=function(e,t,n){var r="number"==typeof t?(0,Gn.getTouch)(e,t):null;if("number"==typeof t&&!r)return null;var o=Wn(n),i=n.props.offsetParent||o.offsetParent||o.ownerDocument.body;return(0,Gn.offsetXYFromParent)(r||e,i,n.props.scale)},zn.createCoreData=function(e,t,n){var r=e.state,o=!(0,Hn.isNum)(r.lastX),i=Wn(e);return o?{node:i,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:i,deltaX:t-r.lastX,deltaY:n-r.lastY,lastX:r.lastX,lastY:r.lastY,x:t,y:n}},zn.createDraggableData=function(e,t){var n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}};var Hn=xn,Gn=Sn;function Wn(e){var t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var Kn={},$n={};function qn(e){return(qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty($n,"__esModule",{value:!0}),$n.default=function(){},Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.default=void 0;var Yn=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==qn(e)&&"function"!=typeof e)return{default:e};var n=rr(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}r.default=e,n&&n.set(e,r);return r}(t.exports),Xn=nr(o.exports),Qn=nr(n.exports),Zn=Sn,Jn=zn,er=xn,tr=nr($n);function nr(e){return e&&e.__esModule?e:{default:e}}function rr(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(rr=function(e){return e?n:t})(e)}function or(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ir(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ir(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ar(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lr(e,t){return(lr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ur(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fr(e);if(t){var o=fr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return cr(this,n)}}function cr(e,t){if(t&&("object"===qn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return dr(e)}function dr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fr(e){return(fr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hr={start:"touchstart",move:"touchmove",stop:"touchend"},mr={start:"mousedown",move:"mousemove",stop:"mouseup"},gr=mr,vr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lr(e,t)}(i,Yn.Component);var t,n,r,o=ur(i);function i(){var e;ar(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return pr(dr(e=o.call.apply(o,[this].concat(n))),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),pr(dr(e),"mounted",!1),pr(dr(e),"handleDragStart",(function(t){if(e.props.onMouseDown(t),!e.props.allowAnyClick&&"number"==typeof t.button&&0!==t.button)return!1;var n=e.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var r=n.ownerDocument;if(!(e.props.disabled||!(t.target instanceof r.defaultView.Node)||e.props.handle&&!(0,Zn.matchesSelectorAndParentsTo)(t.target,e.props.handle,n)||e.props.cancel&&(0,Zn.matchesSelectorAndParentsTo)(t.target,e.props.cancel,n))){"touchstart"===t.type&&t.preventDefault();var o=(0,Zn.getTouchIdentifier)(t);e.setState({touchIdentifier:o});var i=(0,Jn.getControlPosition)(t,o,dr(e));if(null!=i){var a=i.x,s=i.y,l=(0,Jn.createCoreData)(dr(e),a,s);(0,tr.default)("DraggableCore: handleDragStart: %j",l),(0,tr.default)("calling",e.props.onStart),!1!==e.props.onStart(t,l)&&!1!==e.mounted&&(e.props.enableUserSelectHack&&(0,Zn.addUserSelectStyles)(r),e.setState({dragging:!0,lastX:a,lastY:s}),(0,Zn.addEvent)(r,gr.move,e.handleDrag),(0,Zn.addEvent)(r,gr.stop,e.handleDragStop))}}})),pr(dr(e),"handleDrag",(function(t){var n=(0,Jn.getControlPosition)(t,e.state.touchIdentifier,dr(e));if(null!=n){var r=n.x,o=n.y;if(Array.isArray(e.props.grid)){var i=r-e.state.lastX,a=o-e.state.lastY,s=or((0,Jn.snapToGrid)(e.props.grid,i,a),2);if(i=s[0],a=s[1],!i&&!a)return;r=e.state.lastX+i,o=e.state.lastY+a}var l=(0,Jn.createCoreData)(dr(e),r,o);if((0,tr.default)("DraggableCore: handleDrag: %j",l),!1!==e.props.onDrag(t,l)&&!1!==e.mounted)e.setState({lastX:r,lastY:o});else try{e.handleDragStop(new MouseEvent("mouseup"))}catch(c){var u=document.createEvent("MouseEvents");u.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(u)}}})),pr(dr(e),"handleDragStop",(function(t){if(e.state.dragging){var n=(0,Jn.getControlPosition)(t,e.state.touchIdentifier,dr(e));if(null!=n){var r=n.x,o=n.y,i=(0,Jn.createCoreData)(dr(e),r,o);if(!1===e.props.onStop(t,i)||!1===e.mounted)return!1;var a=e.findDOMNode();a&&e.props.enableUserSelectHack&&(0,Zn.removeUserSelectStyles)(a.ownerDocument),(0,tr.default)("DraggableCore: handleDragStop: %j",i),e.setState({dragging:!1,lastX:NaN,lastY:NaN}),a&&((0,tr.default)("DraggableCore: Removing handlers"),(0,Zn.removeEvent)(a.ownerDocument,gr.move,e.handleDrag),(0,Zn.removeEvent)(a.ownerDocument,gr.stop,e.handleDragStop))}}})),pr(dr(e),"onMouseDown",(function(t){return gr=mr,e.handleDragStart(t)})),pr(dr(e),"onMouseUp",(function(t){return gr=mr,e.handleDragStop(t)})),pr(dr(e),"onTouchStart",(function(t){return gr=hr,e.handleDragStart(t)})),pr(dr(e),"onTouchEnd",(function(t){return gr=hr,e.handleDragStop(t)})),e}return t=i,(n=[{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.findDOMNode();e&&(0,Zn.addEvent)(e,hr.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.findDOMNode();if(e){var t=e.ownerDocument;(0,Zn.removeEvent)(t,mr.move,this.handleDrag),(0,Zn.removeEvent)(t,hr.move,this.handleDrag),(0,Zn.removeEvent)(t,mr.stop,this.handleDragStop),(0,Zn.removeEvent)(t,hr.stop,this.handleDragStop),(0,Zn.removeEvent)(e,hr.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Zn.removeUserSelectStyles)(t)}}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current)&&void 0!==e?e:Qn.default.findDOMNode(this)}},{key:"render",value:function(){return Yn.cloneElement(Yn.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}])&&sr(t.prototype,n),r&&sr(t,r),i}();Kn.default=vr,pr(vr,"displayName","DraggableCore"),pr(vr,"propTypes",{allowAnyClick:Xn.default.bool,disabled:Xn.default.bool,enableUserSelectHack:Xn.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Xn.default.arrayOf(Xn.default.number),handle:Xn.default.string,cancel:Xn.default.string,nodeRef:Xn.default.object,onStart:Xn.default.func,onDrag:Xn.default.func,onStop:Xn.default.func,onMouseDown:Xn.default.func,scale:Xn.default.number,className:er.dontSetMe,style:er.dontSetMe,transform:er.dontSetMe}),pr(vr,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return f.default}}),e.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(o,a,s):o[a]=e[a]}o.default=e,n&&n.set(e,o);return o}(t.exports),a=m(o.exports),s=m(n.exports),l=m(En),u=Sn,c=zn,d=xn,f=m(Kn),p=m($n),h=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function m(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(a,e);var t,n,r,o=O(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),T(k(t=o.call(this,e)),"onDragStart",(function(e,n){if((0,p.default)("Draggable: onDragStart: %j",n),!1===t.props.onStart(e,(0,c.createDraggableData)(k(t),n)))return!1;t.setState({dragging:!0,dragged:!0})})),T(k(t),"onDrag",(function(e,n){if(!t.state.dragging)return!1;(0,p.default)("Draggable: onDrag: %j",n);var r=(0,c.createDraggableData)(k(t),n),o={x:r.x,y:r.y};if(t.props.bounds){var i=o.x,a=o.y;o.x+=t.state.slackX,o.y+=t.state.slackY;var s=w((0,c.getBoundPosition)(k(t),o.x,o.y),2),l=s[0],u=s[1];o.x=l,o.y=u,o.slackX=t.state.slackX+(i-o.x),o.slackY=t.state.slackY+(a-o.y),r.x=o.x,r.y=o.y,r.deltaX=o.x-t.state.x,r.deltaY=o.y-t.state.y}if(!1===t.props.onDrag(e,r))return!1;t.setState(o)})),T(k(t),"onDragStop",(function(e,n){if(!t.state.dragging)return!1;if(!1===t.props.onStop(e,(0,c.createDraggableData)(k(t),n)))return!1;(0,p.default)("Draggable: onDragStop: %j",n);var r={dragging:!1,slackX:0,slackY:0};if(Boolean(t.props.position)){var o=t.props.position,i=o.x,a=o.y;r.x=i,r.y=a}t.setState(r)})),t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:_({},e.position),slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),t}return t=a,r=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.position,r=t.prevPropsPosition;return!n||r&&n.x===r.x&&n.y===r.y?null:((0,p.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:r}),{x:n.x,y:n.y,prevPropsPosition:_({},n)})}}],(n=[{key:"componentDidMount",value:function(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current)&&void 0!==e?e:s.default.findDOMNode(this)}},{key:"render",value:function(){var e,t=this.props;t.axis,t.bounds;var n=t.children,r=t.defaultPosition,o=t.defaultClassName,a=t.defaultClassNameDragging,s=t.defaultClassNameDragged,d=t.position,p=t.positionOffset;t.scale;var m=y(t,h),g={},b=null,w=!Boolean(d)||this.state.dragging,E=d||r,S={x:(0,c.canDragX)(this)&&w?this.state.x:E.x,y:(0,c.canDragY)(this)&&w?this.state.y:E.y};this.state.isElementSVG?b=(0,u.createSVGTransform)(S,p):g=(0,u.createCSSTransform)(S,p);var x=(0,l.default)(n.props.className||"",o,(T(e={},a,this.state.dragging),T(e,s,this.state.dragged),e));return i.createElement(f.default,v({},m,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),i.cloneElement(i.Children.only(n),{className:x,style:_(_({},n.props.style),g),transform:b}))}}])&&S(t.prototype,n),r&&S(t,r),a}(i.Component);e.default=L,T(L,"displayName","Draggable"),T(L,"propTypes",_(_({},f.default.propTypes),{},{axis:a.default.oneOf(["both","x","y","none"]),bounds:a.default.oneOfType([a.default.shape({left:a.default.number,right:a.default.number,top:a.default.number,bottom:a.default.number}),a.default.string,a.default.oneOf([!1])]),defaultClassName:a.default.string,defaultClassNameDragging:a.default.string,defaultClassNameDragged:a.default.string,defaultPosition:a.default.shape({x:a.default.number,y:a.default.number}),positionOffset:a.default.shape({x:a.default.oneOfType([a.default.number,a.default.string]),y:a.default.oneOfType([a.default.number,a.default.string])}),position:a.default.shape({x:a.default.number,y:a.default.number}),className:d.dontSetMe,style:d.dontSetMe,transform:d.dontSetMe})),T(L,"defaultProps",_(_({},f.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))}(wn);var yr=wn.default,br=wn.DraggableCore;_n.exports=yr,_n.exports.default=yr,_n.exports.DraggableCore=br;var _r=_n.exports;
/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wr(Object(n),!0).forEach((function(t){xr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sr(e){return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Or(){return(Or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ar(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function kr(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var Pr=kr(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Tr=kr(/Edge/i),Lr=kr(/firefox/i),Cr=kr(/safari/i)&&!kr(/chrome/i)&&!kr(/android/i),Rr=kr(/iP(ad|od|hone)/i),Mr=kr(/chrome/i)&&kr(/android/i),Dr={capture:!1,passive:!1};function Ir(e,t,n){e.addEventListener(t,n,!Pr&&Dr)}function jr(e,t,n){e.removeEventListener(t,n,!Pr&&Dr)}function Nr(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(n){return!1}return!1}}function Br(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Ur(e,t,n,r){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&Nr(e,t):Nr(e,t))||r&&e===n)return e;if(e===n)break}while(e=Br(e))}return null}var Fr,Vr=/\s+/g;function zr(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(Vr," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(Vr," ")}}function Hr(e,t,n){var r=e&&e.style;if(r){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in r||-1!==t.indexOf("webkit")||(t="-webkit-"+t),r[t]=n+("string"==typeof n?"":"px")}}function Gr(e,t){var n="";if("string"==typeof e)n=e;else do{var r=Hr(e,"transform");r&&"none"!==r&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function Wr(e,t,n){if(e){var r=e.getElementsByTagName(t),o=0,i=r.length;if(n)for(;o<i;o++)n(r[o],o);return r}return[]}function Kr(){var e=document.scrollingElement;return e||document.documentElement}function $r(e,t,n,r,o){if(e.getBoundingClientRect||e===window){var i,a,s,l,u,c,d;if(e!==window&&e.parentNode&&e!==Kr()?(a=(i=e.getBoundingClientRect()).top,s=i.left,l=i.bottom,u=i.right,c=i.height,d=i.width):(a=0,s=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(o=o||e.parentNode,!Pr))do{if(o&&o.getBoundingClientRect&&("none"!==Hr(o,"transform")||n&&"static"!==Hr(o,"position"))){var f=o.getBoundingClientRect();a-=f.top+parseInt(Hr(o,"border-top-width")),s-=f.left+parseInt(Hr(o,"border-left-width")),l=a+i.height,u=s+i.width;break}}while(o=o.parentNode);if(r&&e!==window){var p=Gr(o||e),h=p&&p.a,m=p&&p.d;p&&(l=(a/=m)+(c/=m),u=(s/=h)+(d/=h))}return{top:a,left:s,bottom:l,right:u,width:d,height:c}}}function qr(e,t,n){for(var r=Jr(e,!0),o=$r(e)[t];r;){var i=$r(r)[n];if(!("top"===n||"left"===n?o>=i:o<=i))return r;if(r===Kr())break;r=Jr(r,!1)}return!1}function Yr(e,t,n,r){for(var o=0,i=0,a=e.children;i<a.length;){if("none"!==a[i].style.display&&a[i]!==ri.ghost&&(r||a[i]!==ri.dragged)&&Ur(a[i],n.draggable,e,!1)){if(o===t)return a[i];o++}i++}return null}function Xr(e,t){for(var n=e.lastElementChild;n&&(n===ri.ghost||"none"===Hr(n,"display")||t&&!Nr(n,t));)n=n.previousElementSibling;return n||null}function Qr(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===ri.clone||t&&!Nr(e,t)||n++;return n}function Zr(e){var t=0,n=0,r=Kr();if(e)do{var o=Gr(e),i=o.a,a=o.d;t+=e.scrollLeft*i,n+=e.scrollTop*a}while(e!==r&&(e=e.parentNode));return[t,n]}function Jr(e,t){if(!e||!e.getBoundingClientRect)return Kr();var n=e,r=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=Hr(n);if(n.clientWidth<n.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!n.getBoundingClientRect||n===document.body)return Kr();if(r||t)return n;r=!0}}}while(n=n.parentNode);return Kr()}function eo(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function to(e,t){return function(){if(!Fr){var n=arguments,r=this;1===n.length?e.call(r,n[0]):e.apply(r,n),Fr=setTimeout((function(){Fr=void 0}),t)}}}function no(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function ro(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var oo="Sortable"+(new Date).getTime();function io(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==Hr(e,"display")&&e!==ri.ghost){t.push({target:e,rect:$r(e)});var n=Er({},t[t.length-1].rect);if(e.thisAnimationDuration){var r=Gr(e,!0);r&&(n.top-=r.f,n.left-=r.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var r=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var o=!1,i=0;t.forEach((function(e){var t=0,n=e.target,a=n.fromRect,s=$r(n),l=n.prevFromRect,u=n.prevToRect,c=e.rect,d=Gr(n,!0);d&&(s.top-=d.f,s.left-=d.e),n.toRect=s,n.thisAnimationDuration&&eo(l,s)&&!eo(a,s)&&(c.top-s.top)/(c.left-s.left)==(a.top-s.top)/(a.left-s.left)&&(t=function(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}(c,l,u,r.options)),eo(s,a)||(n.prevFromRect=a,n.prevToRect=s,t||(t=r.options.animation),r.animate(n,c,s,t)),t&&(o=!0,i=Math.max(i,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),o?e=setTimeout((function(){"function"==typeof n&&n()}),i):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,r){if(r){Hr(e,"transition",""),Hr(e,"transform","");var o=Gr(this.el),i=o&&o.a,a=o&&o.d,s=(t.left-n.left)/(i||1),l=(t.top-n.top)/(a||1);e.animatingX=!!s,e.animatingY=!!l,Hr(e,"transform","translate3d("+s+"px,"+l+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),Hr(e,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),Hr(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){Hr(e,"transition",""),Hr(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),r)}}}}var ao=[],so={initializeByDefault:!0},lo={mount:function(e){for(var t in so)so.hasOwnProperty(t)&&!(t in e)&&(e[t]=so[t]);ao.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),ao.push(e)},pluginEvent:function(e,t,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var o=e+"Global";ao.forEach((function(r){t[r.pluginName]&&(t[r.pluginName][o]&&t[r.pluginName][o](Er({sortable:t},n)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](Er({sortable:t},n)))}))},initializePlugins:function(e,t,n,r){for(var o in ao.forEach((function(r){var o=r.pluginName;if(e.options[o]||r.initializeByDefault){var i=new r(e,t,e.options);i.sortable=e,i.options=e.options,e[o]=i,Or(n,i.defaults)}})),e.options)if(e.options.hasOwnProperty(o)){var i=this.modifyOption(e,o,e.options[o]);void 0!==i&&(e.options[o]=i)}},getEventProperties:function(e,t){var n={};return ao.forEach((function(r){"function"==typeof r.eventProperties&&Or(n,r.eventProperties.call(t[r.pluginName],e))})),n},modifyOption:function(e,t,n){var r;return ao.forEach((function(o){e[o.pluginName]&&o.optionListeners&&"function"==typeof o.optionListeners[t]&&(r=o.optionListeners[t].call(e[o.pluginName],n))})),r}};var uo=["evt"],co=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.evt,o=Ar(n,uo);lo.pluginEvent.bind(ri)(e,t,Er({dragEl:po,parentEl:ho,ghostEl:mo,rootEl:go,nextEl:vo,lastDownEl:yo,cloneEl:bo,cloneHidden:_o,dragStarted:Mo,putSortable:Ao,activeSortable:ri.active,originalEvent:r,oldIndex:wo,oldDraggableIndex:So,newIndex:Eo,newDraggableIndex:xo,hideGhostForTarget:Jo,unhideGhostForTarget:ei,cloneNowHidden:function(){_o=!0},cloneNowShown:function(){_o=!1},dispatchSortableEvent:function(e){fo({sortable:t,name:e,originalEvent:r})}},o))};function fo(e){!function(e){var t=e.sortable,n=e.rootEl,r=e.name,o=e.targetEl,i=e.cloneEl,a=e.toEl,s=e.fromEl,l=e.oldIndex,u=e.newIndex,c=e.oldDraggableIndex,d=e.newDraggableIndex,f=e.originalEvent,p=e.putSortable,h=e.extraEventProperties;if(t=t||n&&n[oo]){var m,g=t.options,v="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||Pr||Tr?(m=document.createEvent("Event")).initEvent(r,!0,!0):m=new CustomEvent(r,{bubbles:!0,cancelable:!0}),m.to=a||n,m.from=s||n,m.item=o||n,m.clone=i,m.oldIndex=l,m.newIndex=u,m.oldDraggableIndex=c,m.newDraggableIndex=d,m.originalEvent=f,m.pullMode=p?p.lastPutMode:void 0;var y=Er(Er({},h),lo.getEventProperties(r,t));for(var b in y)m[b]=y[b];n&&n.dispatchEvent(m),g[v]&&g[v].call(t,m)}}(Er({putSortable:Ao,cloneEl:bo,targetEl:po,rootEl:go,oldIndex:wo,oldDraggableIndex:So,newIndex:Eo,newDraggableIndex:xo},e))}var po,ho,mo,go,vo,yo,bo,_o,wo,Eo,So,xo,Oo,Ao,ko,Po,To,Lo,Co,Ro,Mo,Do,Io,jo,No,Bo=!1,Uo=!1,Fo=[],Vo=!1,zo=!1,Ho=[],Go=!1,Wo=[],Ko="undefined"!=typeof document,$o=Rr,qo=Tr||Pr?"cssFloat":"float",Yo=Ko&&!Mr&&!Rr&&"draggable"in document.createElement("div"),Xo=function(){if(Ko){if(Pr)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Qo=function(e,t){var n=Hr(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=Yr(e,0,t),i=Yr(e,1,t),a=o&&Hr(o),s=i&&Hr(i),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+$r(o).width,u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+$r(i).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&"none"!==a.float){var c="left"===a.float?"left":"right";return!i||"both"!==s.clear&&s.clear!==c?"horizontal":"vertical"}return o&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||l>=r&&"none"===n[qo]||i&&"none"===n[qo]&&l+u>r)?"vertical":"horizontal"},Zo=function(e){function t(e,n){return function(r,o,i,a){var s=r.options.group.name&&o.options.group.name&&r.options.group.name===o.options.group.name;if(null==e&&(n||s))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(r,o,i,a),n)(r,o,i,a);var l=(n?r:o).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var n={},r=e.group;r&&"object"==Sr(r)||(r={name:r}),n.name=r.name,n.checkPull=t(r.pull,!0),n.checkPut=t(r.put),n.revertClone=r.revertClone,e.group=n},Jo=function(){!Xo&&mo&&Hr(mo,"display","none")},ei=function(){!Xo&&mo&&Hr(mo,"display","")};Ko&&document.addEventListener("click",(function(e){if(Uo)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Uo=!1,!1}),!0);var ti=function(e){if(po){e=e.touches?e.touches[0]:e;var t=(o=e.clientX,i=e.clientY,Fo.some((function(e){var t=e[oo].options.emptyInsertThreshold;if(t&&!Xr(e)){var n=$r(e),r=o>=n.left-t&&o<=n.right+t,s=i>=n.top-t&&i<=n.bottom+t;return r&&s?a=e:void 0}})),a);if(t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[oo]._onDragOver(n)}}var o,i,a},ni=function(e){po&&po.parentNode[oo]._isOutsideThisEl(e.target)};function ri(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Or({},t),e[oo]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Qo(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==ri.supportPointer&&"PointerEvent"in window&&!Cr,emptyInsertThreshold:5};for(var r in lo.initializePlugins(this,e,n),n)!(r in t)&&(t[r]=n[r]);for(var o in Zo(t),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&Yo,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Ir(e,"pointerdown",this._onTapStart):(Ir(e,"mousedown",this._onTapStart),Ir(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ir(e,"dragover",this),Ir(e,"dragenter",this)),Fo.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Or(this,io())}function oi(e,t,n,r,o,i,a,s){var l,u,c=e[oo],d=c.options.onMove;return!window.CustomEvent||Pr||Tr?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=r,l.related=o||t,l.relatedRect=i||$r(t),l.willInsertAfter=s,l.originalEvent=a,e.dispatchEvent(l),d&&(u=d.call(c,l,a)),u}function ii(e){e.draggable=!1}function ai(){Go=!1}function si(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function li(e){return setTimeout(e,0)}function ui(e){return clearTimeout(e)}ri.prototype={constructor:ri,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(Do=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,po):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,r=this.options,o=r.preventOnFilter,i=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(a||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,u=r.filter;if(function(e){Wo.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var r=t[n];r.checked&&Wo.push(r)}}(n),!po&&!(/mousedown|pointerdown/.test(i)&&0!==e.button||r.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!Cr||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=Ur(s,r.draggable,n,!1))&&s.animated||yo===s)){if(wo=Qr(s),So=Qr(s,r.draggable),"function"==typeof u){if(u.call(this,e,s,this))return fo({sortable:t,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),co("filter",t,{evt:e}),void(o&&e.cancelable&&e.preventDefault())}else if(u&&(u=u.split(",").some((function(r){if(r=Ur(l,r.trim(),n,!1))return fo({sortable:t,rootEl:r,name:"filter",targetEl:s,fromEl:n,toEl:n}),co("filter",t,{evt:e}),!0}))))return void(o&&e.cancelable&&e.preventDefault());r.handle&&!Ur(l,r.handle,n,!1)||this._prepareDragStart(e,a,s)}}},_prepareDragStart:function(e,t,n){var r,o=this,i=o.el,a=o.options,s=i.ownerDocument;if(n&&!po&&n.parentNode===i){var l=$r(n);if(go=i,ho=(po=n).parentNode,vo=po.nextSibling,yo=n,Oo=a.group,ri.dragged=po,ko={target:po,clientX:(t||e).clientX,clientY:(t||e).clientY},Co=ko.clientX-l.left,Ro=ko.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,po.style["will-change"]="all",r=function(){co("delayEnded",o,{evt:e}),ri.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!Lr&&o.nativeDraggable&&(po.draggable=!0),o._triggerDragStart(e,t),fo({sortable:o,name:"choose",originalEvent:e}),zr(po,a.chosenClass,!0))},a.ignore.split(",").forEach((function(e){Wr(po,e.trim(),ii)})),Ir(s,"dragover",ti),Ir(s,"mousemove",ti),Ir(s,"touchmove",ti),Ir(s,"mouseup",o._onDrop),Ir(s,"touchend",o._onDrop),Ir(s,"touchcancel",o._onDrop),Lr&&this.nativeDraggable&&(this.options.touchStartThreshold=4,po.draggable=!0),co("delayStart",this,{evt:e}),!a.delay||a.delayOnTouchOnly&&!t||this.nativeDraggable&&(Tr||Pr))r();else{if(ri.eventCanceled)return void this._onDrop();Ir(s,"mouseup",o._disableDelayedDrag),Ir(s,"touchend",o._disableDelayedDrag),Ir(s,"touchcancel",o._disableDelayedDrag),Ir(s,"mousemove",o._delayedDragTouchMoveHandler),Ir(s,"touchmove",o._delayedDragTouchMoveHandler),a.supportPointer&&Ir(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(r,a.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){po&&ii(po),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;jr(e,"mouseup",this._disableDelayedDrag),jr(e,"touchend",this._disableDelayedDrag),jr(e,"touchcancel",this._disableDelayedDrag),jr(e,"mousemove",this._delayedDragTouchMoveHandler),jr(e,"touchmove",this._delayedDragTouchMoveHandler),jr(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?Ir(document,"pointermove",this._onTouchMove):Ir(document,t?"touchmove":"mousemove",this._onTouchMove):(Ir(po,"dragend",this),Ir(go,"dragstart",this._onDragStart));try{document.selection?li((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(e,t){if(Bo=!1,go&&po){co("dragStarted",this,{evt:t}),this.nativeDraggable&&Ir(document,"dragover",ni);var n=this.options;!e&&zr(po,n.dragClass,!1),zr(po,n.ghostClass,!0),ri.active=this,e&&this._appendGhost(),fo({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Po){this._lastX=Po.clientX,this._lastY=Po.clientY,Jo();for(var e=document.elementFromPoint(Po.clientX,Po.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Po.clientX,Po.clientY))!==t;)t=e;if(po.parentNode[oo]._isOutsideThisEl(e),t)do{if(t[oo]){if(t[oo]._onDragOver({clientX:Po.clientX,clientY:Po.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);ei()}},_onTouchMove:function(e){if(ko){var t=this.options,n=t.fallbackTolerance,r=t.fallbackOffset,o=e.touches?e.touches[0]:e,i=mo&&Gr(mo,!0),a=mo&&i&&i.a,s=mo&&i&&i.d,l=$o&&No&&Zr(No),u=(o.clientX-ko.clientX+r.x)/(a||1)+(l?l[0]-Ho[0]:0)/(a||1),c=(o.clientY-ko.clientY+r.y)/(s||1)+(l?l[1]-Ho[1]:0)/(s||1);if(!ri.active&&!Bo){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(mo){i?(i.e+=u-(To||0),i.f+=c-(Lo||0)):i={a:1,b:0,c:0,d:1,e:u,f:c};var d="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");Hr(mo,"webkitTransform",d),Hr(mo,"mozTransform",d),Hr(mo,"msTransform",d),Hr(mo,"transform",d),To=u,Lo=c,Po=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!mo){var e=this.options.fallbackOnBody?document.body:go,t=$r(po,!0,$o,!0,e),n=this.options;if($o){for(No=e;"static"===Hr(No,"position")&&"none"===Hr(No,"transform")&&No!==document;)No=No.parentNode;No!==document.body&&No!==document.documentElement?(No===document&&(No=Kr()),t.top+=No.scrollTop,t.left+=No.scrollLeft):No=Kr(),Ho=Zr(No)}zr(mo=po.cloneNode(!0),n.ghostClass,!1),zr(mo,n.fallbackClass,!0),zr(mo,n.dragClass,!0),Hr(mo,"transition",""),Hr(mo,"transform",""),Hr(mo,"box-sizing","border-box"),Hr(mo,"margin",0),Hr(mo,"top",t.top),Hr(mo,"left",t.left),Hr(mo,"width",t.width),Hr(mo,"height",t.height),Hr(mo,"opacity","0.8"),Hr(mo,"position",$o?"absolute":"fixed"),Hr(mo,"zIndex","100000"),Hr(mo,"pointerEvents","none"),ri.ghost=mo,e.appendChild(mo),Hr(mo,"transform-origin",Co/parseInt(mo.style.width)*100+"% "+Ro/parseInt(mo.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,o=n.options;co("dragStart",this,{evt:e}),ri.eventCanceled?this._onDrop():(co("setupClone",this),ri.eventCanceled||((bo=ro(po)).draggable=!1,bo.style["will-change"]="",this._hideClone(),zr(bo,this.options.chosenClass,!1),ri.clone=bo),n.cloneId=li((function(){co("clone",n),ri.eventCanceled||(n.options.removeCloneOnHide||go.insertBefore(bo,po),n._hideClone(),fo({sortable:n,name:"clone"}))})),!t&&zr(po,o.dragClass,!0),t?(Uo=!0,n._loopId=setInterval(n._emulateDragOver,50)):(jr(document,"mouseup",n._onDrop),jr(document,"touchend",n._onDrop),jr(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(n,r,po)),Ir(document,"drop",n),Hr(po,"transform","translateZ(0)")),Bo=!0,n._dragStartId=li(n._dragStarted.bind(n,t,e)),Ir(document,"selectstart",n),Mo=!0,Cr&&Hr(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,r,o,i=this.el,a=e.target,s=this.options,l=s.group,u=ri.active,c=Oo===l,d=s.sort,f=Ao||u,p=this,h=!1;if(!Go){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),a=Ur(a,s.draggable,i,!0),T("dragOver"),ri.eventCanceled)return h;if(po.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||p._ignoreWhileAnimating===a)return C(!1);if(Uo=!1,u&&!s.disabled&&(c?d||(r=ho!==go):Ao===this||(this.lastPutMode=Oo.checkPull(this,u,po,e))&&l.checkPut(this,u,po,e))){if(o="vertical"===this._getDirection(e,a),t=$r(po),T("dragOverValid"),ri.eventCanceled)return h;if(r)return ho=go,L(),this._hideClone(),T("revert"),ri.eventCanceled||(vo?go.insertBefore(po,vo):go.appendChild(po)),C(!0);var m=Xr(i,s.draggable);if(!m||function(e,t,n){var r=$r(Xr(n.el,n.options.draggable)),o=10;return t?e.clientX>r.right+o||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+o}(e,o,this)&&!m.animated){if(m===po)return C(!1);if(m&&i===e.target&&(a=m),a&&(n=$r(a)),!1!==oi(go,i,po,t,a,n,e,!!a))return L(),i.appendChild(po),ho=i,R(),C(!0)}else if(m&&function(e,t,n){var r=$r(Yr(n.el,0,n.options,!0)),o=10;return t?e.clientX<r.left-o||e.clientY<r.top&&e.clientX<r.right:e.clientY<r.top-o||e.clientY<r.bottom&&e.clientX<r.left}(e,o,this)){var g=Yr(i,0,s,!0);if(g===po)return C(!1);if(n=$r(a=g),!1!==oi(go,i,po,t,a,n,e,!1))return L(),i.insertBefore(po,g),ho=i,R(),C(!0)}else if(a.parentNode===i){n=$r(a);var v,y,b,_=po.parentNode!==i,w=!function(e,t,n){var r=n?e.left:e.top,o=n?e.right:e.bottom,i=n?e.width:e.height,a=n?t.left:t.top,s=n?t.right:t.bottom,l=n?t.width:t.height;return r===a||o===s||r+i/2===a+l/2}(po.animated&&po.toRect||t,a.animated&&a.toRect||n,o),E=o?"top":"left",S=qr(a,"top","top")||qr(po,"top","top"),x=S?S.scrollTop:void 0;if(Do!==a&&(y=n[E],Vo=!1,zo=!w&&s.invertSwap||_),0!==(v=function(e,t,n,r,o,i,a,s){var l=r?e.clientY:e.clientX,u=r?n.height:n.width,c=r?n.top:n.left,d=r?n.bottom:n.right,f=!1;if(!a)if(s&&jo<u*o){if(!Vo&&(1===Io?l>c+u*i/2:l<d-u*i/2)&&(Vo=!0),Vo)f=!0;else if(1===Io?l<c+jo:l>d-jo)return-Io}else if(l>c+u*(1-o)/2&&l<d-u*(1-o)/2)return function(e){return Qr(po)<Qr(e)?1:-1}(t);if((f=f||a)&&(l<c+u*i/2||l>d-u*i/2))return l>c+u/2?1:-1;return 0}(e,a,n,o,w?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,zo,Do===a))){var O=Qr(po);do{O-=v,b=ho.children[O]}while(b&&("none"===Hr(b,"display")||b===mo))}if(0===v||b===a)return C(!1);Do=a,Io=v;var A=a.nextElementSibling,k=!1,P=oi(go,i,po,t,a,n,e,k=1===v);if(!1!==P)return 1!==P&&-1!==P||(k=1===P),Go=!0,setTimeout(ai,30),L(),k&&!A?i.appendChild(po):a.parentNode.insertBefore(po,k?A:a),S&&no(S,0,x-S.scrollTop),ho=po.parentNode,void 0===y||zo||(jo=Math.abs(y-$r(a)[E])),R(),C(!0)}if(i.contains(po))return C(!1)}return!1}function T(s,l){co(s,p,Er({evt:e,isOwner:c,axis:o?"vertical":"horizontal",revert:r,dragRect:t,targetRect:n,canSort:d,fromSortable:f,target:a,completed:C,onMove:function(n,r){return oi(go,i,po,t,n,$r(n),e,r)},changed:R},l))}function L(){T("dragOverAnimationCapture"),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function C(t){return T("dragOverCompleted",{insertion:t}),t&&(c?u._hideClone():u._showClone(p),p!==f&&(zr(po,Ao?Ao.options.ghostClass:u.options.ghostClass,!1),zr(po,s.ghostClass,!0)),Ao!==p&&p!==ri.active?Ao=p:p===ri.active&&Ao&&(Ao=null),f===p&&(p._ignoreWhileAnimating=a),p.animateAll((function(){T("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(a===po&&!po.animated||a===i&&!a.animated)&&(Do=null),s.dragoverBubble||e.rootEl||a===document||(po.parentNode[oo]._isOutsideThisEl(e.target),!t&&ti(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),h=!0}function R(){Eo=Qr(po),xo=Qr(po,s.draggable),fo({sortable:p,name:"change",toEl:i,newIndex:Eo,newDraggableIndex:xo,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){jr(document,"mousemove",this._onTouchMove),jr(document,"touchmove",this._onTouchMove),jr(document,"pointermove",this._onTouchMove),jr(document,"dragover",ti),jr(document,"mousemove",ti),jr(document,"touchmove",ti)},_offUpEvents:function(){var e=this.el.ownerDocument;jr(e,"mouseup",this._onDrop),jr(e,"touchend",this._onDrop),jr(e,"pointerup",this._onDrop),jr(e,"touchcancel",this._onDrop),jr(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;Eo=Qr(po),xo=Qr(po,n.draggable),co("drop",this,{evt:e}),ho=po&&po.parentNode,Eo=Qr(po),xo=Qr(po,n.draggable),ri.eventCanceled||(Bo=!1,zo=!1,Vo=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ui(this.cloneId),ui(this._dragStartId),this.nativeDraggable&&(jr(document,"drop",this),jr(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Cr&&Hr(document.body,"user-select",""),Hr(po,"transform",""),e&&(Mo&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),mo&&mo.parentNode&&mo.parentNode.removeChild(mo),(go===ho||Ao&&"clone"!==Ao.lastPutMode)&&bo&&bo.parentNode&&bo.parentNode.removeChild(bo),po&&(this.nativeDraggable&&jr(po,"dragend",this),ii(po),po.style["will-change"]="",Mo&&!Bo&&zr(po,Ao?Ao.options.ghostClass:this.options.ghostClass,!1),zr(po,this.options.chosenClass,!1),fo({sortable:this,name:"unchoose",toEl:ho,newIndex:null,newDraggableIndex:null,originalEvent:e}),go!==ho?(Eo>=0&&(fo({rootEl:ho,name:"add",toEl:ho,fromEl:go,originalEvent:e}),fo({sortable:this,name:"remove",toEl:ho,originalEvent:e}),fo({rootEl:ho,name:"sort",toEl:ho,fromEl:go,originalEvent:e}),fo({sortable:this,name:"sort",toEl:ho,originalEvent:e})),Ao&&Ao.save()):Eo!==wo&&Eo>=0&&(fo({sortable:this,name:"update",toEl:ho,originalEvent:e}),fo({sortable:this,name:"sort",toEl:ho,originalEvent:e})),ri.active&&(null!=Eo&&-1!==Eo||(Eo=wo,xo=So),fo({sortable:this,name:"end",toEl:ho,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){co("nulling",this),go=po=ho=mo=vo=bo=yo=_o=ko=Po=Mo=Eo=xo=wo=So=Do=Io=Ao=Oo=ri.dragged=ri.ghost=ri.clone=ri.active=null,Wo.forEach((function(e){e.checked=!0})),Wo.length=To=Lo=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":po&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,r=0,o=n.length,i=this.options;r<o;r++)Ur(e=n[r],i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||si(e));return t},sort:function(e,t){var n={},r=this.el;this.toArray().forEach((function(e,t){var o=r.children[t];Ur(o,this.options.draggable,r,!1)&&(n[e]=o)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(r.removeChild(n[e]),r.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Ur(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var r=lo.modifyOption(this,e,t);n[e]=void 0!==r?r:t,"group"===e&&Zo(n)},destroy:function(){co("destroy",this);var e=this.el;e[oo]=null,jr(e,"mousedown",this._onTapStart),jr(e,"touchstart",this._onTapStart),jr(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(jr(e,"dragover",this),jr(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Fo.splice(Fo.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!_o){if(co("hideClone",this),ri.eventCanceled)return;Hr(bo,"display","none"),this.options.removeCloneOnHide&&bo.parentNode&&bo.parentNode.removeChild(bo),_o=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(_o){if(co("showClone",this),ri.eventCanceled)return;po.parentNode!=go||this.options.group.revertClone?vo?go.insertBefore(bo,vo):go.appendChild(bo):go.insertBefore(bo,po),this.options.group.revertClone&&this.animate(po,bo),Hr(bo,"display",""),_o=!1}}else this._hideClone()}},Ko&&Ir(document,"touchmove",(function(e){(ri.active||Bo)&&e.cancelable&&e.preventDefault()})),ri.utils={on:Ir,off:jr,css:Hr,find:Wr,is:function(e,t){return!!Ur(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:to,closest:Ur,toggleClass:zr,clone:ro,index:Qr,nextTick:li,cancelNextTick:ui,detectDirection:Qo,getChild:Yr},ri.get=function(e){return e[oo]},ri.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(ri.utils=Er(Er({},ri.utils),e.utils)),lo.mount(e)}))},ri.create=function(e,t){return new ri(e,t)},ri.version="1.14.0";var ci,di,fi,pi,hi,mi,gi=[],vi=!1;function yi(){gi.forEach((function(e){clearInterval(e.pid)})),gi=[]}function bi(){clearInterval(mi)}var _i,wi=to((function(e,t,n,r){if(t.scroll){var o,i=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,u=Kr(),c=!1;di!==n&&(di=n,yi(),ci=t.scroll,o=t.scrollFn,!0===ci&&(ci=Jr(n,!0)));var d=0,f=ci;do{var p=f,h=$r(p),m=h.top,g=h.bottom,v=h.left,y=h.right,b=h.width,_=h.height,w=void 0,E=void 0,S=p.scrollWidth,x=p.scrollHeight,O=Hr(p),A=p.scrollLeft,k=p.scrollTop;p===u?(w=b<S&&("auto"===O.overflowX||"scroll"===O.overflowX||"visible"===O.overflowX),E=_<x&&("auto"===O.overflowY||"scroll"===O.overflowY||"visible"===O.overflowY)):(w=b<S&&("auto"===O.overflowX||"scroll"===O.overflowX),E=_<x&&("auto"===O.overflowY||"scroll"===O.overflowY));var P=w&&(Math.abs(y-i)<=s&&A+b<S)-(Math.abs(v-i)<=s&&!!A),T=E&&(Math.abs(g-a)<=s&&k+_<x)-(Math.abs(m-a)<=s&&!!k);if(!gi[d])for(var L=0;L<=d;L++)gi[L]||(gi[L]={});gi[d].vx==P&&gi[d].vy==T&&gi[d].el===p||(gi[d].el=p,gi[d].vx=P,gi[d].vy=T,clearInterval(gi[d].pid),0==P&&0==T||(c=!0,gi[d].pid=setInterval(function(){r&&0===this.layer&&ri.active._onTouchMove(hi);var t=gi[this.layer].vy?gi[this.layer].vy*l:0,n=gi[this.layer].vx?gi[this.layer].vx*l:0;"function"==typeof o&&"continue"!==o.call(ri.dragged.parentNode[oo],n,t,e,hi,gi[this.layer].el)||no(gi[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&f!==u&&(f=Jr(f,!1)));vi=c}}),30),Ei=function(e){var t=e.originalEvent,n=e.putSortable,r=e.dragEl,o=e.activeSortable,i=e.dispatchSortableEvent,a=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var l=n||o;a();var u=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,c=document.elementFromPoint(u.clientX,u.clientY);s(),l&&!l.el.contains(c)&&(i("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function Si(){}function xi(){}Si.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=Yr(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:Ei},Or(Si,{pluginName:"revertOnSpill"}),xi.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:Ei},Or(xi,{pluginName:"removeOnSpill"}),ri.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?Ir(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ir(document,"pointermove",this._handleFallbackAutoScroll):t.touches?Ir(document,"touchmove",this._handleFallbackAutoScroll):Ir(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?jr(document,"dragover",this._handleAutoScroll):(jr(document,"pointermove",this._handleFallbackAutoScroll),jr(document,"touchmove",this._handleFallbackAutoScroll),jr(document,"mousemove",this._handleFallbackAutoScroll)),bi(),yi(),clearTimeout(Fr),Fr=void 0},nulling:function(){hi=di=ci=vi=mi=fi=pi=null,gi.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,r=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,i=document.elementFromPoint(r,o);if(hi=e,t||this.options.forceAutoScrollFallback||Tr||Pr||Cr){wi(e,this.options,i,t);var a=Jr(i,!0);!vi||mi&&r===fi&&o===pi||(mi&&bi(),mi=setInterval((function(){var i=Jr(document.elementFromPoint(r,o),!0);i!==a&&(a=i,yi()),wi(e,n.options,i,t)}),10),fi=r,pi=o)}else{if(!this.options.bubbleScroll||Jr(i,!0)===Kr())return void yi();wi(e,this.options,Jr(i,!1),!1)}}},Or(e,{pluginName:"scroll",initializeByDefault:!0})}),ri.mount(xi,Si);var Oi="__PLAYER_KEY__",Ai={selector:"audio-lists-panel-content-wrap",swapClass:"audio-lists-panel-sortable-highlight-bg",swap:!0,animation:100,easing:"cubic-bezier(0.43, -0.1, 0.16, 1.1)"},ki=function(e){var t=e.audioLists,n=e.onCancel,r=e.onDelete,o=e.onPlay,a=e.playId,s=e.loading,l=e.panelToggleAnimate,u=e.glassBg,c=e.remove,d=e.removeId,f=e.isMobile,p=e.locale,h=e.icon,m=e.playing;return i.createElement("div",{className:V("audio-lists-panel",l,{"audio-lists-panel-mobile":f,"glass-bg":u})},i.createElement("div",{className:"audio-lists-panel-header"},i.createElement("h2",{className:"audio-lists-panel-header-title"},i.createElement("span",null,p.playListsText," / "),i.createElement("span",{className:"audio-lists-panel-header-num"},t.length),i.createElement("span",{className:"audio-lists-panel-header-actions"},c&&i.createElement(i.Fragment,null,i.createElement("span",{className:"audio-lists-panel-header-delete-btn",title:p.removeAudioListsText,onClick:r()},h.delete),i.createElement("span",{className:"audio-lists-panel-header-line"})),i.createElement("span",{className:"audio-lists-panel-header-close-btn",title:p.closeText,onClick:n},f?h.packUpPanelMobile:h.close)))),i.createElement("div",{className:V("audio-lists-panel-content",{"no-content":t.length<1})},t.length>=1?i.createElement("ul",{className:Ai.selector},t.map((function(e){var t=e.name,n=e.singer,l=e[Oi],u=a===l;return i.createElement("li",{key:l,title:m&&u?p.clickToPauseText:p.clickToPlayText,className:V("audio-item",{playing:u},{pause:!m},{remove:d===l}),onClick:function(){return o(l)}},i.createElement("span",{className:"group player-status"},i.createElement("span",{className:"player-icons"},u&&s?h.loading:u?m?h.pause:h.play:void 0)),i.createElement("span",{className:"group player-name",title:t},t),i.createElement("span",{className:"group player-singer",title:n},n),c&&i.createElement("span",{className:"group player-delete",title:p.clickToDeleteText(t),onClick:r(l)},h.close))}))):i.createElement(i.Fragment,null,i.createElement("span",null,h.empty),i.createElement("span",{className:"no-data"},p.emptyText||p.notContentText))))},Pi=t.exports.memo(ki),Ti=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.progress,n=void 0===t?0:t,r=e.r,o=void 0===r?40:r,a=n.toFixed(2),s=2*Math.PI*o,l="".concat(Math.floor(s*a)," ").concat(Math.floor(s*(1-a)));return i.createElement("svg",{className:"audio-circle-process-bar"},i.createElement("circle",{cx:o,cy:o,r:o-1,fill:"none",className:"stroke",strokeDasharray:l}),i.createElement("circle",{cx:o,cy:o,r:o-1,fill:"none",className:"bg",strokeDasharray:"0 1000"}))},Li=t.exports.memo(Ti),Ci={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ri=i.createContext&&i.createContext(Ci),Mi=function(){return(Mi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Di(e){return e&&e.map((function(e,t){return i.createElement(e.tag,Mi({key:t},e.attr),Di(e.child))}))}function Ii(e){var t=function(t){var n,r=e.attr,o=e.size,a=e.title,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["attr","size","title"]),l=o||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),i.createElement("svg",Mi({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,s,{className:n,style:Mi(Mi({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&i.createElement("title",null,a),e.children)};return void 0!==Ri?i.createElement(Ri.Consumer,null,(function(e){return t(e)})):t(Ci)}var ji=r(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",IconsManifest:[{id:"fa",name:"Font Awesome",projectUrl:"https://fontawesome.com/",license:"CC BY 4.0 License",licenseUrl:"https://creativecommons.org/licenses/by/4.0/"},{id:"io",name:"Ionicons 4",projectUrl:"https://ionicons.com/",license:"MIT",licenseUrl:"https://github.com/ionic-team/ionicons/blob/master/LICENSE"},{id:"io5",name:"Ionicons 5",projectUrl:"https://ionicons.com/",license:"MIT",licenseUrl:"https://github.com/ionic-team/ionicons/blob/master/LICENSE"},{id:"md",name:"Material Design icons",projectUrl:"http://google.github.io/material-design-icons/",license:"Apache License Version 2.0",licenseUrl:"https://github.com/google/material-design-icons/blob/master/LICENSE"},{id:"ti",name:"Typicons",projectUrl:"http://s-ings.com/typicons/",license:"CC BY-SA 3.0",licenseUrl:"https://creativecommons.org/licenses/by-sa/3.0/"},{id:"go",name:"Github Octicons icons",projectUrl:"https://octicons.github.com/",license:"MIT",licenseUrl:"https://github.com/primer/octicons/blob/master/LICENSE"},{id:"fi",name:"Feather",projectUrl:"https://feathericons.com/",license:"MIT",licenseUrl:"https://github.com/feathericons/feather/blob/master/LICENSE"},{id:"gi",name:"Game Icons",projectUrl:"https://game-icons.net/",license:"CC BY 3.0",licenseUrl:"https://creativecommons.org/licenses/by/3.0/"},{id:"wi",name:"Weather Icons",projectUrl:"https://erikflowers.github.io/weather-icons/",license:"SIL OFL 1.1",licenseUrl:"http://scripts.sil.org/OFL"},{id:"di",name:"Devicons",projectUrl:"https://vorillaz.github.io/devicons/",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"ai",name:"Ant Design Icons",projectUrl:"https://github.com/ant-design/ant-design-icons",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"bs",name:"Bootstrap Icons",projectUrl:"https://github.com/twbs/icons",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"ri",name:"Remix Icon",projectUrl:"https://github.com/Remix-Design/RemixIcon",license:"Apache License Version 2.0",licenseUrl:"http://www.apache.org/licenses/"},{id:"fc",name:"Flat Color Icons",projectUrl:"https://github.com/icons8/flat-color-icons",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"gr",name:"Grommet-Icons",projectUrl:"https://github.com/grommet/grommet-icons",license:"Apache License Version 2.0",licenseUrl:"http://www.apache.org/licenses/"},{id:"hi",name:"Heroicons",projectUrl:"https://github.com/refactoringui/heroicons",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"si",name:"Simple Icons",projectUrl:"https://simpleicons.org/",license:"CC0 1.0 Universal",licenseUrl:"https://creativecommons.org/publicdomain/zero/1.0/"},{id:"im",name:"IcoMoon Free",projectUrl:"https://github.com/Keyamoon/IcoMoon-Free",license:"CC BY 4.0 License"},{id:"bi",name:"BoxIcons",projectUrl:"https://github.com/atisawd/boxicons",license:"CC BY 4.0 License"},{id:"cg",name:"css.gg",projectUrl:"https://github.com/astrit/css.gg",license:"MIT",licenseUrl:"https://opensource.org/licenses/MIT"},{id:"vsc",name:"VS Code Icons",projectUrl:"https://github.com/microsoft/vscode-codicons",license:"CC BY 4.0",licenseUrl:"https://creativecommons.org/licenses/by/4.0/"}],GenIcon:function(e){return function(t){return i.createElement(Ii,Mi({attr:Mi({},e.attr)},t),Di(e.child))}},IconBase:Ii,DefaultContext:Ci,IconContext:Ri})),Ni=ji.GenIcon,Bi=function(e){return Ni({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm-16 328c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16v160zm112 0c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16v160z"}}]})(e)},Ui=ji.GenIcon,Fi=function(e){return Ui({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z"}}]})(e)},Vi=ji.GenIcon,zi=function(e){return Vi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"}}]})(e)},Hi=ji.GenIcon,Gi=function(e){return Hi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.52 32 0 146.496 0 288v48a32 32 0 0 0 17.689 28.622l14.383 7.191C34.083 431.903 83.421 480 144 480h24c13.255 0 24-10.745 24-24V280c0-13.255-10.745-24-24-24h-24c-31.342 0-59.671 12.879-80 33.627V288c0-105.869 86.131-192 192-192s192 86.131 192 192v1.627C427.671 268.879 399.342 256 368 256h-24c-13.255 0-24 10.745-24 24v176c0 13.255 10.745 24 24 24h24c60.579 0 109.917-48.098 111.928-108.187l14.382-7.191A32 32 0 0 0 512 336v-48c0-141.479-114.496-256-256-256z"}}]})(e)},Wi=ji.GenIcon,Ki=function(e){return Wi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M108 284c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h232c6.6 0 12 5.4 12 12v32c0 6.6-5.4 12-12 12H108zM448 80v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48h352c26.5 0 48 21.5 48 48zm-48 346V86c0-3.3-2.7-6-6-6H54c-3.3 0-6 2.7-6 6v340c0 3.3 2.7 6 6 6h340c3.3 0 6-2.7 6-6z"}}]})(e)},$i=ji.GenIcon,qi=function(e){return $i({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"}}]})(e)},Yi=ji.GenIcon,Xi=function(e){return Yi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M370.72 133.28C339.458 104.008 298.888 87.962 255.848 88c-77.458.068-144.328 53.178-162.791 126.85-1.344 5.363-6.122 9.15-11.651 9.15H24.103c-7.498 0-13.194-6.807-11.807-14.176C33.933 94.924 134.813 8 256 8c66.448 0 126.791 26.136 171.315 68.685L463.03 40.97C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.749zM32 296h134.059c21.382 0 32.09 25.851 16.971 40.971l-41.75 41.75c31.262 29.273 71.835 45.319 114.876 45.28 77.418-.07 144.315-53.144 162.787-126.849 1.344-5.363 6.122-9.15 11.651-9.15h57.304c7.498 0 13.194 6.807 11.807 14.176C478.067 417.076 377.187 504 256 504c-66.448 0-126.791-26.136-171.315-68.685L48.97 471.03C33.851 486.149 8 475.441 8 454.059V320c0-13.255 10.745-24 24-24z"}}]})(e)},Qi=ji.GenIcon,Zi=function(e){return Qi({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"7 13 12 18 17 13"}},{tag:"polyline",attr:{points:"7 6 12 11 17 6"}}]})(e)},Ji=ji.GenIcon,ea=function(e){return Ji({tag:"svg",attr:{viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M8 2.81v10.38c0 .67-.81 1-1.28.53L3 10H1c-.55 0-1-.45-1-1V7c0-.55.45-1 1-1h2l3.72-3.72C7.19 1.81 8 2.14 8 2.81zm7.53 3.22l-1.06-1.06-1.97 1.97-1.97-1.97-1.06 1.06L11.44 8 9.47 9.97l1.06 1.06 1.97-1.97 1.97 1.97 1.06-1.06L13.56 8l1.97-1.97z"}}]})(e)},ta=ji.GenIcon,na=function(e){return ta({tag:"svg",attr:{viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12 8.02c0 1.09-.45 2.09-1.17 2.83l-.67-.67c.55-.56.89-1.31.89-2.16 0-.85-.34-1.61-.89-2.16l.67-.67A3.99 3.99 0 0 1 12 8.02zM7.72 2.28L4 6H2c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1h2l3.72 3.72c.47.47 1.28.14 1.28-.53V2.81c0-.67-.81-1-1.28-.53zm5.94.08l-.67.67a6.996 6.996 0 0 1 2.06 4.98c0 1.94-.78 3.7-2.06 4.98l.67.67A7.973 7.973 0 0 0 16 8c0-2.22-.89-4.22-2.34-5.66v.02zm-1.41 1.41l-.69.67a5.05 5.05 0 0 1 1.48 3.58c0 1.39-.56 2.66-1.48 3.56l.69.67A5.971 5.971 0 0 0 14 8.02c0-1.65-.67-3.16-1.75-4.25z"}}]})(e)},ra=ji.GenIcon,oa=function(e){return ra({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}}]})(e)},ia=ji.GenIcon,aa=function(e){return ia({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 5h-3v5.5c0 1.38-1.12 2.5-2.5 2.5S10 13.88 10 12.5s1.12-2.5 2.5-2.5c.57 0 1.08.19 1.5.51V5h4v2zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6z"}}]})(e)},sa=ji.GenIcon,la=function(e){return sa({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"}}]})(e)},ua=ji.GenIcon,ca=function(e){return ua({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4zm-4-2V9h-1l-2 1v1h1.5v4H13z"}}]})(e)},da=ji.GenIcon,fa=function(e){return da({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"}}]})(e)},pa=ji.GenIcon,ha=function(e){return pa({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"}}]})(e)},ma=ji.GenIcon,ga=function(e){return ma({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"}}]})(e)},va=ji.GenIcon,ya=function(e){return va({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M17 6h5v2h-2v13a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V8H2V6h5V3a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v3zm1 2H6v12h12V8zm-9 3h2v6H9v-6zm4 0h2v6h-2v-6zM9 4v2h6V4H9z"}}]}]})(e)},ba=ji.GenIcon,_a=function(e){return ba({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0H24V24H0z"}},{tag:"path",attr:{d:"M22 18v2H2v-2h20zM2 3.5l8 5-8 5v-10zM22 11v2H12v-2h10zm0-7v2H12V4h10z"}}]}]})(e)},wa=ji.GenIcon,Ea=function(e){return wa({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 9h3.5c.736 0 1.393.391 1.851 1.001.325-.604.729-1.163 1.191-1.662-.803-.823-1.866-1.339-3.042-1.339h-3.5c-.553 0-1 .448-1 1s.447 1 1 1zM11.685 12.111c.551-1.657 2.256-3.111 3.649-3.111h1.838l-1.293 1.293c-.391.391-.391 1.023 0 1.414.195.195.451.293.707.293s.512-.098.707-.293l3.707-3.707-3.707-3.707c-.391-.391-1.023-.391-1.414 0s-.391 1.023 0 1.414l1.293 1.293h-1.838c-2.274 0-4.711 1.967-5.547 4.479l-.472 1.411c-.641 1.926-2.072 3.11-2.815 3.11h-2.5c-.553 0-1 .448-1 1s.447 1 1 1h2.5c1.837 0 3.863-1.925 4.713-4.479l.472-1.41zM15.879 13.293c-.391.391-.391 1.023 0 1.414l1.293 1.293h-2.338c-1.268 0-2.33-.891-2.691-2.108-.256.75-.627 1.499-1.09 2.185.886 1.162 2.243 1.923 3.781 1.923h2.338l-1.293 1.293c-.391.391-.391 1.023 0 1.414.195.195.451.293.707.293s.512-.098.707-.293l3.707-3.707-3.707-3.707c-.391-.391-1.023-.391-1.414 0z"}}]})(e)},Sa=ji.GenIcon,xa=function(e){return Sa({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.707 7.404c-.189-.188-.448-.283-.707-.283s-.518.095-.707.283l-2.293 2.293v-6.697c0-.552-.448-1-1-1s-1 .448-1 1v6.697l-2.293-2.293c-.189-.188-.44-.293-.707-.293s-.518.105-.707.293c-.39.39-.39 1.024 0 1.414l4.707 4.682 4.709-4.684c.388-.387.388-1.022-.002-1.412zM20.987 16c0-.105-.004-.211-.039-.316l-2-6c-.136-.409-.517-.684-.948-.684h-.219c-.094.188-.21.368-.367.525l-1.482 1.475h1.348l1.667 5h-13.893l1.667-5h1.348l-1.483-1.475c-.157-.157-.274-.337-.367-.525h-.219c-.431 0-.812.275-.948.684l-2 6c-.035.105-.039.211-.039.316-.013 0-.013 5-.013 5 0 .553.447 1 1 1h16c.553 0 1-.447 1-1 0 0 0-5-.013-5z"}}]})(e)},Oa=function(){return i.createElement(Fi,{className:"react-jinke-music-player-play-icon"})},Aa=function(){return i.createElement(Bi,{className:"react-jinke-music-player-pause-icon"})},ka=function(e){var t=e.prefix,n=e.visible,r=e.title,o=e.text;return i.createElement("div",{className:V("".concat(t,"-play-model-tip"),{show:n})},i.createElement("span",{className:"".concat(t,"-play-model-tip-title")},r),i.createElement("span",{className:"".concat(t,"-play-model-tip-text")},o))},Pa=t.exports.memo(ka),Ta="react-jinke-music-player-mobile",La=function(e){var n=e.name,r=e.cover,o=e.singer,a=e.playing,s=e.duration,l=e.currentTime,u=e.loading,c=e.themeSwitch,d=e.progressBar,f=e.openAudioListsPanel,p=e.audioPrevPlay,h=e.audioNextPlay,m=e.playMode,g=e.onClose,v=e.playModeTipVisible,y=e.currentPlayModeName,b=e.extendsContent,_=e.onPlay,w=e.glassBg,E=e.onCoverClick,S=e.autoHiddenCover,x=e.icon,O=e.locale,A=e.toggleMode,k=e.renderAudioTitle,P=e.shouldShowPlayIcon,T=e.isResetCoverRotate;return i.createElement("div",{className:V(Ta,{"default-bg":!w,"glass-bg":w})},i.createElement(Pa,{prefix:Ta,visible:v,title:m,text:y}),i.createElement("div",{className:"".concat(Ta,"-header group")},i.createElement("div",{className:"".concat(Ta,"-header-title"),title:n},k()),A&&i.createElement("div",{className:"".concat(Ta,"-header-right"),onClick:g},x.close)),i.createElement("div",{className:"".concat(Ta,"-singer text-center group")},i.createElement("span",{className:"".concat(Ta,"-singer-name"),title:o},o)),i.createElement("div",{className:"".concat(Ta,"-switch text-center group")},c),(!S||S&&r)&&i.createElement("div",{className:"".concat(Ta,"-cover text-center"),onClick:function(){return E()}},i.createElement("img",{src:r,alt:"cover",className:V("cover",{"img-rotate-pause":!a||!r,"img-rotate-reset":T})})),i.createElement("div",{className:"".concat(Ta,"-progress group")},i.createElement("span",{className:"current-time"},u?"--":l),i.createElement("span",{className:"".concat(Ta,"-progress-bar")},d),i.createElement("span",{className:"duration text-right"},u?"--":s)),i.createElement("div",{className:"".concat(Ta,"-toggle text-center group")},i.createElement("span",{className:"group prev-audio",title:O.previousTrackText,onClick:p},x.prev),u?i.createElement("span",{className:"group loading-icon"},x.loading):i.createElement("span",{className:"group play-btn",title:P?O.clickToPlayText:O.clickToPauseText,onClick:_},P?x.play:x.pause),i.createElement("span",{className:"group next-audio",title:O.nextTrackText,onClick:h},x.next)),i.createElement("div",{className:"".concat(Ta,"-operation group")},i.createElement("ul",{className:"items"},[m,x.download,x.reload,x.lyric].filter(t.exports.isValidElement).map((function(e){return i.createElement("li",{className:"item",key:e.props.className},e)})),b,i.createElement("li",{className:"item",onClick:f},x.playLists))))};La.defaultProps={icon:{},renderAudioTitle:function(){}};var Ca,Ra=t.exports.memo(La),Ma=function(e){var t=e.visible,n=e.value;return i.createElement("div",{className:V("play-mode-title",{"play-mode-title-visible":t})},n)},Da=t.exports.memo(Ma),Ia={en_US:"en_US",zh_CN:"zh_CN"},ja="(max-width: 768px) and (orientation : portrait)",Na="screen and (prefers-color-scheme: dark)",Ba={FULL:"full",MINI:"mini"},Ua=0,Fa=3,Va=3,za={order:"order",orderLoop:"orderLoop",singleLoop:"singleLoop",shufflePlay:"shufflePlay"},Ha={LIGHT:"light",DARK:"dark",AUTO:"auto"},Ga=a.oneOf(["order","orderLoop","singleLoop","shufflePlay"]),Wa={audioLists:a.array.isRequired,locale:a.oneOfType([a.object,a.oneOf(Object.values(Ia))]),theme:a.oneOf(Object.values(Ha)),mode:a.oneOf(Object.values(Ba)),defaultPlayMode:Ga,playMode:Ga,drag:a.bool,seeked:a.bool,autoPlay:a.bool,clearPriorAudioLists:a.bool,autoPlayInitLoadPlayList:a.bool,playModeText:a.object,panelTitle:a.string,closeText:a.oneOfType([a.string,a.object]),openText:a.oneOfType([a.string,a.object]),clickToPlayText:a.oneOfType([a.string,a.object]),clickToPauseText:a.oneOfType([a.string,a.object]),nextTrackText:a.oneOfType([a.string,a.object]),previousTrackText:a.oneOfType([a.string,a.object]),reloadText:a.oneOfType([a.string,a.object]),volumeText:a.oneOfType([a.string,a.object]),playListsText:a.oneOfType([a.string,a.object]),toggleLyricText:a.oneOfType([a.string,a.object]),toggleMiniModeText:a.oneOfType([a.string,a.object]),destroyText:a.oneOfType([a.string,a.object]),downloadText:a.oneOfType([a.string,a.object]),emptyText:a.oneOfType([a.string,a.object]),controllerTitle:a.oneOfType([a.string,a.object]),defaultPosition:a.shape({top:a.oneOfType([a.number,a.string]),left:a.oneOfType([a.number,a.string]),right:a.oneOfType([a.number,a.string]),bottom:a.oneOfType([a.number,a.string])}),onAudioPlay:a.func,onAudioPause:a.func,onAudioEnded:a.func,onAudioAbort:a.func,onAudioVolumeChange:a.func,onAudioError:a.func,onAudioProgress:a.func,onAudioSeeked:a.func,onAudioDownload:a.func,onAudioReload:a.func,onThemeChange:a.func,onAudioListsChange:a.func,onPlayModeChange:a.func,onModeChange:a.func,onAudioListsPanelChange:a.func,onAudioPlayTrackChange:a.func,onAudioListsSortEnd:a.func,onAudioLyricChange:a.func,showDownload:a.bool,showPlay:a.bool,showReload:a.bool,showPlayMode:a.bool,showThemeSwitch:a.bool,showMiniModeCover:a.bool,toggleMode:a.bool,once:a.bool,extendsContent:a.oneOfType([a.array,a.bool,a.object,a.node,a.element,a.string]),checkedText:a.oneOfType([a.string,a.object]),unCheckedText:a.oneOfType([a.string,a.object]),defaultVolume:a.number,playModeShowTime:a.number,bounds:a.oneOfType([a.string,a.object]),showMiniProcessBar:a.bool,loadAudioErrorPlayNext:a.bool,preload:a.oneOfType([a.bool,a.oneOf(["auto","metadata","none"])]),glassBg:a.bool,remember:a.bool,remove:a.bool,defaultPlayIndex:a.number,playIndex:a.number,lyricClassName:a.string,emptyLyricText:a.oneOfType([a.string,a.object]),showLyric:a.bool,getContainer:a.func,getAudioInstance:a.func,onBeforeAudioDownload:a.func,autoHiddenCover:a.bool,spaceBar:a.bool,showDestroy:a.bool,onBeforeDestroy:a.func,onDestroyed:a.func,customDownloader:a.func,audioTitle:a.oneOfType([a.string,a.func]),responsive:a.bool,quietUpdate:a.bool,renderAudioTitle:a.func,mobileMediaQuery:a.string,volumeFade:a.shape({fadeIn:a.number,fadeOut:a.number}),sortableOptions:a.object},Ka={min:0,step:1},$a={min:0,max:1,step:.01},qa="in",Ya="out",Xa="none",Qa={playModeText:{order:"Play in order",orderLoop:"List loop",singleLoop:"Single loop",shufflePlay:"Shuffle playback"},openText:"Open",closeText:"Close",emptyText:"No music",clickToPlayText:"Click to play",clickToPauseText:"Click to pause",nextTrackText:"Next track",previousTrackText:"Previous track",reloadText:"Reload",volumeText:"Volume",playListsText:"Playlists",toggleLyricText:"Toggle lyric",toggleMiniModeText:"Minimize",destroyText:"Destroy",downloadText:"Download",lightThemeText:"L",darkThemeText:"D",switchThemeText:"Dark/Light mode",removeAudioListsText:"Delete audio lists",clickToDeleteText:function(e){return"Click to delete ".concat(e)},controllerTitle:i.createElement(Gi,null),emptyLyricText:"No lyric",loadingText:"Loading"},Za={playModeText:{order:"",orderLoop:"",singleLoop:"",shufflePlay:""},openText:"",closeText:"",emptyText:"",clickToPlayText:"",clickToPauseText:"",nextTrackText:"",previousTrackText:"",reloadText:"",volumeText:"",playListsText:"",toggleLyricText:"/ ",toggleMiniModeText:"",destroyText:"",downloadText:"",lightThemeText:"",darkThemeText:"",switchThemeText:"/ ",removeAudioListsText:"",clickToDeleteText:function(e){return" ".concat(e)},controllerTitle:i.createElement(Gi,null),emptyLyricText:"",loadingText:""};function Ja(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var es=(Ja(Ca={},Ia.en_US,Qa),Ja(Ca,Ia.zh_CN,Za),Ca);function ts(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ns(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var rs=/\[(\d{2,}):(\d{2})(?:\.(\d{2,3}))?]/g,os={title:"ti",artist:"ar",album:"al",offset:"offset",by:"by"},is=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};ts(this,e),this.lrc=t,this.tags={},this.lines=[],this.handler=n,this.state=0,this.curLine=0,this._init()}var t,n,r;return t=e,(n=[{key:"_init",value:function(){this._initTag(),this._initLines()}},{key:"_initTag",value:function(){for(var e in os){var t=this.lrc.match(new RegExp("\\[".concat(os[e],":([^\\]]*)]"),"i"));this.tags[e]=t&&t[1]||""}}},{key:"_initLines",value:function(){for(var e=this.lrc.split("\n"),t=parseInt(this.tags.offset,10)||0,n=0;n<e.length;n++){var r=e[n],o=rs.exec(r);if(o){var i=r.replace(rs,"").trim();i&&this.lines.push({time:60*o[1]*1e3+1e3*o[2]+10*(o[3]||0)+t,txt:i})}}this.lines.sort((function(e,t){return e.time-t.time}))}},{key:"_findCurNum",value:function(e){for(var t=0;t<this.lines.length;t++)if(e<=this.lines[t].time)return t;return this.lines.length-1}},{key:"_callHandler",value:function(e){e<0||this.handler({txt:this.lines[e].txt,lineNum:e})}},{key:"_playRest",value:function(){var e=this,t=this.lines[this.curNum].time-(+new Date-this.startStamp);this.timer=setTimeout((function(){e._callHandler(e.curNum++),e.curNum<e.lines.length&&1===e.state&&e._playRest()}),t)}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;this.lines.length&&(this.state=1,this.curNum=this._findCurNum(e),this.startStamp=+new Date-e,t||this._callHandler(this.curNum-1),this.curNum<this.lines.length&&(clearTimeout(this.timer),this._playRest()))}},{key:"togglePlay",value:function(){var e=+new Date;1===this.state?(this.stop(),this.pauseStamp=e):(this.state=1,this.play((this.pauseStamp||e)-(this.startStamp||e),!0),this.pauseStamp=0)}},{key:"stop",value:function(){this.state=0,clearTimeout(this.timer)}},{key:"seek",value:function(e){this.play(e)}}])&&ns(t.prototype,n),r&&ns(t,r),e}();function as(e){var t=0,n=0,r=parseInt(e);r>=60&&(t=parseInt(r/60),r=parseInt(r%60),t>=60&&(n=parseInt(t/60),t=parseInt(t%60)));var o=function(e){return e>>0<10?"0".concat(e):e};return n>0?[o(n),o(t),o(r)].join(":"):[o(t),o(r)].join(":")}function ss(e,t){return parseInt(Math.random()*(t-e+1)+e,10)}var ls=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},us=function(){return"".concat(ls()+ls(),"-").concat(ls(),"-").concat(ls(),"-").concat(ls(),"-").concat(ls()).concat(ls()).concat(ls())},cs=function(){return/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)};function ds(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function fs(e){return.5-Math.cos(e*Math.PI)/2}function ps(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.duration,i=void 0===o?1e3:o,a=r.easing,s=void 0===a?fs:a,l=r.interval,u=void 0===l?13:l,c=arguments.length>4?arguments[4]:void 0,d=n-t;if(!d||!i||!s||!u||ds())return e.volume=n,c(),{fadeInterval:void 0,updateIntervalEndVolume:void 0};var f=Math.floor(i/u),p=1,h=function(e){n=e},m=setInterval((function(){var r=n-t;r!==d&&(d=r),e.volume=t+s(p/f)*d,++p>=f&&(e.volume=n,clearInterval(m),c())}),u);return{fadeInterval:m,updateIntervalEndVolume:h}}function hs(){return(hs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ms(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function gs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gs(Object(n),!0).forEach((function(t){ks(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ys(e){return function(e){if(Array.isArray(e))return bs(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return bs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bs(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _s(e){return(_s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ws(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Es(e,t){return(Es=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ss(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=As(e);if(t){var o=As(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xs(this,n)}}function xs(e,t){return!t||"object"!==_s(t)&&"function"!=typeof t?Os(e):t}function Os(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function As(e){return(As=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ks(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ri.mount(new function(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(e){var t=e.dragEl;_i=t},dragOverValid:function(e){var t=e.completed,n=e.target,r=e.onMove,o=e.activeSortable,i=e.changed,a=e.cancel;if(o.options.swap){var s=this.sortable.el,l=this.options;if(n&&n!==s){var u=_i;!1!==r(n)?(zr(n,l.swapClass,!0),_i=n):_i=null,u&&u!==_i&&zr(u,l.swapClass,!1)}i(),t(!0),a()}},drop:function(e){var t=e.activeSortable,n=e.putSortable,r=e.dragEl,o=n||this.sortable,i=this.options;_i&&zr(_i,i.swapClass,!1),_i&&(i.swap||n&&n.options.swap)&&r!==_i&&(o.captureAnimationState(),o!==t&&t.captureAnimationState(),function(e,t){var n,r,o=e.parentNode,i=t.parentNode;if(!o||!i||o.isEqualNode(t)||i.isEqualNode(e))return;n=Qr(e),r=Qr(t),o.isEqualNode(i)&&n<r&&r++;o.insertBefore(t,o.children[n]),i.insertBefore(e,i.children[r])}(r,_i),o.animateAll(),o!==t&&t.animateAll())},nulling:function(){_i=null}},Or(e,{pluginName:"swap",eventProperties:function(){return{swapItem:_i}}})});var Ps=q(),Ts={pause:i.createElement(Aa,null),play:i.createElement(Oa,null),destroy:i.createElement(oa,null),close:i.createElement(oa,null),delete:i.createElement(ya,{size:24}),download:i.createElement(xa,{size:26}),toggle:i.createElement(Ki,null),lyric:i.createElement(zi,null),volume:i.createElement(na,{size:26}),mute:i.createElement(ea,{size:26}),next:i.createElement(ga,null),prev:i.createElement(fa,null),playLists:i.createElement(_a,null),reload:i.createElement(Xi,{size:22}),loop:i.createElement(ca,{size:26}),order:i.createElement(ha,{size:26}),orderLoop:i.createElement(la,{size:26}),shuffle:i.createElement(Ea,{size:26}),loading:i.createElement(qi,null),packUpPanelMobile:i.createElement(Zi,{size:26}),empty:i.createElement(aa,null)},Ls=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Es(e,t)}(l,t.exports.PureComponent);var r,o,a,s=Ss(l);function l(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),ks(Os(n=s.call(this,e)),"isDrag",!1),ks(Os(n),"initPlayId",""),ks(Os(n),"state",{audioLists:[],playId:n.initPlayId,name:"",cover:"",singer:"",musicSrc:"",lyric:"",currentLyric:"",isMobile:Ps,toggle:n.props.mode===Ba.FULL,playing:!1,currentTime:0,soundValue:1,moveX:0,moveY:0,loading:!1,audioListsPanelVisible:!1,playModelNameVisible:!1,theme:n.props.theme||n.darkThemeName,playMode:n.props.playMode||n.props.defaultPlayMode||"",currentAudioVolume:0,initAnimate:!1,isInitAutoPlay:n.props.autoPlay,isInitRemember:!1,loadedProgress:0,removeId:-1,isNeedMobileHack:Ps,audioLyricVisible:!1,isAutoPlayWhenUserClicked:!1,playIndex:n.props.playIndex||n.props.defaultPlayIndex||0,canPlay:!1,currentVolumeFade:Xa,currentVolumeFadeInterval:void 0,updateIntervalEndVolume:void 0,isAudioSeeking:!1,isResetCoverRotate:!1}),ks(Os(n),"getPlayIndex",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.state.playIndex,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.state.audioLists;return Math.max(0,Math.min(t.length-1,e))})),ks(Os(n),"onCoverClick",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba.FULL,t=n.props.showMiniModeCover,r=n.state.cover;(t||e!==Ba.MINI)&&n.props.onCoverClick&&r&&n.props.onCoverClick(e,n.state.audioLists,n.getBaseAudioInfo())})),ks(Os(n),"getAudioTitle",(function(){var e=(n.locale||{}).audioTitle,t=n.state,r=t.name,o=t.singer;return"function"==typeof e&&n.audio?e(n.getBaseAudioInfo()):e||"".concat(r).concat(o?" - ".concat(o):"")})),ks(Os(n),"renderAudioTitle",(function(){var e=n.state,t=e.isMobile,r=e.name;return n.props.renderAudioTitle?n.props.renderAudioTitle(n.getBaseAudioInfo(),t):t?r:n.getAudioTitle()})),ks(Os(n),"toggleAudioLyric",(function(){n.setState({audioLyricVisible:!n.state.audioLyricVisible})})),ks(Os(n),"togglePlayMode",(function(){var e=n._PLAY_MODE_.findIndex((function(e){return e===n.state.playMode})),t=e===n._PLAY_MODE_LENGTH_-1?n._PLAY_MODE_[0]:n._PLAY_MODE_[++e];n.setState({playMode:t,playModelNameVisible:!0,playModeTipVisible:!0}),n.props.onPlayModeChange&&n.props.onPlayModeChange(t),clearTimeout(n.playModelTimer),n.playModelTimer=setTimeout((function(){n.setState({playModelNameVisible:!1,playModeTipVisible:!1})}),n.props.playModeShowTime)})),ks(Os(n),"renderPlayModeIcon",(function(e){var r={className:"react-jinke-music-player-mode-icon"},o=null;switch(e){case za.order:o=t.exports.cloneElement(n.iconMap.order,r);break;case za.orderLoop:o=t.exports.cloneElement(n.iconMap.orderLoop,r);break;case za.singleLoop:o=t.exports.cloneElement(n.iconMap.loop,r);break;case za.shufflePlay:o=t.exports.cloneElement(n.iconMap.shuffle,r);break;default:o=t.exports.cloneElement(n.iconMap.order,r)}return o})),ks(Os(n),"audioListsPlay",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.state,o=r.playId,i=r.playing,a=r.audioLists,s=r.loading,l=r.canPlay;if(Array.isArray(a)&&0===a.length)return console.warn("Warning: Your playlist has no songs. and cannot play !");if(!s||e!==o){var u=a.findIndex((function(t){return t[Oi]===e})),c=a[u]||{},d=c.name,f=c.cover,p=c.musicSrc,h=c.singer,m=c.lyric,g=void 0===m?"":m,v=function(t){n.setState({name:d,cover:f,musicSrc:t,singer:h,playId:e,lyric:g,currentTime:0,playing:!1,loading:!0,canPlay:!1,loadedProgress:0,playIndex:u,isAutoPlayWhenUserClicked:!0},(function(){n.lyric&&n.lyric.stop(),n.audio.load(),n.updateMediaSessionMetadata(),setTimeout((function(){n.initLyricParser()}),0)}))};if(e===o&&!t)return n.setState({playing:!i}),i?n.audio.pause():l?void n.play():v(p);switch(n.props.onAudioPlayTrackChange&&n.props.onAudioPlayTrackChange(e,a,n.getBaseAudioInfo()),n.props.onPlayIndexChange&&n.props.onPlayIndexChange(u),_s(p)){case"function":p().then(v,n.onAudioError);break;default:v(p)}}})),ks(Os(n),"resetAudioStatus",(function(){n.audio.pause(),n.lyric&&n.lyric.stop(),n.initPlayInfo([]),n.resetAudioPlayStatus(),n.resetAudioPlayId()})),ks(Os(n),"resetAudioPlayId",(function(){n.setState({playId:n.initPlayId})})),ks(Os(n),"clearAudioLists",(function(){n.props.onAudioListsChange&&n.props.onAudioListsChange("",[],{}),n.resetAudioStatus()})),ks(Os(n),"onDeleteAudioLists",(function(e){return function(t){t.stopPropagation();var r=n.state,o=r.audioLists,i=r.playId;if(!(o.length<1))if(n.lyric&&n.lyric.stop(),e){var a=ys(o).filter((function(t){return t[Oi]!==e}));n.setState({removeId:e}),setTimeout((function(){n.setState({audioLists:a,removeId:-1},(function(){if(!a.length)return n.resetAudioStatus();e===i&&n.handlePlay(za.orderLoop)}))}),350),n.props.onAudioListsChange&&n.props.onAudioListsChange(i,a,n.getBaseAudioInfo())}else n.clearAudioLists()}})),ks(Os(n),"openAudioListsPanel",(function(){n.setState((function(e){return{initAnimate:!0,audioListsPanelVisible:!e.audioListsPanelVisible}})),n.props.onAudioListsPanelChange&&n.props.onAudioListsPanelChange(!n.state.audioListsPanelVisible)})),ks(Os(n),"closeAudioListsPanel",(function(e){e.stopPropagation(),n._closeAudioListsPanel()})),ks(Os(n),"_closeAudioListsPanel",(function(){var e=n.state.audioListsPanelVisible;n.setState({audioListsPanelVisible:!1}),e&&n.props.onAudioListsPanelChange&&n.props.onAudioListsPanelChange(!1)})),ks(Os(n),"themeChange",(function(e){var t=e?Ha.LIGHT:Ha.DARK;n.setState({theme:t}),n.props.onThemeChange&&n.props.onThemeChange(t)})),ks(Os(n),"onAudioDownload",(function(){var e=n.state.musicSrc;if(n.state.musicSrc){var t=n.props.customDownloader,r=n.getBaseAudioInfo(),o=n.props.onBeforeAudioDownload(r),i={};o&&o.then?o.then((function(e){var n=e.src,r=e.filename,o=e.mimeType;i=e,t?t(e):H(n,r,o)})):t?t({src:e}):H(e),n.props.onAudioDownload&&n.props.onAudioDownload(r,i)}})),ks(Os(n),"onControllerDrag",(function(e,t){var r=t.x,o=t.y,i=n.state,a=i.moveX,s=i.moveY;n.isDrag=!0,a===r&&s===o&&(n.isDrag=!1)})),ks(Os(n),"onControllerDragStart",(function(e,t){var r=t.x,o=t.y;n.isDrag=!1,n.setState({moveX:r,moveY:o})})),ks(Os(n),"onControllerDragStop",(function(e,t){var r=t.x,o=t.y;n.props.showDestroy&&n.destroyBtn&&n.destroyBtn.current&&n.destroyBtn.current.contains(e.target)?n.onDestroyPlayer():(n.isDrag||(n.state.isNeedMobileHack&&(n.loadAndPlayAudio(),n.setState({isNeedMobileHack:!1})),n.onOpenPanel()),n.setState({moveX:r,moveY:o}))})),ks(Os(n),"onResetVolume",(function(){var e=n.state.currentAudioVolume;n.setAudioVolume(n.getVolumeBarValue(e||.1))})),ks(Os(n),"setAudioVolume",(function(e){n.audio.volume=n.getListeningVolume(e),n.setState({currentAudioVolume:e,soundValue:e}),n.state.currentVolumeFade===qa&&n.state.updateIntervalEndVolume&&n.state.updateIntervalEndVolume(e)})),ks(Os(n),"stopAll",(function(e){e.stopPropagation(),e.preventDefault()})),ks(Os(n),"getBoundingClientRect",(function(e){var t=e.getBoundingClientRect();return{left:t.left,top:t.top}})),ks(Os(n),"getListeningVolume",(function(e){return Math.pow(e,2)})),ks(Os(n),"getVolumeBarValue",(function(e){return Math.sqrt(e)})),ks(Os(n),"onAudioReload",(function(){n.props.audioLists.length&&(n.handlePlay(za.singleLoop),n.props.onAudioReload&&n.props.onAudioReload(n.getBaseAudioInfo()))})),ks(Os(n),"onOpenPanel",(function(){var e=n.props,t=e.toggleMode,r=e.spaceBar;t&&(n.setState({toggle:!0}),n.props.onModeChange&&n.props.onModeChange(Ba.FULL),r&&n.player.current&&n.player.current.focus({preventScroll:!0})),n.onCoverClick(Ba.MINI)})),ks(Os(n),"onHidePanel",(function(){n.setState({toggle:!1,audioListsPanelVisible:!1}),n.props.onModeChange&&n.props.onModeChange(Ba.MINI)})),ks(Os(n),"onDestroyPlayer",(function(){if(n.props.onBeforeDestroy){var e=Promise.resolve(n.props.onBeforeDestroy(n.state.playId,n.state.audioLists,n.getBaseAudioInfo()));e&&e.then&&e.then((function(){n._onDestroyPlayer()})).catch((function(){}))}else n._onDestroyPlayer()})),ks(Os(n),"_onDestroyPlayer",(function(){n.unInstallPlayer()})),ks(Os(n),"_onDestroyed",(function(){n.setState({isPlayDestroyed:!0}),n.props.onDestroyed&&n.props.onDestroyed(n.state.playId,n.state.audioLists,n.getBaseAudioInfo())})),ks(Os(n),"getCurrentPlayIndex",(function(){return n.state.audioLists.findIndex((function(e){return e[Oi]===n.state.playId}))})),ks(Os(n),"resetAudioPlayStatus",(function(){return new Promise((function(e){n.setState({currentTime:0,loading:!1,playing:!1,canPlay:!1,lyric:"",currentLyric:"",loadedProgress:0,playIndex:0},e)}))})),ks(Os(n),"onTogglePlay",(function(){if(n.setState({isAudioSeeking:!1}),n.state.audioLists.length>=1){var e=n.props.volumeFade||{},t=e.fadeIn,r=e.fadeOut,o=n.state,i=o.currentVolumeFade,a=o.currentVolumeFadeInterval,s=i===qa||i===Ya;if(s&&(clearInterval(a),n.setState({currentVolumeFadeInterval:void 0,updateIntervalEndVolume:void 0})),!s&&n.state.playing||i===qa){n.setState({currentVolumeFade:Ya});var l=ps(n.audio,n.audio.volume,0,{duration:r},(function(){n.audio.pause(),n.setState({currentVolumeFade:Xa,currentVolumeFadeInterval:void 0,playing:!1,updateIntervalEndVolume:void 0}),n.audio.volume=n.getListeningVolume(n.state.soundValue)})),u=l.fadeInterval,c=l.updateIntervalEndVolume;n.setState({currentVolumeFadeInterval:u,updateIntervalEndVolume:c})}else{n.setState({currentVolumeFade:qa});var d=s?n.audio.volume:0,f=n.getListeningVolume(n.state.soundValue),p=ps(n.audio,d,f,{duration:t},(function(){n.setState({currentVolumeFade:Xa,currentVolumeFadeInterval:void 0,updateIntervalEndVolume:void 0}),n.audio.volume=n.getListeningVolume(n.state.soundValue)})),h=p.fadeInterval,m=p.updateIntervalEndVolume;n.setState({currentVolumeFadeInterval:h,updateIntervalEndVolume:m,isAutoPlayWhenUserClicked:!0},(function(){h&&(n.audio.volume=d),n.loadAndPlayAudio()}))}}})),ks(Os(n),"playAudio",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(n.isAudioCanPlay||e)&&(e&&n.setAudioLoaded(),n.loadAndPlayAudio(e))})),ks(Os(n),"setAudioLoaded",(function(){n.setState({loading:!1,playing:!1})})),ks(Os(n),"onAudioPause",(function(){n.setState({playing:!1}),n.props.onAudioPause&&n.props.onAudioPause(n.getBaseAudioInfo()),n.state.lyric&&n.lyric&&n.lyric.togglePlay()})),ks(Os(n),"onAudioPlay",(function(){n.state.isAudioSeeking||(n.setState({playing:!0,loading:!1}),n.props.onAudioPlay&&n.props.onAudioPlay(n.getBaseAudioInfo()),n.state.lyric&&n.lyric&&n.lyric.togglePlay())})),ks(Os(n),"onSetAudioLoadedProgress",(function(){var e=n.audio,t=e.buffered,r=e.duration;if(t.length&&t.end){var o=t.end(t.length-1)/r*100;n.setState({loadedProgress:o})}})),ks(Os(n),"loadAndPlayAudio",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=n.props.remember,r=n.state,o=r.isInitRemember,i=r.musicSrc,a=n.audio,s=a.networkState,l=a.readyState;if(i){if(s===Fa||s===Ua)return n.onAudioError({reason:"\n          [loadAndPlayAudio]: Failed to load because no supported source was found.\n          current network status is ".concat(s,".\n        ")});if(n.setState({playing:!1,loading:!0,isAudioSeeking:!1,isResetCoverRotate:!1}),e||l>=Va){var u=n.getLastPlayStatus(),c=u.playing,d=t&&!o&&!c,f=t?!d:n.isAudioCanPlay;n.setState({playing:f,loading:!1},(function(){f&&n.play(),n.setState({isInitAutoPlay:!0,isInitRemember:!0,isAutoPlayWhenUserClicked:!1})}))}else n.audio.load()}})),ks(Os(n),"onAudioError",(function(e){var t=n.state,r=t.playMode,o=t.audioLists,i=t.playId,a=t.musicSrc,s=n.props.loadAudioErrorPlayNext,l=r===za.singleLoop?za.order:r;if(n.lyric&&n.lyric.stop(),a){if(s&&o.length)(r===za.order||r===za.orderLoop)&&i===o[o.length-1][Oi]||n.handlePlay(l,!0);n.props.onAudioError&&n.props.onAudioError(n.audio.error||e&&e.reason||null,i,o,n.getBaseAudioInfo())}})),ks(Os(n),"handlePlay",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n.state,o=r.playId,i=r.audioLists,a=i.length;if(a){var s=n.getCurrentPlayIndex();switch(e){case za.order:if(s===a-1)return void n.audio.pause();n.audioListsPlay(t?i[s+1][Oi]:i[s-1][Oi]);break;case za.orderLoop:if(t){if(s===a-1)return n.audioListsPlay(i[0][Oi]);n.audioListsPlay(i[s+1][Oi])}else{if(0===s)return n.audioListsPlay(i[a-1][Oi]);n.audioListsPlay(i[s-1][Oi])}break;case za.singleLoop:n.audio.currentTime=0,n.audioListsPlay(o,!0);break;case za.shufflePlay:var l=ss(0,a-1);l===n.getCurrentPlayIndex()&&(l=n.getPlayIndex(l+1));var u=(i[l]||{})[Oi];n.audioListsPlay(u,!0)}}})),ks(Os(n),"onAudioEnd",(function(){n.props.onAudioEnded&&n.props.onAudioEnded(n.state.playId,n.state.audioLists,n.getBaseAudioInfo()),n.handlePlay(n.state.playMode)})),ks(Os(n),"audioPrevAndNextBasePlayHandle",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=n.state.playMode,r="";switch(t){case za.shufflePlay:r=t;break;default:r=za.orderLoop}n.handlePlay(r,e)})),ks(Os(n),"onPlayPrevAudio",(function(){n.props.restartCurrentOnPrev&&n.audio.currentTime>1?n.audio.currentTime=0:n.audioPrevAndNextBasePlayHandle(!1)})),ks(Os(n),"onPlayNextAudio",(function(){n.audioPrevAndNextBasePlayHandle(!0)})),ks(Os(n),"audioTimeUpdate",(function(){var e=n.audio.currentTime;n.setState({currentTime:e}),n.props.remember&&n.saveLastPlayStatus(),n.props.onAudioProgress&&n.props.onAudioProgress(n.getBaseAudioInfo())})),ks(Os(n),"onAudioSoundChange",(function(e){n.setAudioVolume(e)})),ks(Os(n),"onAudioVolumeChange",(function(){var e=n.audio.volume,t=n.state,r=t.currentVolumeFade,o=t.currentAudioVolume;if(r===Xa&&o!==e){var i=n.getVolumeBarValue(e);if(n.setState({soundValue:i}),n.props.onAudioVolumeChange){var a=parseFloat(e.toFixed(4));n.props.onAudioVolumeChange(a)}}})),ks(Os(n),"onProgressChange",(function(e){n.audio&&(n.audio.currentTime=e),n.setState({currentTime:e,isAudioSeeking:!0})})),ks(Os(n),"onAudioSeeked",(function(e){n.setState({isAudioSeeking:!0}),n.state.audioLists.length&&(n.lyric&&n.lyric.seek(1e3*e),n.state.playing||n.lyric&&n.lyric.stop(),n.audio&&(n.audio.currentTime=e),n.props.onAudioSeeked&&n.props.onAudioSeeked(n.getBaseAudioInfo()),setTimeout((function(){n.setState({isAudioSeeking:!1})}),500))})),ks(Os(n),"onAudioMute",(function(){n.setState({soundValue:0,currentAudioVolume:n.audio.volume},(function(){n.audio.volume=0}))})),ks(Os(n),"onAudioAbort",(function(e){var t=n.state,r=t.audioLists,o=t.playId,i=n.getBaseAudioInfo(),a=vs(vs({},e),i);n.props.onAudioAbort&&n.props.onAudioAbort(o,r,a)})),ks(Os(n),"toggleMode",(function(e){e===Ba.FULL&&n.setState({toggle:!0})})),ks(Os(n),"toggleTheme",(function(e){n.setState({theme:e})})),ks(Os(n),"onAudioListsSortEnd",(function(e){var t=e.oldIndex,r=e.newIndex;if(t!==r){var o=n.state,i=o.playId,a=ys(o.audioLists),s=a.splice(t,1)[0];a.splice(r,0,s);var l=t===i?r:i;n.setState({audioLists:a,playId:l}),n.props.onAudioListsSortEnd&&n.props.onAudioListsSortEnd(t,r),n.props.onAudioListsChange&&n.props.onAudioListsChange(l,a,n.getBaseAudioInfo()),n.props.onAudioListsDragEnd&&(console.warn("[Deprecated] onAudioListsDragEnd is deprecated. please use onAudioListsSortEnd(oldIndex, newIndex){}"),n.props.onAudioListsDragEnd(t,r))}})),ks(Os(n),"saveLastPlayStatus",(function(){var e=n.state,t=e.currentTime,r=e.playId,o=e.theme,i=e.soundValue,a=e.playMode,s=e.name,l=e.cover,u=e.singer,c=e.musicSrc,d=JSON.stringify({currentTime:t,playId:r,theme:o,playMode:a,soundValue:i,name:s,cover:l,singer:u,musicSrc:c});localStorage.setItem("lastPlayStatus",d)})),ks(Os(n),"getLastPlayStatus",(function(){var e=n.props,t=e.theme,r=e.defaultPlayMode,o=e.playMode,i=e.defaultPlayIndex,a=e.playIndex,s={currentTime:0,playMode:o||r||za.order,name:"",cover:"",singer:"",musicSrc:"",lyric:"",playId:n.getDefaultPlayId(),theme:t,playing:!0,playIndex:a||i||0};try{return JSON.parse(localStorage.getItem("lastPlayStatus"))||s}catch(l){return s}})),ks(Os(n),"checkCurrentPlayingAudioIsInUpdatedAudioLists",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props,t=n.state,r=t.playId,o=t.musicSrc;return!(!e.quietUpdate||!Array.isArray(e.audioLists))&&(r&&e.audioLists.some((function(e){return e[Oi]===r||e.musicSrc===o})))})),ks(Os(n),"play",(function(){var e=n.audio.play();e&&e.then&&e.then((function(){n.setState({loading:!1,playing:!0})})).catch((function(){n.setState({loading:!1,playing:!1})}))})),ks(Os(n),"mockAutoPlayForMobile",(function(){n.props.autoPlay&&!n.state.playing&&(n.audio.load(),n.play())})),ks(Os(n),"bindMobileAutoPlayEvents",(function(){document.addEventListener("touchstart",(function(){n.mockAutoPlayForMobile()}),{once:!0}),document.addEventListener("WeixinJSBridgeReady",(function(){n.mockAutoPlayForMobile()}))})),ks(Os(n),"bindSafariAutoPlayEvents",(function(){document.addEventListener("click",(function(){n.mockAutoPlayForMobile()}),{once:!0})})),ks(Os(n),"unBindEvents",(function(){var e;(e=n).bindEvents.apply(e,arguments)})),ks(Os(n),"bindEvents",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.audio,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{waiting:n.loadAndPlayAudio,canplay:n.onAudioCanPlay,error:n.onAudioError,ended:n.onAudioEnd,pause:n.onAudioPause,play:n.onAudioPlay,timeupdate:n.audioTimeUpdate,volumechange:n.onAudioVolumeChange,abort:n.onAudioAbort,progress:n.onSetAudioLoadedProgress},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=n.props.once;for(var i in t){var a=t[i];e&&(r?e.addEventListener(i,a,{once:!(!o||"play"!==i)}):e.removeEventListener(i,a))}})),ks(Os(n),"getPlayId",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.state.audioLists,t=n.getPlayIndex(void 0,e),r=n.state.playId||e[t]&&e[t][Oi];return r})),ks(Os(n),"_getPlayInfo",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=n.getPlayId(e),r=e.find((function(e){return e[Oi]===t}))||{},o=r.name,i=void 0===o?"":o,a=r.cover,s=void 0===a?"":a,l=r.singer,u=void 0===l?"":l,c=r.musicSrc,d=void 0===c?"":c,f=r.lyric,p=void 0===f?"":f;return{name:i,cover:s,singer:u,musicSrc:d,lyric:p,audioLists:e,playId:t}})),ks(Os(n),"getPlayInfo",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.filter((function(e){return!e[Oi]})),r=e.filter((function(e){return e[Oi]})),o=[].concat(ys(r),ys(t.map((function(e){return vs(vs({},e),{},ks({},Oi,us()))}))));return n._getPlayInfo(o)})),ks(Os(n),"getPlayInfoOfNewList",(function(e){var t=e.audioLists,r=(void 0===t?[]:t).map((function(t){var r=e.quietUpdate&&n.state.audioLists.find((function(e){return e.musicSrc===t.musicSrc}))||{};return vs(vs({},t),{},ks({},Oi,r[Oi]||us()))}));return n._getPlayInfo(r)})),ks(Os(n),"initPlayInfo",(function(e,t){var r=n.getPlayInfo(e);switch(_s(r.musicSrc)){case"function":r.musicSrc().then((function(e){n.setState(vs(vs({},r),{},{musicSrc:e}),t)}),n.onAudioError);break;default:n.setState(r,t)}})),ks(Os(n),"addMatchMediaListener",(function(e,t){var n=window.matchMedia(e);return t(n),"addEventListener"in n?n.addEventListener("change",t):n.addListener(t),n})),ks(Os(n),"removeMatchMediaListener",(function(e,t){e&&("removeEventListener"in e?e.removeEventListener("change",t):e.removeListener&&e.removeListener(t))})),ks(Os(n),"addMobileListener",(function(){n.mobileMedia=n.addMatchMediaListener(n.props.mobileMediaQuery,n.mobileMediaHandler)})),ks(Os(n),"removeMobileListener",(function(){n.removeMatchMediaListener(n.mobileMedia,n.mobileMediaHandler)})),ks(Os(n),"addSystemThemeListener",(function(){n.systemThemeMedia=n.addMatchMediaListener(Na,n.systemThemeMediaHandler)})),ks(Os(n),"removeSystemThemeListener",(function(){n.removeMatchMediaListener(n.systemThemeMedia,n.systemThemeMediaHandler)})),ks(Os(n),"mobileMediaHandler",(function(e){var t=e.matches;n.setState({isMobile:!!t})})),ks(Os(n),"systemThemeMediaHandler",(function(e){var t=e.matches;if(n.props.theme===Ha.AUTO){var r=t?Ha.DARK:Ha.LIGHT;n.updateTheme(r)}})),ks(Os(n),"setDefaultAudioVolume",(function(){var e=n.props,t=e.defaultVolume,r=e.remember;n.defaultVolume=Math.max(0,Math.min(t,1));var o=n.getLastPlayStatus().soundValue,i=void 0===o?n.defaultVolume:o;n.setAudioVolume(r?i:n.defaultVolume)})),ks(Os(n),"getDefaultPlayId",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props.audioLists,t=n.getPlayIndex();return e[t]&&e[t][Oi]})),ks(Os(n),"initLyricParser",(function(){n.lyric=new is(n.state.lyric,n.onLyricChange),n.setState({currentLyric:n.lyric.lines[0]&&n.lyric.lines[0].text})})),ks(Os(n),"onLyricChange",(function(e){var t=e.lineNum,r=e.txt;n.setState({currentLyric:r}),n.props.onAudioLyricChange&&n.props.onAudioLyricChange(t,r)})),ks(Os(n),"updateTheme",(function(e){e&&e!==n.props.theme&&Object.values(Ha).includes(e)&&n.setState({theme:e})})),ks(Os(n),"updateMode",(function(e){e&&e!==n.props.mode&&Object.values(Ba).includes(e)&&(n.setState({toggle:e===Ba.FULL}),e===Ba.MINI&&n._closeAudioListsPanel())})),ks(Os(n),"updatePlayMode",(function(e){Object.values(za).includes(e)&&e!==n.props.playMode&&n.setState({playMode:e})})),ks(Os(n),"updateAudioLists",(function(e){var t=[].concat(ys(n.state.audioLists),ys(e.filter((function(e){return-1===n.state.audioLists.findIndex((function(t){return t.musicSrc===e.musicSrc}))}))));n.initPlayInfo(t),n.bindEvents(n.audio),n.props.onAudioListsChange&&n.props.onAudioListsChange(n.state.playId,e,n.getBaseAudioInfo())})),ks(Os(n),"loadNewAudioLists",(function(e){var t=e.audioLists,r=e.remember,o=e.playMode,i=e.theme,a=e.autoPlayInitLoadPlayList,s=e.playIndex;if(Array.isArray(t)&&t.length){var l=n.getPlayInfoOfNewList(e),u=r?n.getLastPlayStatus():{playMode:o||za.order,playIndex:s||0};i!==Ha.AUTO&&(u.theme=i);var c=vs(vs(vs({},l),u),{},{isInitAutoPlay:a,playing:n.isAudioCanPlay});if(n.checkCurrentPlayingAudioIsInUpdatedAudioLists(e))n.setState({audioLists:l.audioLists});else switch(_s(l.musicSrc)){case"function":l.musicSrc().then((function(e){n.setState(vs(vs({},c),{},{musicSrc:e}))}),n.onAudioError);break;default:n.setState(c)}}})),ks(Os(n),"resetPlayId",(function(){return new Promise((function(e){n.setState({playId:n.initPlayId},e)}))})),ks(Os(n),"changeAudioLists",(function(e){n.checkCurrentPlayingAudioIsInUpdatedAudioLists(e)||n.resetAudioStatus(),n.resetPlayId().then((function(){n.loadNewAudioLists(e),n.props.onAudioListsChange&&n.props.onAudioListsChange(n.state.playId,e.audioLists,n.getBaseAudioInfo())}))})),ks(Os(n),"updatePlayIndex",(function(e){var t=n.getCurrentPlayIndex();void 0!==e&&t!==e&&n.resetAudioPlayStatus().then((function(){var t=n.state.audioLists[n.getPlayIndex(e)];t&&t[Oi]&&n.audioListsPlay(t[Oi],!0)}))})),ks(Os(n),"playByIndex",(function(e){n.updatePlayIndex(e)})),ks(Os(n),"getEnhanceAudio",(function(){var e=Os(n).audio;return[{name:"destroy",value:n.onDestroyPlayer},{name:"updatePlayIndex",value:n.updatePlayIndex},{name:"playByIndex",value:n.playByIndex},{name:"playNext",value:n.onPlayNextAudio},{name:"playPrev",value:n.onPlayPrevAudio},{name:"togglePlay",value:n.onTogglePlay},{name:"clear",value:n.clearAudioLists},{name:"sortable",value:n.sortable}].forEach((function(t){var n=t.name,r=t.value;Object.defineProperty(e,n,{value:r,writable:!1})})),e})),ks(Os(n),"onGetAudioInstance",(function(){n.props.getAudioInstance&&n.props.getAudioInstance(n.getEnhanceAudio())})),ks(Os(n),"updateMediaSessionMetadata",(function(){if("mediaSession"in navigator&&n.props.showMediaSession){var e=n.state,t=e.name,r=e.cover,o={title:t,artist:e.singer,album:t};r&&(o.artwork=["96x96","128x128","192x192","256x256","384x384","512x512"].map((function(e){return{src:r,sizes:e,type:"image/png"}}))),navigator.mediaSession.metadata=new MediaMetadata(o),n.updateMediaSessionPositionState()}})),ks(Os(n),"updateMediaSessionPositionState",(function(){if("setPositionState"in navigator.mediaSession)try{var e=Os(n).audio;navigator.mediaSession.setPositionState({duration:n.audioDuration,playbackRate:e.playbackRate||1,position:e.currentTime||0})}catch(t){console.error("Update media session position state failed: ",t)}})),ks(Os(n),"onAddMediaSession",(function(){if("mediaSession"in navigator&&n.props.showMediaSession){navigator.mediaSession.setActionHandler("play",n.onTogglePlay),navigator.mediaSession.setActionHandler("pause",n.onTogglePlay),navigator.mediaSession.setActionHandler("seekbackward",(function(e){var t=e.seekOffset||10;n.audio.currentTime=Math.max(n.audio.currentTime-t,0),n.props.onAudioSeeked&&n.props.onAudioSeeked(n.getBaseAudioInfo())})),navigator.mediaSession.setActionHandler("seekforward",(function(e){var t=e.seekOffset||10;n.audio.currentTime=Math.min(n.audio.currentTime+t,n.audioDuration),n.props.onAudioSeeked&&n.props.onAudioSeeked(n.getBaseAudioInfo())})),navigator.mediaSession.setActionHandler("previoustrack",n.onPlayPrevAudio),navigator.mediaSession.setActionHandler("nexttrack",n.onPlayNextAudio),setTimeout((function(){n.updateMediaSessionMetadata()}),0);try{navigator.mediaSession.setActionHandler("seekto",(function(e){e.fastSeek&&"fastSeek"in n.audio?n.audio.fastSeek(e.seekTime):(n.audio.currentTime=e.seekTime,n.updateMediaSessionPositionState())}))}catch(e){console.warn('Warning! The "seekto" media session action is not supported.')}}})),ks(Os(n),"bindUnhandledRejection",(function(){window.addEventListener("unhandledrejection",n.onAudioError)})),ks(Os(n),"unBindUnhandledRejection",(function(){window.removeEventListener("unhandledrejection",n.onAudioError)})),ks(Os(n),"bindKeyDownEvents",(function(){n.props.spaceBar&&n.player.current&&(n.player.current.addEventListener("keydown",n.onKeyDown,!1),n.player.current.focus({preventScroll:!0}))})),ks(Os(n),"unBindKeyDownEvents",(function(){n.player.current&&n.player.current.removeEventListener("keydown",n.onKeyDown,!1)})),ks(Os(n),"onKeyDown",(function(e){n.props.spaceBar&&32===e.keyCode&&n.onTogglePlay()})),ks(Os(n),"initPlayer",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props.audioLists,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];r&&n.setDefaultAudioVolume(),Array.isArray(e)&&e.length&&(n.bindUnhandledRejection(),n.bindEvents(n.audio),n.initLyricParser(),n.onAddMediaSession(),Ps?n.bindMobileAutoPlayEvents():(t&&n.bindKeyDownEvents(),cs()&&n.bindSafariAutoPlayEvents()))})),ks(Os(n),"removeLyric",(function(){n.lyric&&(n.lyric.stop(),n.lyric=void 0)})),ks(Os(n),"unInstallPlayer",(function(){n.unBindEvents(n.audio,void 0,!1),n.unBindUnhandledRejection(),n.unBindKeyDownEvents(),n.removeMobileListener(),n.removeLyric(),n._onDestroyed(),n.sortable&&n.sortable.destroy()})),ks(Os(n),"onAudioCanPlay",(function(){n.state.isAudioSeeking||n.setState({canPlay:!0},(function(){n.playAudio(!0)}))})),ks(Os(n),"initSortableAudioLists",(function(){var e=n.props,t=e.audioLists,r=e.sortableOptions,o=Ai.selector,i=ms(Ai,["selector"]),a=document.querySelector(".".concat(o));Array.isArray(t)&&!t.length||!a||(n.sortable&&n.sortable.destroy(),n.sortable=new ri(a,vs(vs({onEnd:n.onAudioListsSortEnd},i),r)))})),n.audio=null,n.targetId="music-player-controller",n._PLAY_MODE_=Object.values(za),n._PLAY_MODE_LENGTH_=n._PLAY_MODE_.length,n.player=t.exports.createRef(),n.destroyBtn=t.exports.createRef(),n}return r=l,(o=[{key:"locale",get:function(){var e=this.props.locale;return"string"==typeof e?es[this.props.locale]:e?vs(vs({},es[Ia.en_US]),e):{}}},{key:"audioDuration",get:function(){var e=this.state,t=e.audioLists,n=e.playId;if(!t.length||!this.audio)return 0;var r=(t.find((function(e){return e[Oi]===n}))||{}).duration;return Math.max(Number(r)||this.audio.duration||0,0)}},{key:"isAudioCanPlay",get:function(){var e=this.props.autoPlay,t=this.state,n=t.isInitAutoPlay,r=t.isAutoPlayWhenUserClicked;return t.canPlay&&(n||e||r)}},{key:"iconMap",get:function(){var e=this,t=function(){return i.createElement("span",{className:"loading group"},e.props.icon.loading)};return vs(vs(vs({},Ts),this.props.icon),{},{loading:i.createElement(t,null)})}},{key:"render",value:function(){var e=this,t=this.props,r=t.className,o=t.drag,a=t.style,s=t.showDownload,l=t.showPlay,u=t.showReload,c=t.showPlayMode,d=t.showThemeSwitch,f=t.toggleMode,p=t.showMiniModeCover,h=t.extendsContent,m=t.defaultPlayMode,g=t.seeked,v=t.showProgressLoadBar,y=t.bounds,b=t.defaultPosition,_=t.showMiniProcessBar,w=t.preload,E=t.glassBg,S=t.remove,x=t.lyricClassName,O=t.showLyric,A=t.getContainer,k=t.autoHiddenCover,P=t.showDestroy,T=t.responsive,L=this.locale,C=this.state,R=C.toggle,M=C.playing,D=C.currentTime,I=C.soundValue,j=C.moveX,N=C.moveY,B=C.loading,U=C.audioListsPanelVisible,F=C.theme,z=C.name,H=C.cover,G=C.singer,W=C.musicSrc,K=C.playId,$=C.isMobile,q=C.playMode,Y=C.playModeTipVisible,X=C.playModelNameVisible,Q=C.initAnimate,Z=C.loadedProgress,J=C.audioLists,ee=C.removeId,te=C.currentLyric,ne=C.audioLyricVisible,re=C.isPlayDestroyed,oe=C.isResetCoverRotate,ie=!1===w||"none"===w?{}:!0===w?{preload:"auto"}:{preload:w},ae=Q?{show:U,hide:!U}:{show:U},se=za[q||m]||za.order,le=L.playModeText[se],ue=p&&!k||k&&H?{style:{backgroundImage:"url(".concat(H,")")}}:{},ce=as(D),de=as(this.audioDuration),fe=g?{onChange:this.onProgressChange,onAfterChange:this.onAudioSeeked}:{},pe=i.createElement(i.Fragment,null,v&&i.createElement("div",{className:"progress-load-bar",style:{width:"".concat(Math.min(Z,100),"%")}}),i.createElement(Zt,hs({max:Math.ceil(this.audioDuration),defaultValue:0,value:Math.ceil(D)},fe,Ka))),he=s&&i.createElement("span",{className:"group audio-download",onClick:this.onAudioDownload,title:L.downloadText},this.iconMap.download),me=d&&i.createElement("span",{className:"group theme-switch"},i.createElement(bn,{className:"theme-switch-container",onChange:this.themeChange,checkedChildren:L.lightThemeText,unCheckedChildren:L.darkThemeText,checked:F===Ha.LIGHT,title:L.switchThemeText})),ge=u&&i.createElement("span",{className:"group reload-btn",onClick:this.onAudioReload,title:L.reloadText},this.iconMap.reload),ve=O&&i.createElement("span",{className:V("group lyric-btn",{"lyric-btn-active":ne}),onClick:this.toggleAudioLyric,title:L.toggleLyricText},this.iconMap.lyric),ye=c&&i.createElement("span",{className:V("group loop-btn"),onClick:this.togglePlayMode,title:L.playModeText[se]},this.renderPlayModeIcon(se)),be=$?30:40,_e=P&&i.createElement("span",{title:L.destroyText,className:"group destroy-btn",ref:this.destroyBtn,onClick:!o||R?this.onDestroyPlayer:void 0},this.iconMap.destroy),we=i.createElement("div",{className:V("react-jinke-music-player"),style:b,tabIndex:"-1"},i.createElement("div",{className:V("music-player")},_&&i.createElement(Li,{progress:D/this.audioDuration,r:be}),i.createElement("div",hs({id:this.targetId,className:V("scale","music-player-controller",{"music-player-playing":M})},ue,{onClick:o?void 0:this.onOpenPanel}),B?this.iconMap.loading:i.createElement(i.Fragment,null,i.createElement("span",{className:"controller-title"},L.controllerTitle),i.createElement("div",{className:"music-player-controller-setting"},R?L.closeText:L.openText))),_e)),Ee=A()||document.body,Se=this.getAudioTitle();if(re)return null;var xe=!M||this.state.currentVolumeFade===Ya;return n.exports.createPortal(i.createElement("div",{className:V("react-jinke-music-player-main",{"light-theme":F===Ha.LIGHT,"dark-theme":F===Ha.DARK},r),style:a,ref:this.player,tabIndex:"-1"},R&&$&&T&&i.createElement(Ra,{playing:M,loading:B,name:z,singer:G,cover:H,themeSwitch:me,duration:de,currentTime:ce,progressBar:pe,onPlay:this.onTogglePlay,currentPlayModeName:le,playMode:ye,audioNextPlay:this.onPlayNextAudio,audioPrevPlay:this.onPlayPrevAudio,icon:vs(vs({},this.iconMap),{},{reload:ge,download:he,lyric:ve}),playModeTipVisible:Y,openAudioListsPanel:this.openAudioListsPanel,onClose:this.onHidePanel,extendsContent:h,glassBg:E,autoHiddenCover:k,onCoverClick:this.onCoverClick,locale:L,toggleMode:f,renderAudioTitle:this.renderAudioTitle,shouldShowPlayIcon:xe,isResetCoverRotate:oe}),R?void 0:o?i.createElement(_r,{bounds:y,position:{x:j,y:N},onDrag:this.onControllerDrag,onStop:this.onControllerDragStop,onStart:this.onControllerDragStart},we):we,R&&(!$||!T)&&i.createElement("div",{className:V("music-player-panel","translate",{"glass-bg":E})},i.createElement("section",{className:"panel-content"},(!k||k&&H)&&i.createElement("div",{className:V("img-content","img-rotate",{"img-rotate-pause":!M||!H,"img-rotate-reset":oe}),style:{backgroundImage:"url(".concat(H,")")},onClick:function(){return e.onCoverClick()}}),i.createElement("div",{className:"progress-bar-content"},i.createElement("span",{className:"audio-title",title:Se},this.renderAudioTitle()),i.createElement("section",{className:"audio-main"},i.createElement("span",{className:"current-time",title:ce},B?"--":ce),i.createElement("div",{className:"progress-bar"},pe),i.createElement("span",{className:"duration",title:de},B?"--":de))),i.createElement("div",{className:"player-content"},l?i.createElement("span",{className:"group"},i.createElement("span",{className:"group prev-audio",title:L.previousTrackText,onClick:this.onPlayPrevAudio},this.iconMap.prev),B?i.createElement("span",{className:"group loading-icon",title:L.loadingText},this.iconMap.loading):i.createElement("span",{className:"group play-btn",onClick:this.onTogglePlay,title:xe?L.clickToPlayText:L.clickToPauseText},xe?this.iconMap.play:this.iconMap.pause),i.createElement("span",{className:"group next-audio",title:L.nextTrackText,onClick:this.onPlayNextAudio},this.iconMap.next)):B&&this.iconMap.loading,ge,he,me,h||null,i.createElement("span",{className:"group play-sounds",title:L.volumeText},0===I?i.createElement("span",{className:"sounds-icon",onClick:this.onResetVolume},this.iconMap.mute):i.createElement("span",{className:"sounds-icon",onClick:this.onAudioMute},this.iconMap.volume),i.createElement(Zt,hs({value:I,onChange:this.onAudioSoundChange,className:"sound-operation"},$a))),ye,ve,i.createElement("span",{className:"group audio-lists-btn",title:L.playListsText,onClick:this.openAudioListsPanel},i.createElement("span",{className:"audio-lists-icon"},this.iconMap.playLists),i.createElement("span",{className:"audio-lists-num"},J.length)),f&&i.createElement("span",{className:"group hide-panel",title:L.toggleMiniModeText,onClick:this.onHidePanel},this.iconMap.toggle),_e))),i.createElement(Pi,{playing:M,playId:K,loading:B,visible:U,audioLists:J,onPlay:this.audioListsPlay,onCancel:this.closeAudioListsPanel,icon:this.iconMap,isMobile:$,panelToggleAnimate:ae,glassBg:E,cover:H,remove:S,onDelete:this.onDeleteAudioLists,removeId:ee,locale:L}),!$&&i.createElement(Da,{visible:X,value:le}),ne&&i.createElement(_r,null,i.createElement("div",{className:V("music-player-lyric",x)},te||L.emptyLyricText)),i.createElement("audio",hs({className:"music-player-audio",title:Se},ie,{src:W,ref:function(t){e.audio=t}}))),Ee)}},{key:"getBaseAudioInfo",value:function(){var e=this.state,t=e.cover,n=e.name,r=e.musicSrc,o=e.soundValue,i=e.lyric,a=e.audioLists,s=e.currentLyric,l=this.audio||{},u=l.currentTime,c=l.muted,d=l.networkState,f=l.readyState,p=l.played,h=l.paused,m=l.ended,g=l.startDate,v=this.getCurrentPlayIndex();return vs(vs({},a[v]||{}),{},{cover:t,name:n,musicSrc:r,volume:o,currentTime:u,duration:this.audioDuration,muted:c,networkState:d,readyState:f,played:p,paused:h,ended:m,startDate:g,lyric:i,currentLyric:s,playIndex:v})}},{key:"componentDidUpdate",value:function(e,t){t.musicSrc!==this.state.musicSrc&&this.setState({isResetCoverRotate:!0})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t,n=this,r=e.audioLists,o=e.playIndex,i=e.theme,a=e.mode,s=e.playMode,l=e.clearPriorAudioLists,u=(t=r,function(e){return JSON.stringify(t)===JSON.stringify(e)})(this.props.audioLists);u||(l?this.changeAudioLists(e):this.updateAudioLists(r),this.checkCurrentPlayingAudioIsInUpdatedAudioLists(e)||this.initPlayer(r,!1,!1),setTimeout((function(){return n.initSortableAudioLists()}),200)),this.updatePlayIndex(!u&&l?0:o),this.updateTheme(i),this.updateMode(a),this.updatePlayMode(s)}},{key:"UNSAFE_componentWillMount",value:function(){var e=this,t=this.props,n=t.audioLists,r=t.remember;if(Array.isArray(n)&&n.length>=1){var o=this.getPlayInfo(n),i=r?this.getLastPlayStatus():{};switch(_s(o.musicSrc)){case"function":o.musicSrc().then((function(t){e.setState(vs(vs({},o),{},{musicSrc:t},i))}),this.onAudioError);break;default:this.setState(vs(vs({},o),i))}}}},{key:"componentWillUnmount",value:function(){this.unInstallPlayer()}},{key:"componentDidMount",value:function(){this.addMobileListener(),this.addSystemThemeListener(),this.initPlayer(),this.initSortableAudioLists(),this.onGetAudioInstance()}}])&&ws(r.prototype,o),a&&ws(r,a),l}();ks(Ls,"defaultProps",{audioLists:[],theme:Ha.DARK,mode:Ba.MINI,defaultPlayMode:za.order,defaultPosition:{left:0,top:0},once:!1,drag:!0,toggleMode:!0,showMiniModeCover:!0,showDownload:!0,showPlay:!0,showReload:!0,showPlayMode:!0,showThemeSwitch:!0,showLyric:!1,playModeTipVisible:!1,autoPlay:!0,defaultVolume:1,showProgressLoadBar:!0,seeked:!0,playModeShowTime:600,bounds:"body",showMiniProcessBar:!1,loadAudioErrorPlayNext:!0,preload:!1,glassBg:!1,remember:!1,remove:!0,defaultPlayIndex:0,getContainer:function(){return document.body},autoHiddenCover:!1,onBeforeAudioDownload:function(){},spaceBar:!1,showDestroy:!1,showMediaSession:!1,locale:Ia.en_US,responsive:!0,icon:Ts,quietUpdate:!1,mobileMediaQuery:ja,volumeFade:{fadeIn:0,fadeOut:0},restartCurrentOnPrev:!1,sortableOptions:{}}),ks(Ls,"propTypes",Wa);var Cs=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",type:4,exts:[],default:({file:e})=>{const{lastFiles:n,getSetting:r}=t.exports.useContext(C),o=s("light","dark"),{t:a,i18n:p}=l(),[h,m]=i.useState([]),g=D(),v=r("music cover")||"https://store.heytapimage.com/cdo-portal/feedback/202110/30/d43c41c5d257c9bc36366e310374fb19.png",y=a("unknown");return t.exports.useEffect((()=>{const t={name:e.name,musicSrc:g(),cover:v,singer:y};e.thumbnail&&(t.cover=e.thumbnail);const r=n.filter((t=>t.name!==e.name&&4===t.type)).map((e=>{let t=g(e);const n={name:e.name,musicSrc:t,cover:v,singer:y};return e.thumbnail&&(n.cover=e.thumbnail),n}));m([t,...r])}),[]),i.createElement(u,{className:"audio-box",w:"full"},i.createElement(c,{p:"8",w:"full"},i.createElement(d,{display:"inline-flex",alignItems:"center"},i.createElement(f,{color:r("icon color")||"teal.300",as:L(e.type,"")}),a("Enjoy the music"),"...")),i.createElement(Ls,{audioLists:h,theme:o,locale:"zh"===p.language?"zh_CN":"en_US",mode:"full",autoPlay:"true"===r("autoplay audio"),defaultPosition:{left:20,bottom:20}}))}});var Rs=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",type:6,exts:[],default:({file:e})=>{const n=D(),[r,o]=t.exports.useState(""),{getSetting:a,password:s}=t.exports.useContext(C);return t.exports.useEffect((()=>{o(n(e))}),[]),i.createElement(c,{className:"image-box",w:"full"},i.createElement(p,{maxH:"75vh",fallback:i.createElement(h,{color:a("icon color")||"teal.300",size:"xl"}),rounded:"lg",src:r}))}});const Ms=t.exports.lazy((()=>N((()=>Promise.resolve().then((function(){return Is}))),void 0)));var Ds=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",type:2,exts:[],default:({file:e})=>{const{pathname:n}=m(),{password:r}=t.exports.useContext(C);let o=D();const{unfold:a,setShowUnfold:s}=((e=!0)=>{const{setShowUnfold:n,unfold:r}=t.exports.useContext(C);return t.exports.useEffect((()=>(e&&n(!0),()=>{n(!1)})),[]),{unfold:r,setShowUnfold:n}})(!1),[l,c]=i.useState(""),[d,f]=i.useState("");return t.exports.useEffect((()=>{"AliDrive"===e.driver?R.post("preview",{path:n,password:r}).then((e=>{const t=e.data;200===t.code&&aliyun.config({mount:document.querySelector("#office-preview"),url:t.data.preview_url}).setToken({token:t.data.access_token})})):(e.name.endsWith(".pdf")?(f(o()),c("pdf")):c("office"),s(!0))}),[]),i.createElement(u,{w:"full",h:a?"full":"75vh",pos:a?"fixed":"unset",left:a?"0":"unset",top:a?"0":"unset",id:"office-preview",transition:"all 0.3s",backdropFilter:"blur(10px)",className:"office-preview-box"},"office"===l&&i.createElement("iframe",{width:"100%",height:"100%",src:`https://view.officeapps.live.com/op/view.aspx?src=${encodeURIComponent(o())}`,frameBorder:"0"}),"pdf"===l&&i.createElement(Ms,{url:d,unfold:a||!1}))}});var Is=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",type:-1,exts:[],default:({url:e,unfold:t})=>i.createElement(c,{w:"full",h:"full",className:"pdf-preview-box"},i.createElement("iframe",{title:"pdf-viewer",width:"100%",height:"100%",src:`https://xhofe.github.io/alist-web/pdf.js/web/viewer.html?file=${e}`}))}),js={exports:{}},Ns=js.exports=function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return r(e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}('.art-video-player{zoom:1;-webkit-tap-highlight-color:rgba(0,0,0,0);-ms-high-contrast-adjust:none;background-color:#000;color:#eee;direction:ltr;display:flex;font-family:Roboto,Arial,Helvetica,sans-serif;font-size:14px;height:100%;line-height:1.3;margin:0 auto;outline:0;position:relative;text-align:left;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%;z-index:20}.art-video-player *{box-sizing:border-box;margin:0;padding:0}.art-video-player ::-webkit-scrollbar{height:5px;width:5px}.art-video-player ::-webkit-scrollbar-thumb{background-color:#666}.art-video-player ::-webkit-scrollbar-thumb:hover{background-color:#ccc}.art-video-player .art-icon{align-items:center;display:inline-flex;justify-content:center;line-height:1.5}.art-video-player .art-icon svg{fill:#fff}.art-video-player img{max-width:100%;vertical-align:top}@supports ((-webkit-backdrop-filter:initial) or (backdrop-filter:initial)){.art-video-player .art-backdrop-filter{-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px);background-color:rgba(0,0,0,.7)!important}}.art-video-player .art-video{background-color:#000;cursor:pointer;z-index:10}.art-video-player .art-poster,.art-video-player .art-video{bottom:0;height:100%;left:0;position:absolute;right:0;top:0;width:100%}.art-video-player .art-poster{background-position:50%;background-repeat:no-repeat;background-size:cover;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:11}.art-video-player .art-subtitle{bottom:10px;color:#fff;display:none;font-size:20px;padding:0 20px;pointer-events:none;position:absolute;text-align:center;text-shadow:.5px .5px .5px rgba(0,0,0,.5);width:100%;z-index:20}.art-video-player .art-subtitle p{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;line-height:1.2;margin:5px 0 0;word-break:break-all}.art-video-player .art-bilingual p:nth-child(n+2){transform:scale(.6);transform-origin:center top}.art-video-player.art-subtitle-show .art-subtitle{display:block}.art-video-player.art-control-show .art-subtitle{bottom:50px}.art-video-player .art-danmuku{z-index:30}.art-video-player .art-danmuku,.art-video-player .art-layers{bottom:0;height:100%;left:0;overflow:hidden;pointer-events:none;position:absolute;right:0;top:0;width:100%}.art-video-player .art-layers{display:none;z-index:40}.art-video-player .art-layers .art-layer{pointer-events:auto}.art-video-player.art-layer-show .art-layers{display:block}.art-video-player .art-mask{align-items:center;bottom:0;display:none;height:100%;justify-content:center;left:0;overflow:hidden;pointer-events:none;position:absolute;right:0;top:0;width:100%;z-index:50}.art-video-player .art-mask .art-state{align-items:center;bottom:55px;display:flex;height:60px;justify-content:center;opacity:.6;position:absolute;right:30px;width:60px}.art-video-player.art-mask-show .art-mask{display:flex}.art-video-player .art-loading{align-items:center;bottom:0;display:none;height:100%;justify-content:center;left:0;pointer-events:none;position:absolute;right:0;top:0;width:100%;z-index:70}.art-video-player.art-loading-show .art-loading{display:flex}.art-video-player .art-bottom{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==) repeat-x bottom;bottom:0;display:flex;flex-direction:column;height:100px;justify-content:space-between;left:0;opacity:0;padding:55px 10px 0;pointer-events:none;position:absolute;right:0;transition:all .2s ease-in-out;visibility:hidden;z-index:60}.art-video-player .art-bottom .art-progress{pointer-events:auto;position:relative;z-index:0}.art-video-player .art-bottom .art-progress .art-control-progress{align-items:center;cursor:pointer;display:flex;flex-direction:row;height:4px;position:relative}.art-video-player .art-bottom .art-progress .art-control-progress .art-control-progress-inner{align-items:center;background:hsla(0,0%,100%,.2);display:flex;height:50%;position:relative;width:100%}.art-video-player .art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-loaded{background:hsla(0,0%,100%,.4);bottom:0;height:100%;left:0;position:absolute;right:0;top:0;width:0;z-index:10}.art-video-player .art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-played{bottom:0;height:100%;left:0;position:absolute;right:0;top:0;width:0;z-index:20}.art-video-player .art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-highlight{bottom:0;height:100%;left:0;pointer-events:none;position:absolute;right:0;top:0;z-index:30}.art-video-player .art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-highlight span{background:#fff;display:inline-block;height:100%;left:0;pointer-events:auto;position:absolute;top:0;width:7px}.art-video-player .art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator{align-items:center;border-radius:50%;justify-content:center;position:absolute;transform:scale(.1);transition:transform .1s ease-in-out;visibility:hidden;z-index:40}.art-video-player .art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator .art-icon{height:100%;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%}.art-video-player .art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-tip{background:rgba(0,0,0,.7);border-radius:3px;color:#fff;display:none;font-size:12px;font-weight:700;height:20px;left:0;line-height:20px;padding:0 5px;position:absolute;text-align:center;top:-25px;white-space:nowrap;z-index:50}.art-video-player .art-bottom .art-progress .art-control-thumbnails{background-color:rgba(0,0,0,.7);bottom:8px;display:none;left:0;pointer-events:none;position:absolute}.art-video-player .art-bottom .art-progress .art-control-loop{bottom:0;display:none;height:100%;left:0;pointer-events:none;position:absolute;right:0;top:0;width:100%}.art-video-player .art-bottom .art-progress .art-control-loop .art-loop-point{background:hsla(0,0%,100%,.75);height:8px;left:0;position:absolute;top:-2px;width:2px}.art-video-player .art-bottom .art-controls{align-items:center;display:flex;height:40px;justify-content:space-between;pointer-events:auto;position:relative;z-index:1}.art-video-player .art-bottom .art-controls .art-controls-left,.art-video-player .art-bottom .art-controls .art-controls-right{display:flex}.art-video-player .art-bottom .art-controls .art-control{align-items:center;cursor:pointer;display:flex;font-size:12px;line-height:1;min-width:36px;opacity:.9;text-align:center;white-space:nowrap}.art-video-player .art-bottom .art-controls .art-control .art-icon{align-items:center;display:flex;float:left;height:36px;justify-content:center;width:36px}.art-video-player .art-bottom .art-controls .art-control:hover{opacity:1}.art-video-player .art-bottom .art-controls .art-control-onlyText{padding:0 10px}.art-video-player .art-bottom .art-controls .art-control-volume .art-volume-panel{float:left;height:100%;overflow:hidden;position:relative;transition:margin .2s cubic-bezier(.4,0,1,1),width .2s cubic-bezier(.4,0,1,1);width:0}.art-video-player .art-bottom .art-controls .art-control-volume .art-volume-panel .art-volume-slider-handle{background:#fff;border-radius:12px;height:12px;left:0;margin-top:-6px;position:absolute;top:50%;width:12px}.art-video-player .art-bottom .art-controls .art-control-volume .art-volume-panel .art-volume-slider-handle:before{background:#fff;left:-54px}.art-video-player .art-bottom .art-controls .art-control-volume .art-volume-panel .art-volume-slider-handle:after{background:hsla(0,0%,100%,.2);left:6px}.art-video-player .art-bottom .art-controls .art-control-volume .art-volume-panel .art-volume-slider-handle:after,.art-video-player .art-bottom .art-controls .art-control-volume .art-volume-panel .art-volume-slider-handle:before{content:"";display:block;height:3px;margin-top:-2px;position:absolute;top:50%;width:60px}.art-video-player .art-bottom .art-controls .art-control-volume:hover .art-volume-panel{width:60px}.art-video-player .art-bottom .art-controls .art-control-quality{position:relative;z-index:30}.art-video-player .art-bottom .art-controls .art-control-quality .art-qualitys{background:rgba(0,0,0,.8);border-radius:3px;bottom:35px;color:#fff;display:none;padding:5px 0;position:absolute;text-align:center;width:100px}.art-video-player .art-bottom .art-controls .art-control-quality .art-qualitys .art-quality-item{height:30px;line-height:30px;overflow:hidden;text-overflow:ellipsis;text-shadow:0 0 2px rgba(0,0,0,.5);white-space:nowrap}.art-video-player .art-bottom .art-controls .art-control-quality .art-qualitys .art-quality-item:hover{background-color:hsla(0,0%,100%,.1)}.art-video-player .art-bottom .art-controls .art-control-quality:hover .art-qualitys{display:block}.art-video-player .art-bottom:hover .art-progress .art-control-progress .art-control-progress-inner{height:100%}.art-video-player .art-bottom:hover .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator{transform:scale(1);visibility:visible}.art-video-player.art-control-show .art-bottom,.art-video-player.art-hover .art-bottom{opacity:1;visibility:visible}.art-video-player.art-destroy .art-progress-indicator,.art-video-player.art-destroy .art-progress-tip,.art-video-player.art-error .art-progress-indicator,.art-video-player.art-error .art-progress-tip{display:none!important}.art-video-player .art-notice{display:none;font-size:14px;left:0;padding:10px;pointer-events:none;position:absolute;top:0;width:100%;z-index:80}.art-video-player .art-notice .art-notice-inner{background-color:rgba(0,0,0,.6);border-radius:3px;color:#fff;display:inline-block;padding:5px 10px}.art-video-player.art-notice-show .art-notice{display:flex}.art-video-player .art-contextmenus{background-color:rgba(0,0,0,.9);border-radius:3px;display:none;flex-direction:column;left:10px;min-width:200px;padding:5px 0;position:absolute;top:10px;z-index:120}.art-video-player .art-contextmenus .art-contextmenu{border-bottom:1px solid hsla(0,0%,100%,.1);color:#fff;cursor:pointer;display:block;font-size:12px;overflow:hidden;padding:10px 15px;text-overflow:ellipsis;text-shadow:0 0 2px rgba(0,0,0,.5);white-space:nowrap}.art-video-player .art-contextmenus .art-contextmenu a{color:#fff;text-decoration:none}.art-video-player .art-contextmenus .art-contextmenu span{display:inline-block;padding:0 7px}.art-video-player .art-contextmenus .art-contextmenu span.art-current,.art-video-player .art-contextmenus .art-contextmenu span:hover{color:#00c9ff}.art-video-player .art-contextmenus .art-contextmenu:hover{background-color:hsla(0,0%,100%,.1)}.art-video-player .art-contextmenus .art-contextmenu:last-child{border-bottom:none}.art-video-player.art-contextmenu-show .art-contextmenus{display:flex}.art-video-player .art-settings{align-items:center;display:flex;height:100%;justify-content:center;left:0;opacity:0;overflow:hidden;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%;z-index:90}.art-video-player .art-settings .art-setting-inner{background-color:rgba(0,0,0,.9);bottom:0;font-size:12px;height:100%;overflow:auto;position:absolute;right:-300px;top:0;transition:all .2s ease-in-out;width:300px}.art-video-player .art-settings .art-setting-inner .art-setting-body{height:100%;overflow-y:auto;width:100%}.art-video-player .art-settings .art-setting-inner .art-setting-body .art-setting{border-bottom:1px solid hsla(0,0%,100%,.1);padding:10px 15px}.art-video-player .art-settings .art-setting-inner .art-setting-body .art-setting .art-setting-header{margin-bottom:5px}.art-video-player .art-settings .art-setting-radio{display:flex}.art-video-player .art-settings .art-setting-radio .art-radio-item{flex:1;padding:0 2px}.art-video-player .art-settings .art-setting-radio .art-radio-item button{background-color:hsla(0,0%,100%,.2);border:none;border-radius:2px;color:#fff;height:22px;outline:none;width:100%}.art-video-player .art-settings .art-setting-radio .art-radio-item.current button,.art-video-player .art-settings .art-setting-radio .art-radio-item button:active{background-color:#00a1d6}.art-video-player .art-settings .art-setting-range input{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:hsla(0,0%,100%,.5);height:3px;outline:none;width:100%}.art-video-player .art-settings .art-setting-checkbox{align-items:center;display:flex}.art-video-player .art-settings .art-setting-checkbox input{height:14px;margin-right:5px;width:14px}.art-video-player .art-settings .art-setting-upload{display:flex}.art-video-player .art-settings .art-setting-upload .art-upload-btn{background-color:hsla(0,0%,100%,.2);border:none;border-radius:2px;color:#fff;height:22px;line-height:22px;outline:none;text-align:center;width:80px}.art-video-player .art-settings .art-setting-upload .art-upload-value{flex:1;height:22px;line-height:22px;overflow:hidden;padding-left:10px;text-overflow:ellipsis;white-space:nowrap}.art-video-player.art-setting-show .art-settings{opacity:1;pointer-events:auto;visibility:visible}.art-video-player.art-setting-show .art-settings .art-setting-inner{right:0}.art-video-player .art-info{-webkit-font-smoothing:antialiased;background-color:rgba(0,0,0,.9);color:#fff;display:none;flex-direction:column;font-family:Noto Sans CJK SC DemiLight,Roboto,Segoe UI,Tahoma,Arial,Helvetica,sans-serif;font-size:12px;left:10px;padding:10px;position:absolute;top:10px;width:350px;z-index:100}.art-video-player .art-info .art-info-item{display:flex;margin-bottom:5px}.art-video-player .art-info .art-info-item .art-info-title{text-align:right;width:100px}.art-video-player .art-info .art-info-item .art-info-content{flex:1;overflow:hidden;padding-left:5px;text-overflow:ellipsis;white-space:nowrap}.art-video-player .art-info .art-info-item:last-child{margin-bottom:0}.art-video-player .art-info .art-info-close{cursor:pointer;position:absolute;right:5px;top:5px}.art-video-player.art-info-show .art-info{display:flex}.art-video-player.art-hide-cursor *{cursor:none!important}.art-video-player[data-aspect-ratio] video{box-sizing:content-box;-o-object-fit:fill;object-fit:fill}.art-video-player.art-fullscreen-web{bottom:0;height:100%!important;left:0;position:fixed;right:0;top:0;width:100%!important;z-index:9999}.art-fullscreen-rotate{background-color:#000;bottom:0;height:100%;left:0;position:fixed;right:0;top:0;width:100%;z-index:9999}.art-video-player .art-mini-header{align-items:center;background-color:rgba(0,0,0,.5);color:#fff;display:none;height:35px;justify-content:space-between;left:0;line-height:35px;opacity:0;position:absolute;right:0;top:0;transition:all .2s ease-in-out;visibility:hidden;z-index:110}.art-video-player .art-mini-header .art-mini-title{cursor:move;flex:1;overflow:hidden;padding:0 10px;text-overflow:ellipsis;white-space:nowrap}.art-video-player .art-mini-header .art-mini-close{cursor:pointer;font-size:22px;text-align:center;width:35px}.art-video-player.art-is-dragging{opacity:.7}.art-video-player.art-mini{box-shadow:0 2px 5px 0 rgba(0,0,0,.16),0 3px 6px 0 rgba(0,0,0,.2);height:225px;position:fixed;width:400px;z-index:9999}.art-video-player.art-mini .art-mini-header{display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.art-video-player.art-mini.art-hover .art-mini-header{opacity:1;visibility:visible}.art-video-player.art-mini .art-mask .art-state{position:static}.art-video-player.art-mini .art-bottom,.art-video-player.art-mini .art-contextmenu,.art-video-player.art-mini .art-danmu,.art-video-player.art-mini .art-info,.art-video-player.art-mini .art-layers,.art-video-player.art-mini .art-notice,.art-video-player.art-mini .art-setting,.art-video-player.art-mini .art-subtitle{display:none!important}.art-auto-size{align-items:center;display:flex;justify-content:center}.art-video-player[data-flip=horizontal] .art-video{transform:scaleX(-1)}.art-video-player[data-flip=vertical] .art-video{transform:scaleY(-1)}.art-video-player .art-layers .art-layer-log{background-color:rgba(0,0,0,.5);border-radius:3px;bottom:10px;color:#fff;display:none;font-size:13px;left:10px;padding:5px;pointer-events:none;position:absolute;text-shadow:0 0 2px rgba(0,0,0,.5);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:120px}.art-video-player .art-layers .art-layer-log p{margin-bottom:0;word-break:break-all}.art-video-player .art-control-selector{position:relative}.art-video-player .art-control-selector .art-selector-list{background-color:rgba(0,0,0,.8);border-radius:3px;bottom:35px;color:#fff;display:none;max-height:200px;max-width:200px;min-width:100px;overflow:auto;padding:5px 0;position:absolute;text-align:center}.art-video-player .art-control-selector .art-selector-list .art-selector-item{height:30px;line-height:30px;overflow:hidden;padding:0 5px;text-overflow:ellipsis;text-shadow:0 0 2px rgba(0,0,0,.5);white-space:nowrap}.art-video-player .art-control-selector .art-selector-list .art-selector-item:hover{background-color:hsla(0,0%,100%,.1)}.art-video-player .art-control-selector .art-selector-list .art-selector-item.art-current,.art-video-player .art-control-selector .art-selector-list .art-selector-item:hover{color:#00c9ff}.art-video-player .art-control-selector:hover .art-selector-list{display:block}:root{--balloon-color:hsla(0,0%,6%,.95);--balloon-font-size:12px;--balloon-move:4px}button[aria-label][data-balloon-pos]{overflow:visible}[aria-label][data-balloon-pos]{cursor:pointer;position:relative}[aria-label][data-balloon-pos]:after{background:var(--balloon-color);border-radius:2px;color:#fff;content:attr(aria-label);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-size:var(--balloon-font-size);font-style:normal;font-weight:400;line-height:1.2;padding:.5em 1em;text-indent:0;text-shadow:none;white-space:nowrap}[aria-label][data-balloon-pos]:after,[aria-label][data-balloon-pos]:before{opacity:0;pointer-events:none;position:absolute;transition:all .18s ease-out .18s;z-index:10}[aria-label][data-balloon-pos]:before{border:5px solid transparent;border-top:5px solid var(--balloon-color);content:"";height:0;width:0}[aria-label][data-balloon-pos]:hover:after,[aria-label][data-balloon-pos]:hover:before{opacity:1;pointer-events:none}[aria-label][data-balloon-pos][data-balloon-pos=up]:after{margin-bottom:10px}[aria-label][data-balloon-pos][data-balloon-pos=up]:after,[aria-label][data-balloon-pos][data-balloon-pos=up]:before{bottom:100%;left:50%;transform:translate(-50%,var(--balloon-move));transform-origin:top}[aria-label][data-balloon-pos][data-balloon-pos=up]:hover:after,[aria-label][data-balloon-pos][data-balloon-pos=up]:hover:before{transform:translate(-50%)}');var u={exports:{}};u.exports=function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t=Object.prototype.toString,n=function(n){if(void 0===n)return"undefined";if(null===n)return"null";var o=e(n);if("boolean"===o)return"boolean";if("string"===o)return"string";if("number"===o)return"number";if("symbol"===o)return"symbol";if("function"===o)return"GeneratorFunction"===r(n)?"generatorfunction":"function";if(function(e){return Array.isArray?Array.isArray(e):e instanceof Array}(n))return"array";if(function(e){return!(!e.constructor||"function"!=typeof e.constructor.isBuffer)&&e.constructor.isBuffer(e)}(n))return"buffer";if(function(e){try{if("number"==typeof e.length&&"function"==typeof e.callee)return!0}catch(t){if(-1!==t.message.indexOf("callee"))return!0}return!1}(n))return"arguments";if(function(e){return e instanceof Date||"function"==typeof e.toDateString&&"function"==typeof e.getDate&&"function"==typeof e.setDate}(n))return"date";if(function(e){return e instanceof Error||"string"==typeof e.message&&e.constructor&&"number"==typeof e.constructor.stackTraceLimit}(n))return"error";if(function(e){return e instanceof RegExp||"string"==typeof e.flags&&"boolean"==typeof e.ignoreCase&&"boolean"==typeof e.multiline&&"boolean"==typeof e.global}(n))return"regexp";switch(r(n)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(function(e){return"function"==typeof e.throw&&"function"==typeof e.return&&"function"==typeof e.next}(n))return"generator";switch(o=t.call(n)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return o.slice(8,-1).toLowerCase().replace(/\s/g,"")};function r(e){return e.constructor?e.constructor.name:null}function o(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:["option"];return i(e,t,r),a(e,t,r),function(e,t,r){var s=n(t),l=n(e);if("object"===s){if("object"!==l)throw new Error("[Type Error]: '".concat(r.join("."),"' require 'object' type, but got '").concat(l,"'"));Object.keys(t).forEach((function(n){var s=e[n],l=t[n],u=r.slice();u.push(n),i(s,l,u),a(s,l,u),o(s,l,u)}))}if("array"===s){if("array"!==l)throw new Error("[Type Error]: '".concat(r.join("."),"' require 'array' type, but got '").concat(l,"'"));e.forEach((function(n,s){var l=e[s],u=t[s]||t[0],c=r.slice();c.push(s),i(l,u,c),a(l,u,c),o(l,u,c)}))}}(e,t,r),e}function i(e,t,r){if("string"===n(t)){var o=n(e);if("?"===t[0]&&(t=t.slice(1)+"|undefined"),!(-1<t.indexOf("|")?t.split("|").map((function(e){return e.toLowerCase().trim()})).filter(Boolean).some((function(e){return o===e})):t.toLowerCase().trim()===o))throw new Error("[Type Error]: '".concat(r.join("."),"' require '").concat(t,"' type, but got '").concat(o,"'"))}}function a(e,t,r){if("function"===n(t)){var o=t(e,n(e),r);if(!0!==o){var i=n(o);throw"string"===i?new Error(o):"error"===i?o:new Error("[Validator Error]: The scheme for '".concat(r.join("."),"' validator require return true, but got '").concat(o,"'"))}}}return o.kindOf=n,o}();var c=u.exports,d=function(){function t(){e(this,t)}return n(t,[{key:"on",value:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this}},{key:"once",value:function(e,t,n){var r=this;function o(){r.off(e,o);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];t.apply(n,a)}return o._=t,this.on(e,o,n)}},{key:"emit",value:function(e){for(var t=((this.e||(this.e={}))[e]||[]).slice(),n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var i=0;i<t.length;i+=1)t[i].fn.apply(t[i].ctx,r);return this}},{key:"off",value:function(e,t){var n=this.e||(this.e={}),r=n[e],o=[];if(r&&t)for(var i=0,a=r.length;i<a;i+=1)r[i].fn!==t&&r[i].fn._!==t&&o.push(r[i]);return o.length?n[e]=o:delete n[e],this}}]),t}(),f="undefined"!=typeof window?window.navigator.userAgent:"",p=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(f),h=/^((?!chrome|android).)*safari/i.test(f),m=/MicroMessenger/i.test(f),g=/MSIE|Trident/i.test(f);function v(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelector(e)}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return Array.from(t.querySelectorAll(e))}function b(e,t){return e.classList.add(t)}function _(e,t){return e.classList.remove(t)}function w(e,t){return e.classList.contains(t)}function E(e,t){return t instanceof Element?e.appendChild(t):e.insertAdjacentHTML("beforeend",String(t)),e.lastElementChild||e.lastChild}function S(e,t,n){return e.style[t]=n,e}function x(e,t){return Object.keys(t).forEach((function(n){S(e,n,t[n])})),e}function O(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=window.getComputedStyle(e,null).getPropertyValue(t);return n?parseFloat(r):r}function A(e){return Array.from(e.parentElement.children).filter((function(t){return t!==e}))}function k(e,t){A(e).forEach((function(e){return _(e,t)})),b(e,t)}function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"up";p||(e.setAttribute("aria-label",t),e.setAttribute("data-balloon-pos",n))}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.getBoundingClientRect(),r=window.innerHeight||document.documentElement.clientHeight,o=window.innerWidth||document.documentElement.clientWidth,i=n.top-t<=r&&n.top+n.height+t>=0,a=n.left-t<=o+t&&n.left+n.width+t>=0;return i&&a}function L(e,t){return e.composedPath&&e.composedPath().indexOf(t)>-1}function C(e,t){return t.parentNode.replaceChild(e,t),e}function R(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function M(e,t,n){return(M=R()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&o(i,n.prototype),i}).apply(null,arguments)}function D(e){var t="function"==typeof Map?new Map:void 0;return(D=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return M(e,arguments,l(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),o(r,e)})(e)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}var j=function(t){i(o,t);var n=I(o);function o(t,i){var a;return e(this,o),a=n.call(this,t),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(r(a),i||a.constructor),a.name="ArtPlayerError",a}return o}(D(Error));function N(e,t){if(!e)throw new j(t);return e}function B(e){return"WEBVTT \r\n\r\n".concat(e.replace(/{[\s\S]*?}/g,"").replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").concat("\r\n\r\n"))}function U(e){return URL.createObjectURL(new Blob([e],{type:"text/vtt"}))}function F(e){var t=new RegExp("Dialogue:\\s\\d,(\\d+:\\d\\d:\\d\\d.\\d\\d),(\\d+:\\d\\d:\\d\\d.\\d\\d),([^,]*),([^,]*),(?:[^,]*,){4}([\\s\\S]*)$","i");function n(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(/[:.]/).map((function(e,t,n){if(t===n.length-1){if(1===e.length)return".".concat(e,"00");if(2===e.length)return".".concat(e,"0")}else if(1===e.length)return(0===t?"0":":0")+e;return 0===t?e:t===n.length-1?".".concat(e):":".concat(e)})).join("")}return"WEBVTT\n\n".concat(e.split(/\r?\n/).map((function(e){var r=e.match(t);return r?{start:n(r[1].trim()),end:n(r[2].trim()),text:r[5].replace(/{[\s\S]*?}/g,"").replace(/(\\N)/g,"\n").trim().split(/\r?\n/).map((function(e){return e.trim()})).join("\n")}:null})).filter((function(e){return e})).map((function(e,t){return e?"".concat(t+1,"\n").concat(e.start," --\x3e ").concat(e.end,"\n").concat(e.text):""})).filter((function(e){return e.trim()})).join("\n\n"))}function V(e){return e.includes("?")?V(e.split("?")[0]):e.includes("#")?V(e.split("#")[0]):e.trim().toLowerCase().split(".").pop()}function z(e,t){var n=document.createElement("a");n.style.display="none",n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function G(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var W=Object.defineProperty,K=Object.prototype.hasOwnProperty;function $(e,t){return K.call(e,t)}function q(e,t){return Object.getOwnPropertyDescriptor(e,t)}function Y(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(e,t){return Object.getOwnPropertyNames(t).forEach((function(n){N(!$(e,n),"Target attribute name is duplicated: ".concat(n)),W(e,n,q(t,n))})),e}),e)}function X(){for(var e=function(e){return e&&"object"===a(e)&&!Array.isArray(e)},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.reduce((function(t,n){return Object.keys(n).forEach((function(r){var o=t[r],i=n[r];Array.isArray(o)&&Array.isArray(i)?t[r]=o.concat.apply(o,G(i)):!e(o)||!e(i)||i instanceof Element?t[r]=i:t[r]=X(o,i)})),t}),{})}function Q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))}function Z(e,t){var n,r,o=!1;return function i(){for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];if(o)return n=s,void(r=this);o=!0,e.apply(this,s),setTimeout((function(){o=!1,n&&(i.apply(r,n),n=null,r=null)}),t)}}function J(e,t,n){return Math.max(Math.min(e,Math.max(t,n)),Math.min(t,n))}function ee(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),r=Math.floor(e-3600*t-60*n);return(t>0?[t,n,r]:[n,r]).map((function(e){return e<10?"0".concat(e):String(e)})).join(":")}function te(e){return e.replace(/[&<>'"]/g,(function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"}[e]||e}))}var ne=Object.freeze({__proto__:null,query:v,queryAll:y,addClass:b,removeClass:_,hasClass:w,append:E,remove:function(e){return e.parentNode.removeChild(e)},setStyle:S,setStyles:x,getStyle:O,sublings:A,inverseClass:k,tooltip:P,isInViewport:T,includeFromEvent:L,replaceElement:C,ArtPlayerError:j,errorHandle:N,srtToVtt:B,vttToBlob:U,assToVtt:F,getExt:V,download:z,def:W,has:$,get:q,proxyPropertys:Y,mergeDeep:X,sleep:Q,debounce:function(e,t,n){var r;function o(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var s=function(){r=null,e.apply(n,i)};clearTimeout(r),r=setTimeout(s,t)}return o.clearTimeout=function(){clearTimeout(r)},o},throttle:Z,clamp:J,secondToTime:ee,escape:te,userAgent:f,isMobile:p,isSafari:h,isWechat:m,isIE:g});function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ae="boolean",se="string",le="number",ue="object",ce="function";function de(e,t,n){return N(t===se||e instanceof Element,"".concat(n.join(".")," require '").concat(se,"' or 'Element' type"))}var fe={html:de,disable:"?".concat(ae),name:"?".concat(se),index:"?".concat(le),style:"?".concat(ue),click:"?".concat(ce),mounted:"?".concat(ce),tooltip:"?".concat(se),selector:"?".concat("array"),onSelect:"?".concat(ce)},pe={container:de,url:se,poster:se,title:se,type:se,theme:se,lang:se,volume:le,isLive:ae,muted:ae,autoplay:ae,autoSize:ae,autoMini:ae,loop:ae,flip:ae,rotate:ae,playbackRate:ae,aspectRatio:ae,screenshot:ae,setting:ae,hotkey:ae,pip:ae,mutex:ae,backdrop:ae,fullscreen:ae,fullscreenWeb:ae,subtitleOffset:ae,miniProgressBar:ae,localVideo:ae,localSubtitle:ae,useSSR:ae,plugins:[ce],whitelist:["".concat(se,"|").concat(ce,"|").concat("regexp")],layers:[fe],contextmenu:[fe],settings:[fe],controls:[ie(ie({},fe),{},{position:function(e,t,n){var r=["top","left","right"];return N(r.includes(e),"".concat(n.join(".")," only accept ").concat(r.toString()," as parameters"))}})],quality:[{default:"?".concat(ae),html:se,url:se}],highlight:[{time:le,text:se}],thumbnails:{url:se,number:le,width:le,height:le,column:le},subtitle:{url:se,type:se,style:ue,encoding:se,bilingual:ae},moreVideoAttr:ue,icons:ue,customType:ue},he={propertys:["audioTracks","autoplay","buffered","controller","controls","crossOrigin","currentSrc","currentTime","defaultMuted","defaultPlaybackRate","duration","ended","error","loop","mediaGroup","muted","networkState","paused","playbackRate","played","preload","readyState","seekable","seeking","src","startDate","textTracks","videoTracks","volume"],methods:["addTextTrack","canPlayType","load","play","pause"],events:["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],prototypes:["width","height","videoWidth","videoHeight","poster","webkitDecodedFrameCount","webkitDroppedFrameCount","playsInline","webkitSupportsFullscreen","webkitDisplayingFullscreen","onenterpictureinpicture","onleavepictureinpicture","disablePictureInPicture","cancelVideoFrameCallback","requestVideoFrameCallback","getVideoPlaybackQuality","requestPictureInPicture","webkitEnterFullScreen","webkitEnterFullscreen","webkitExitFullScreen","webkitExitFullscreen"]},me=function t(n){e(this,t);var r=n.constructor.kindOf,o=n.option.whitelist;this.state=!p||o.some((function(e){switch(r(e)){case"string":return"*"===e||f.indexOf(e)>-1;case"function":return e(f);case"regexp":return e.test(f);default:return!1}}))},ge=function(){function t(n){var r=this;e(this,t),this.art=n,this.query=this.query.bind(this),n.option.container instanceof Element?this.$container=n.option.container:(this.$container=v(n.option.container),N(this.$container,"No container element found by ".concat(n.option.container)));var o=this.$container.tagName.toLowerCase();N("div"===o,"Unsupported container element type, only support 'div' but got '".concat(o,"'")),N(n.constructor.instances.every((function(e){return e.template.$container!==r.$container})),"Cannot mount multiple instances on the same dom element"),this.$original=this.$container.cloneNode(!0),n.whitelist.state?this.desktop():this.mobile()}return n(t,[{key:"query",value:function(e){return v(e,this.$container)}},{key:"desktop",value:function(){var e=this.art.option,n=e.backdrop,r=e.theme;e.useSSR||(this.$container.innerHTML=t.html),this.$player=this.query(".art-video-player"),this.$video=this.query(".art-video"),this.$poster=this.query(".art-poster"),this.$subtitle=this.query(".art-subtitle"),this.$danmuku=this.query(".art-danmuku"),this.$bottom=this.query(".art-bottom"),this.$progress=this.query(".art-progress"),this.$controls=this.query(".art-controls"),this.$controlsLeft=this.query(".art-controls-left"),this.$controlsRight=this.query(".art-controls-right"),this.$layer=this.query(".art-layers"),this.$loading=this.query(".art-loading"),this.$notice=this.query(".art-notice"),this.$noticeInner=this.query(".art-notice-inner"),this.$mask=this.query(".art-mask"),this.$state=this.query(".art-state"),this.$setting=this.query(".art-settings"),this.$settingInner=this.query(".art-setting-inner"),this.$settingBody=this.query(".art-setting-body"),this.$info=this.query(".art-info"),this.$infoPanel=this.query(".art-info-panel"),this.$infoClose=this.query(".art-info-close"),this.$miniHeader=this.query(".art-mini-header"),this.$miniTitle=this.query(".art-mini-title"),this.$miniClose=this.query(".art-mini-close"),this.$contextmenu=this.query(".art-contextmenus"),this.$player.style.setProperty("--theme",r),this.$container.dataset.artId=this.art.id,n&&(b(this.$settingInner,"art-backdrop-filter"),b(this.$contextmenu,"art-backdrop-filter"),b(this.$info,"art-backdrop-filter")),p&&b(this.$container,"art-mobile")}},{key:"mobile",value:function(){this.$container.innerHTML='<div class="art-video-player"><video class="art-video"></video></div>',this.$player=this.query(".art-video-player"),this.$video=this.query(".art-video")}},{key:"destroy",value:function(e){e?C(this.$original,this.$container):b(this.$player,"art-destroy")}}],[{key:"html",get:function(){return'<div class="art-video-player art-subtitle-show art-layer-show"><video class="art-video"></video><div class="art-poster"></div><div class="art-subtitle"></div><div class="art-danmuku"></div><div class="art-layers"></div><div class="art-mask"><div class="art-state"></div></div><div class="art-bottom"><div class="art-progress"></div><div class="art-controls"><div class="art-controls-left"></div><div class="art-controls-right"></div></div></div><div class="art-loading"></div><div class="art-notice"><div class="art-notice-inner"></div></div><div class="art-settings"><div class="art-setting-inner"><div class="art-setting-body"></div></div></div><div class="art-info"><div class="art-info-panel"><div class="art-info-item"><div class="art-info-title">Player version:</div><div class="art-info-content">4.0.8</div></div><div class="art-info-item"><div class="art-info-title">Video url:</div><div class="art-info-content" data-video="src"></div></div><div class="art-info-item"><div class="art-info-title">Video volume:</div><div class="art-info-content" data-video="volume"></div></div><div class="art-info-item"><div class="art-info-title">Video time:</div><div class="art-info-content" data-video="currentTime"></div></div><div class="art-info-item"><div class="art-info-title">Video duration:</div><div class="art-info-content" data-video="duration"></div></div><div class="art-info-item"><div class="art-info-title">Video resolution:</div><div class="art-info-content"><span data-video="videoWidth"></span> x <span data-video="videoHeight"></span></div></div></div><div class="art-info-close">[x]</div></div><div class="art-mini-header"><div class="art-mini-title"></div><div class="art-mini-close">xD7</div></div><div class="art-contextmenus"></div></div>'}}]),t}(),ve={"Video info":"",Close:"","Video load failed":"",Volume:"",Play:"",Pause:"",Rate:"",Mute:"",Flip:"",Rotate:"",Horizontal:"",Vertical:"",Reconnect:"","Hide subtitle":"","Show subtitle":"","Hide danmu":"","Show danmu":"","Show setting":"","Hide setting":"",Screenshot:"","Play speed":"","Aspect ratio":"",Default:"",Normal:"",Open:"","Switch video":"","Switch subtitle":"",Fullscreen:"","Exit fullscreen":"","Web fullscreen":"","Exit web fullscreen":"","Mini player":"","PIP mode":"","Exit PIP mode":"","PIP not supported":"","Fullscreen not supported":"","Local Subtitle":"","Local Video":"","Subtitle offset time":"","No subtitles found":""},ye={"Video info":"",Close:"","Video load failed":"",Volume:"",Play:"",Pause:"",Rate:"",Mute:"",Flip:"",Rotate:"",Horizontal:"",Vertical:"",Reconnect:"","Hide subtitle":"","Show subtitle":"","Hide danmu":"","Show danmu":"","Show setting":"","Hide setting":"",Screenshot:"","Play speed":"","Aspect ratio":"",Default:"",Normal:"",Open:"","Switch video":"","Switch subtitle":"",Fullscreen:"","Exit fullscreen":"","Web fullscreen":"","Exit web fullscreen":"","Mini player":"","PIP mode":"","Exit PIP mode":"","PIP not supported":"","Fullscreen not supported":"","Local Subtitle":"","Local Video":"","Subtitle offset time":"","No subtitles found":""},be=function(){function t(n){e(this,t),this.art=n,this.languages={"zh-cn":ve,"zh-tw":ye},this.init()}return n(t,[{key:"init",value:function(){var e=this.art.option.lang.toLowerCase();this.language=this.languages[e]||{}}},{key:"get",value:function(e){return this.language[e]||e}},{key:"update",value:function(e){this.languages=X(this.languages,e),this.init()}}]),t}(),_e={exports:{}};!function(e){var t,n,r,o,i;t="undefined"!=typeof window&&void 0!==window.document?window.document:{},n=e.exports,r=function(){for(var e,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,o=n.length,i={};r<o;r++)if((e=n[r])&&e[1]in t){for(r=0;r<e.length;r++)i[n[0][r]]=e[r];return i}return!1}(),o={change:r.fullscreenchange,error:r.fullscreenerror},i={request:function(e,n){return new Promise(function(o,i){var a=function(){this.off("change",a),o()}.bind(this);this.on("change",a);var s=(e=e||t.documentElement)[r.requestFullscreen](n);s instanceof Promise&&s.then(a).catch(i)}.bind(this))},exit:function(){return new Promise(function(e,n){if(this.isFullscreen){var o=function(){this.off("change",o),e()}.bind(this);this.on("change",o);var i=t[r.exitFullscreen]();i instanceof Promise&&i.then(o).catch(n)}else e()}.bind(this))},toggle:function(e,t){return this.isFullscreen?this.exit():this.request(e,t)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,n){var r=o[e];r&&t.addEventListener(r,n,!1)},off:function(e,n){var r=o[e];r&&t.removeEventListener(r,n,!1)},raw:r},r?(Object.defineProperties(i,{isFullscreen:{get:function(){return Boolean(t[r.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[r.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(t[r.fullscreenEnabled])}}}),n?e.exports=i:window.screenfull=i):n?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}(_e);var we=_e.exports;function Ee(e,t){var n=e.i18n,r=e.notice,o=e.template.$video;e.once("ready",(function(){var i,a,s;we.isEnabled?(a=t,s=(i=e).template.$player,we.on("change",(function(){return i.emit("fullscreen",we.isFullscreen)})),W(a,"fullscreen",{get:function(){return we.isFullscreen},set:function(e){e?we.request(s).then((function(){b(s,"art-fullscreen"),a.aspectRatioReset=!0,i.emit("resize"),i.emit("fullscreen",!0)})):we.exit().then((function(){_(s,"art-fullscreen"),a.aspectRatioReset=!0,a.autoSize=i.option.autoSize,i.emit("resize"),i.emit("fullscreen")}))}})):document.fullscreenEnabled||o.webkitSupportsFullscreen?function(e,t){var n=e.template.$video;W(t,"fullscreen",{get:function(){return n.webkitDisplayingFullscreen},set:function(t){t?(n.webkitEnterFullscreen(),e.emit("fullscreen",!0)):(n.webkitExitFullscreen(),e.emit("fullscreen"))}})}(e,t):W(t,"fullscreen",{get:function(){return!1},set:function(){r.show=n.get("Fullscreen not supported")}}),W(e,"fullscreen",q(t,"fullscreen"))}))}function Se(e,t){var n,r,o,i,a,s=e.i18n,l=e.notice,u=e.template.$video;document.pictureInPictureEnabled?(r=t,o=(n=e).template.$video,i=n.events.proxy,a=n.notice,o.disablePictureInPicture=!1,W(r,"pip",{get:function(){return document.pictureInPictureElement},set:function(e){e?o.requestPictureInPicture().catch((function(e){throw a.show=e,e})):document.exitPictureInPicture().catch((function(e){throw a.show=e,e}))}}),i(o,"enterpictureinpicture",(function(){n.emit("pip",!0)})),i(o,"leavepictureinpicture",(function(){n.emit("pip")}))):u.webkitSupportsPresentationMode?function(e,t){var n=e.template.$video;n.webkitSetPresentationMode("inline"),W(t,"pip",{get:function(){return"picture-in-picture"===n.webkitPresentationMode},set:function(t){t?(n.webkitSetPresentationMode("picture-in-picture"),e.emit("pip",!0)):(n.webkitSetPresentationMode("inline"),e.emit("pip"))}})}(e,t):W(t,"pip",{get:function(){return!1},set:function(){l.show=s.get("PIP not supported")}})}var xe=function t(n){var r,o;e(this,t),function(e,t){var n=e.option,r=e.template.$video;W(t,"url",{get:function(){return r.currentSrc},set:function(t){var o=n.type||V(t),i=n.customType[o];o&&i?Q().then((function(){e.loading.show=!0,i.call(e,r,t,e)})):(r.src=t,e.option.url=t,e.emit("url",t))}})}(n,this),function(e,t){var n=e.option,r=e.events.proxy,o=e.template,i=o.$player,a=o.$video,s=o.$poster,l=e.i18n,u=e.notice,c=0;r(a,"click",(function(){t.toggle()})),r(a,"dblclick",(function(){t.fullscreen=!t.fullscreen})),he.events.forEach((function(t){r(a,t,(function(t){e.emit("video:".concat(t.type),t)}))})),e.on("video:canplay",(function(){c=0,e.loading.show=!1})),e.once("video:canplay",(function(){e.loading.show=!1,e.controls.show=!0,e.mask.show=!0,e.emit("ready")})),e.on("video:ended",(function(){n.loop?(t.seek=0,t.play(),e.controls.show=!1,e.mask.show=!1):(e.controls.show=!0,e.mask.show=!0)})),e.on("video:error",(function(){c<5?Q(1e3).then((function(){c+=1,t.url=n.url,u.show="".concat(l.get("Reconnect"),": ").concat(c),e.emit("error",c)})):(e.loading.show=!1,e.controls.show=!1,b(i,"art-error"),Q(1e3).then((function(){u.show=l.get("Video load failed"),e.destroy(!1)})))})),e.once("video:loadedmetadata",(function(){t.autoSize=n.autoSize,p&&(e.loading.show=!1,e.controls.show=!0,e.mask.show=!0)})),e.on("video:loadstart",(function(){e.loading.show=!0})),e.on("video:pause",(function(){e.controls.show=!0,e.mask.show=!0})),e.on("video:play",(function(){e.mask.show=!1,S(s,"display","none")})),e.on("video:playing",(function(){e.mask.show=!1})),e.on("video:seeked",(function(){e.loading.show=!1})),e.on("video:seeking",(function(){e.loading.show=!0})),e.on("video:timeupdate",(function(){e.mask.show=!1})),e.on("video:waiting",(function(){e.loading.show=!0}))}(n,this),function(e,t){var n=e.option,r=e.storage,o=e.template,i=o.$video,a=o.$poster;Object.keys(n.moreVideoAttr).forEach((function(e){i[e]=n.moreVideoAttr[e]})),n.muted&&(i.muted=n.muted),n.volume&&(i.volume=J(n.volume,0,1));var s=r.get("volume");s&&(i.volume=J(s,0,1)),n.poster&&S(a,"backgroundImage","url(".concat(n.poster,")")),n.autoplay&&(i.autoplay=n.autoplay),i.controls=!1,t.url=n.url}(n,this),function(e,t){var n,r=["mini","pip","fullscreen","fullscreenWeb"];(n=r).forEach((function(r){e.on(r,(function(){t[r]&&n.filter((function(e){return e!==r})).forEach((function(e){t[e]&&(t[e]=!1)}))}))})),W(t,"normalSize",{get:function(){return r.every((function(e){return!t[e]}))}})}(n,this),function(e,t){var n=e.i18n,r=e.notice,o=e.constructor.instances,i=e.option.mutex,a=e.template.$video;W(t,"play",{value:function(){var t=a.play();return t&&t.then&&t.then().catch((function(e){throw r.show=e,e})),i&&o.filter((function(t){return t!==e})).forEach((function(e){e.player.pause()})),r.show=n.get("Play"),e.emit("play"),t}})}(n,this),function(e,t){var n=e.template.$video,r=e.i18n,o=e.notice;W(t,"pause",{value:function(){var t=n.pause();return o.show=r.get("Pause"),e.emit("pause"),t}})}(n,this),W(r=this,"toggle",{value:function(){return r.playing?r.pause():r.play()}}),function(e,t){var n=e.notice;W(t,"seek",{set:function(r){t.currentTime=r,e.emit("seek",t.currentTime),t.duration&&(n.show="".concat(ee(t.currentTime)," / ").concat(ee(t.duration)))}}),W(t,"forward",{set:function(e){t.seek=t.currentTime+e}}),W(t,"backward",{set:function(e){t.seek=t.currentTime-e}})}(n,this),function(e,t){var n=e.template.$video,r=e.i18n,o=e.notice,i=e.storage;W(t,"volume",{get:function(){return n.volume||0},set:function(t){n.volume=J(t,0,1),o.show="".concat(r.get("Volume"),": ").concat(parseInt(100*n.volume,10)),0!==n.volume&&i.set("volume",n.volume),e.emit("volume",n.volume)}}),W(t,"muted",{get:function(){return n.muted},set:function(t){n.muted=t,e.emit("volume",n.volume)}})}(n,this),function(e,t){var n=e.template.$video;W(t,"currentTime",{get:function(){return n.currentTime||0},set:function(e){n.currentTime=J(parseFloat(e.toFixed(3)),0,t.duration)}})}(n,this),function(e,t){W(t,"duration",{get:function(){var t=e.template.$video.duration;return t===1/0?0:t||0}})}(n,this),function(e,t){var n=e.i18n,r=e.option,o=e.notice;function i(i,a,s){return new Promise((function(l){if(i===t.url)return l(i);URL.revokeObjectURL(t.url);var u=t.playing;t.url=i,e.once("video:canplay",(function(){t.playbackRate=!1,t.aspectRatio=!1,t.flip="normal",t.autoSize=r.autoSize,t.currentTime=s,e.notice.show="",u&&t.play(),a&&(o.show="".concat(n.get("Switch video"),": ").concat(a)),e.emit("switch",i),l(i)}))}))}W(t,"switchQuality",{value:function(e,n){return i(e,n,t.currentTime)}}),W(t,"switchUrl",{value:function(e,t){return i(e,t,0)}})}(n,this),function(e,t){var n=e.template,r=n.$video,o=n.$player,i=e.i18n,a=e.notice;W(t,"playbackRate",{get:function(){return o.dataset.playbackRate},set:function(n){if(n){if(n===o.dataset.playbackRate)return;var s=[.5,.75,1,1.25,1.5,1.75,2];N(s.includes(n),"'playbackRate' only accept ".concat(s.toString()," as parameters")),r.playbackRate=n,o.dataset.playbackRate=n,a.show="".concat(i.get("Rate"),": ").concat(1===n?i.get("Normal"):"".concat(n,"x")),e.emit("playbackRate",n)}else t.playbackRate&&(t.playbackRate=1,delete o.dataset.playbackRate,e.emit("playbackRate"))}}),W(t,"playbackRateReset",{set:function(e){if(e){var n=o.dataset.playbackRate;n&&(t.playbackRate=Number(n))}}})}(n,this),function(e,t){var n=e.template,r=n.$video,o=n.$player,i=e.i18n,a=e.notice;W(t,"aspectRatio",{get:function(){return o.dataset.aspectRatio||""},set:function(t){t||(t="default");var n=["default","4:3","16:9"];if(N(n.includes(t),"'aspectRatio' only accept ".concat(n.toString()," as parameters")),"default"===t)S(r,"width",null),S(r,"height",null),S(r,"padding",null),delete o.dataset.aspectRatio;else{var s=t.split(":"),l=r.videoWidth,u=r.videoHeight,c=o.clientWidth,d=o.clientHeight,f=l/u,p=s[0]/s[1];if(f>p){var h=p*u/l;S(r,"width","".concat(100*h,"%")),S(r,"height","100%"),S(r,"padding","0 ".concat((c-c*h)/2,"px"))}else{var m=l/p/u;S(r,"width","100%"),S(r,"height","".concat(100*m,"%")),S(r,"padding","".concat((d-d*m)/2,"px 0"))}o.dataset.aspectRatio=t}a.show="".concat(i.get("Aspect ratio"),": ").concat("default"===t?i.get("Default"):t),e.emit("aspectRatio",t)}}),W(t,"aspectRatioReset",{set:function(e){if(e&&t.aspectRatio){var n=t.aspectRatio;t.aspectRatio=n}}})}(n,this),function(e,t){var n=e.option,r=e.notice,o=e.template.$video,i=document.createElement("canvas");W(t,"getDataURL",{value:function(){return new Promise((function(e,t){try{i.width=o.videoWidth,i.height=o.videoHeight,i.getContext("2d").drawImage(o,0,0),e(i.toDataURL("image/png"))}catch(n){r.show=n,t(n)}}))}}),W(t,"getBlobUrl",{value:function(){return new Promise((function(e,t){try{i.width=o.videoWidth,i.height=o.videoHeight,i.getContext("2d").drawImage(o,0,0),i.toBlob((function(t){e(URL.createObjectURL(t))}))}catch(n){r.show=n,t(n)}}))}}),W(t,"screenshot",{value:function(){return t.getDataURL().then((function(t){return z(t,"".concat(n.title||"artplayer","_").concat(ee(o.currentTime),".png")),e.emit("screenshot",t),t}))}})}(n,this),Ee(n,this),function(e,t){var n=e.template.$player;W(t,"fullscreenWeb",{get:function(){return w(n,"art-fullscreen-web")},set:function(r){r?(b(n,"art-fullscreen-web"),t.aspectRatioReset=!0,e.emit("resize"),e.emit("fullscreenWeb",!0)):(_(n,"art-fullscreen-web"),t.aspectRatioReset=!0,t.autoSize=e.option.autoSize,e.emit("resize"),e.emit("fullscreenWeb"))}})}(n,this),Se(n,this),function(e,t){var n=e.template.$video;W(t,"loaded",{get:function(){return t.loadedTime/n.duration}}),W(t,"loadedTime",{get:function(){return n.buffered.length?n.buffered.end(n.buffered.length-1):0}})}(n,this),W(o=this,"played",{get:function(){return o.currentTime/o.duration}}),function(e,t){var n=e.template.$video;W(t,"playing",{get:function(){return!!(n.currentTime>0&&!n.paused&&!n.ended&&n.readyState>2)}})}(n,this),function(e,t){var n=e.template,r=n.$container,o=n.$player,i=n.$video;W(t,"autoSize",{get:function(){return w(r,"art-auto-size")},set:function(n){if(n){var a=i.videoWidth,s=i.videoHeight,l=r.getBoundingClientRect(),u=l.width,c=l.height,d=a/s,f=u/c;if(b(r,"art-auto-size"),f>d)S(o,"width","".concat(c*d/u*100,"%")),S(o,"height","100%");else{var p=u/d/c*100;S(o,"width","100%"),S(o,"height","".concat(p,"%"))}e.emit("autoSize",{width:t.width,height:t.height})}else _(r,"art-auto-size"),S(o,"width",null),S(o,"height",null),e.emit("autoSize")}})}(n,this),function(e,t){W(t,"rect",{get:function(){return e.template.$player.getBoundingClientRect()}}),["bottom","height","left","right","top","width"].forEach((function(e){W(t,e,{get:function(){return t.rect[e]}})})),W(t,"x",{get:function(){return t.left+window.pageXOffset}}),W(t,"y",{get:function(){return t.top+window.pageYOffset}})}(n,this),function(e,t){var n=e.template.$player,r=e.i18n,o=e.notice;W(t,"flip",{get:function(){return n.dataset.flip},set:function(i){i||(i="normal");var a=["normal","horizontal","vertical"];N(a.includes(i),"'flip' only accept ".concat(a.toString()," as parameters")),"normal"===i?delete n.dataset.flip:(t.rotate=!1,n.dataset.flip=i);var s=i.replace(i[0],i[0].toUpperCase());o.show="".concat(r.get("Flip"),": ").concat(r.get(s)),e.emit("flip",i)}}),W(t,"flipReset",{set:function(e){if(e&&t.flip){var n=t.flip;t.flip=n}}})}(n,this),function(e,t){var n=e.i18n,r=e.option,o=e.storage,i=e.events.proxy,a=e.template,s=a.$player,l=a.$miniClose,u=a.$miniTitle,c=a.$miniHeader,d="",f=!1,p=0,h=0,m=0,g=0;i(c,"mousedown",(function(e){f=!0,p=e.pageX,h=e.pageY,m=t.left,g=t.top})),i(document,"mousemove",(function(e){if(f){b(s,"art-is-dragging");var t=g+e.pageY-h,n=m+e.pageX-p;S(s,"top","".concat(t,"px")),S(s,"left","".concat(n,"px")),o.set("top",t),o.set("left",n)}})),i(document,"mouseup",(function(){f=!1,_(s,"art-is-dragging")})),i(l,"click",(function(){t.mini=!1,f=!1,_(s,"art-is-dragging")})),E(u,r.title||n.get("Mini player")),W(t,"mini",{get:function(){return w(s,"art-mini")},set:function(n){if(n){t.autoSize=!1,d=s.style.cssText,b(s,"art-mini");var i=o.get("top"),a=o.get("left");if(i&&a)S(s,"top","".concat(i,"px")),S(s,"left","".concat(a,"px")),T(c)||(o.del("top"),o.del("left"),t.mini=!0);else{var l=document.body,u=l.clientHeight-t.height-50,f=l.clientWidth-t.width-50;o.set("top",u),o.set("left",f),S(s,"top","".concat(u,"px")),S(s,"left","".concat(f,"px"))}t.aspectRatio=!1,t.playbackRate=!1,e.emit("mini",!0)}else s.style.cssText=d,_(s,"art-mini"),S(s,"top",null),S(s,"left",null),t.aspectRatio=!1,t.playbackRate=!1,t.autoSize=r.autoSize,e.emit("mini")}})}(n,this),function(e,t){var n=[];W(t,"loop",{get:function(){return n},set:function(r){if(Array.isArray(r)&&"number"==typeof r[0]&&"number"==typeof r[1]){var o=J(r[0],0,Math.min(r[1],t.duration)),i=J(r[1],o,t.duration);i-o>=1?(n=[o,i],e.emit("loop",n)):(n=[],e.emit("loop"))}else n=[],e.emit("loop")}}),e.on("video:timeupdate",(function(){n.length&&(t.currentTime<n[0]||t.currentTime>n[1])&&(t.seek=n[0])}))}(n,this),function(e,t){var n=e.template,r=n.$video,o=n.$player,i=e.i18n,a=e.notice;W(t,"rotate",{get:function(){return Number(o.dataset.rotate)||0},set:function(n){n||(n=0);var s=[-270,-180,-90,0,90,180,270];if(N(s.includes(n),"'rotate' only accept ".concat(s.toString()," as parameters")),0===n)delete o.dataset.rotate,S(r,"transform",null);else{t.flip=!1,e.autoSize=!0,o.dataset.rotate=n;var l=function(){var e=r.videoWidth,t=r.videoHeight;return e>t?t/e:e/t},u=0,c=1;switch(n){case-270:u=90,c=l();break;case-180:u=180;break;case-90:u=270,c=l();break;case 90:u=90,c=l();break;case 180:u=180;break;case 270:u=270,c=l()}S(r,"transform","rotate(".concat(u,"deg) scale(").concat(c,")"))}a.show="".concat(i.get("Rotate"),": ").concat(n,""),e.emit("rotate",n)}}),W(t,"rotateReset",{set:function(e){if(e&&t.rotate){var n=t.rotate;t.rotate=n}}})}(n,this),function(e,t){var n=e.option,r=e.template.$poster;W(t,"poster",{get:function(){return n.poster},set:function(e){n.poster=e,S(r,"backgroundImage","url(".concat(e,")"))}})}(n,this),Y(n,this)};function Oe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}function Ae(){return(Ae="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Oe(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(this,arguments)}var ke=function(){function t(n){e(this,t),this.id=0,this.art=n,this.add=this.add.bind(this)}return n(t,[{key:"show",get:function(){return w(this.art.template.$player,"art-".concat(this.name,"-show"))},set:function(e){var t=this.art.template.$player,n="art-".concat(this.name,"-show");e?b(t,n):_(t,n),this.art.emit(this.name,e)}},{key:"toggle",set:function(e){e&&(this.show=!this.show)}},{key:"add",value:function(e){var t=this,n="function"==typeof e?e(this.art):e;if(n.html=n.html||"",c(n,fe),this.$parent&&this.name&&!n.disable){var r=n.name||"".concat(this.name).concat(this.id);N(!$(this,r),"Cannot add an existing name [".concat(r,"] to the [").concat(this.name,"]")),this.id+=1;var o=document.createElement("div");b(o,"art-".concat(this.name)),b(o,"art-".concat(this.name,"-").concat(r));var i=Array.from(this.$parent.children);o.dataset.index=n.index||this.id;var a=i.find((function(e){return Number(e.dataset.index)>=Number(o.dataset.index)}));return a?a.insertAdjacentElement("beforebegin",o):E(this.$parent,o),n.html&&E(o,n.html),n.style&&x(o,n.style),n.tooltip&&P(o,n.tooltip),n.click&&this.art.events.proxy(o,"click",(function(e){e.preventDefault(),n.click.call(t.art,t,e)})),n.selector&&["left","right"].includes(n.position)&&this.selector(n,o),n.mounted&&n.mounted.call(this.art,o),1===o.childNodes.length&&3===o.childNodes[0].nodeType&&b(o,"art-control-onlyText"),W(this,r,{value:o}),o}}},{key:"selector",value:function(e,t){var n=this,r=this.art.events,o=r.hover,i=r.proxy;b(t,"art-control-selector");var a=document.createElement("div");b(a,"art-selector-value"),E(a,e.html),t.innerText="",E(t,a);var s=e.selector.map((function(e,t){return'<div class="art-selector-item '.concat(e.default?"art-current":"",'" data-index="').concat(t,'">').concat(e.html,"</div>")})).join(""),l=document.createElement("div");b(l,"art-selector-list"),E(l,s),E(t,l);var u=function(){var e=O(t,"width")/2-O(l,"width")/2;l.style.left="".concat(e,"px")};o(t,u),i(l,"click",(function(t){var r=(t.composedPath()||[]).find((function(e){return w(e,"art-selector-item")}));if(r){k(r,"art-current");var o=Number(r.dataset.index),i=e.selector[o]||{};if(a.innerText=r.innerText,e.onSelect){var s=e.onSelect.call(n.art,i,r);"string"==typeof s&&(a.innerHTML=s)}u(),n.art.emit("selector",i,r)}}))}}]),t}();function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Be(e,t){var n=e.player,r=e.template.$progress,o=r.getBoundingClientRect().left,i=J(t.pageX-o,0,r.clientWidth),a=i/r.clientWidth*n.duration;return{second:a,time:ee(a),width:i,percentage:J(i/r.clientWidth,0,1)}}function Ue(e){return function(t){var n=t.option,r=n.highlight,o=n.theme,i=t.events.proxy,a=t.player,s=t.icons;return Ne(Ne({},e),{},{html:'<div class="art-control-progress-inner"><div class="art-progress-loaded"></div><div class="art-progress-played"></div><div class="art-progress-highlight"></div><div class="art-progress-indicator"></div><div class="art-progress-tip"></div></div>',mounted:function(e){var n=!1,l=v(".art-progress-loaded",e),u=v(".art-progress-played",e),c=v(".art-progress-highlight",e),d=v(".art-progress-indicator",e),f=v(".art-progress-tip",e);S(u,"backgroundColor",o);var p=14;function h(e,t){"loaded"===e&&S(l,"width","".concat(100*t,"%")),"played"===e&&(S(u,"width","".concat(100*t,"%")),S(d,"left","calc(".concat(100*t,"% - ").concat(p/2,"px)")))}s.indicator?(p=16,E(d,s.indicator)):x(d,{backgroundColor:o}),x(d,{left:"-".concat(p/2,"px"),width:"".concat(p,"px"),height:"".concat(p,"px")}),r.forEach((function(e){var t=J(e.time,0,a.duration)/a.duration*100;E(c,'<span data-text="'.concat(e.text,'" data-time="').concat(e.time,'" style="left: ').concat(t,'%"></span>'))})),h("loaded",a.loaded),t.on("video:progress",(function(){h("loaded",a.loaded)})),t.on("video:timeupdate",(function(){h("played",a.played)})),t.on("video:ended",(function(){h("played",1)})),i(e,"mousemove",(function(n){S(f,"display","block"),L(n,c)?function(n){var r=Be(t,n).width,o=n.target.dataset.text;f.innerHTML=o;var i=f.clientWidth;r<=i/2?S(f,"left",0):r>e.clientWidth-i/2?S(f,"left","".concat(e.clientWidth-i,"px")):S(f,"left","".concat(r-i/2,"px"))}(n):function(n){var r=Be(t,n),o=r.width,i=r.time;f.innerHTML=i;var a=f.clientWidth;o<=a/2?S(f,"left",0):o>e.clientWidth-a/2?S(f,"left","".concat(e.clientWidth-a,"px")):S(f,"left","".concat(o-a/2,"px"))}(n)})),i(e,"mouseout",(function(){S(f,"display","none")})),i(e,"click",(function(e){if(e.target!==d){var n=Be(t,e),r=n.second;h("played",n.percentage),a.seek=r}})),i(d,"mousedown",(function(){n=!0})),i(document,"mousemove",(function(e){if(n){var r=Be(t,e),o=r.second;h("played",r.percentage),a.seek=o}})),i(document,"mouseup",(function(){n&&(n=!1)}))}})}}function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xe(e){return function(t){return Ye(Ye({},e),{},{mounted:function(e){var n=t.option.thumbnails,r=t.template.$progress,o=t.events,i=o.proxy,a=o.loadImg,s=!1,l=!1;i(r,"mousemove",(function(o){var i,u,c,d,f,p,h,m,g,v;s||(s=!0,a(n.url).then((function(){l=!0}))),l&&(S(e,"display","block"),i=Be(t,o).width,u=n.url,c=n.height,d=n.width,f=n.number,p=n.column,h=r.clientWidth/f,m=Math.floor(i/h),g=Math.ceil(m/p)-1,v=m%p||p-1,S(e,"backgroundImage","url(".concat(u,")")),S(e,"height","".concat(c,"px")),S(e,"width","".concat(d,"px")),S(e,"backgroundPosition","-".concat(v*d,"px -").concat(g*c,"px")),i<=d/2?S(e,"left",0):i>r.clientWidth-d/2?S(e,"left","".concat(r.clientWidth-d,"px")):S(e,"left","".concat(i-d/2,"px")))})),i(r,"mouseout",(function(){S(e,"display","none")}))}})}}function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}var ot=function(t){i(o,t);var r=rt(o);function o(t){var n;e(this,o),(n=r.call(this,t)).name="control";var i=t.option,a=t.player,s=t.template.$player;return n.mouseMoveTime=Date.now(),t.on("mousemove",(function(){n.show=!0,_(s,"art-hide-cursor"),b(s,"art-hover"),n.mouseMoveTime=Date.now()})),t.on("video:timeupdate",(function(){a.playing&&n.show&&Date.now()-n.mouseMoveTime>=3e3&&(n.show=!1,b(s,"art-hide-cursor"),_(s,"art-hover"))})),t.once("ready",(function(){n.add(Ue({name:"progress",disable:i.isLive,position:"top",index:10})),n.add(Xe({name:"thumbnails",disable:!i.thumbnails.url||i.isLive,position:"top",index:20})),n.add(function(e){return function(t){return nt(nt({},e),{},{mounted:function(e){var n=t.player,r=E(e,'<span class="art-loop-point"></span>'),o=E(e,'<span class="art-loop-point"></span>');t.on("loop",(function(t){t?(S(e,"display","block"),S(r,"left","calc(".concat(t[0]/n.duration*100,"% - ").concat(r.clientWidth,"px)")),S(o,"left","".concat(t[1]/n.duration*100,"%"))):S(e,"display","none")}))}})}}({name:"loop",disable:!1,position:"top",index:30})),n.add(function(e){return function(t){return Ie(Ie({},e),{},{mounted:function(e){var n=t.events.proxy,r=t.icons,o=t.i18n,i=t.player,a=E(e,r.play),s=E(e,r.pause);function l(){S(a,"display","flex"),S(s,"display","none")}function u(){S(a,"display","none"),S(s,"display","flex")}P(a,o.get("Play")),P(s,o.get("Pause")),n(a,"click",(function(){i.play()})),n(s,"click",(function(){i.pause()})),i.playing?u():l(),t.on("video:playing",(function(){u()})),t.on("video:pause",(function(){l()}))}})}}({name:"playAndPause",disable:!1,position:"left",index:10})),n.add(function(e){return function(t){return We(We({},e),{},{mounted:function(e){var n=t.events.proxy,r=t.icons,o=t.player,i=t.i18n,a=!1,s=E(e,r.volume),l=E(e,r.volumeClose),u=E(e,'<div class="art-volume-panel"></div>'),c=E(u,'<div class="art-volume-slider-handle"></div>');function d(e){var t=u.getBoundingClientRect().left;return J(e.pageX-t-6,0,54)/48}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.7;if(o.muted||0===e)S(s,"display","none"),S(l,"display","flex"),S(c,"left","0");else{var t=48*e;S(s,"display","flex"),S(l,"display","none"),S(c,"left","".concat(t,"px"))}}P(s,i.get("Mute")),S(l,"display","none"),p&&S(u,"display","none"),f(o.volume),t.on("video:volumechange",(function(){f(o.volume)})),n(s,"click",(function(){o.muted=!0})),n(l,"click",(function(){o.muted=!1})),n(u,"click",(function(e){o.muted=!1,o.volume=d(e)})),n(c,"mousedown",(function(){a=!0})),n(e,"mousemove",(function(e){a&&(o.muted=!1,o.volume=d(e))})),n(document,"mouseup",(function(){a&&(a=!1)}))}})}}({name:"volume",disable:!1,position:"left",index:20})),n.add(function(e){return function(t){return He(He({},e),{},{mounted:function(e){function n(){var n="".concat(ee(t.player.currentTime)," / ").concat(ee(t.player.duration));n!==e.innerText&&(e.innerText=n)}n(),["video:loadedmetadata","video:timeupdate","video:progress"].forEach((function(e){t.on(e,n)}))}})}}({name:"time",disable:i.isLive,position:"left",index:30})),n.add(function(e){return function(t){var n=t.option.quality,r=n.find((function(e){return e.default}))||n[0];return et(et({},e),{},{html:r?r.html:"",selector:n,onSelect:function(e){t.player.switchQuality(e.url,e.html)}})}}({name:"quality",disable:0===i.quality.length,position:"right",index:10})),n.add(function(e){return function(t){return Ze(Ze({},e),{},{tooltip:t.i18n.get("Screenshot"),mounted:function(e){var n=t.events.proxy,r=t.icons,o=t.player;E(e,r.screenshot),n(e,"click",(function(){o.screenshot()}))}})}}({name:"screenshot",disable:!i.screenshot,position:"right",index:20})),n.add(function(e){return function(t){return Ve(Ve({},e),{},{tooltip:t.i18n.get("Hide subtitle"),mounted:function(e){var n=t.events.proxy,r=t.icons,o=t.i18n,i=t.subtitle;E(e,r.subtitle),n(e,"click",(function(){i.toggle=!0})),t.on("subtitle",(function(t){P(e,o.get(t?"Hide subtitle":"Show subtitle"))}))}})}}({name:"subtitle",disable:!i.subtitle.url,position:"right",index:30})),n.add(function(e){return function(t){return $e($e({},e),{},{tooltip:t.i18n.get("Show setting"),mounted:function(e){var n=t.events.proxy,r=t.icons,o=t.i18n,i=t.setting;E(e,r.setting),n(e,"click",(function(){i.toggle=!0})),t.on("setting",(function(t){P(e,o.get(t?"Hide setting":"Show setting"))}))}})}}({name:"setting",disable:!i.setting,position:"right",index:40})),n.add(function(e){return function(t){return Me(Me({},e),{},{tooltip:t.i18n.get("PIP mode"),mounted:function(e){var n=t.events.proxy,r=t.icons,o=t.i18n,i=t.player;E(e,r.pip),n(e,"click",(function(){i.pip=!i.pip})),t.on("pip",(function(t){P(e,o.get(t?"Exit PIP mode":"PIP mode"))}))}})}}({name:"pip",disable:!i.pip,position:"right",index:50})),n.add(function(e){return function(t){return Ce(Ce({},e),{},{tooltip:t.i18n.get("Web fullscreen"),mounted:function(e){var n=t.events.proxy,r=t.icons,o=t.i18n,i=t.player;E(e,r.fullscreenWeb),n(e,"click",(function(){i.fullscreenWeb=!i.fullscreenWeb})),t.on("fullscreenWeb",(function(t){P(e,o.get(t?"Exit web fullscreen":"Web fullscreen"))}))}})}}({name:"fullscreenWeb",disable:!i.fullscreenWeb,position:"right",index:60})),n.add(function(e){return function(t){return Te(Te({},e),{},{tooltip:t.i18n.get("Fullscreen"),mounted:function(e){var n=t.events.proxy,r=t.icons,o=t.i18n,i=t.player;E(e,r.fullscreen),n(e,"click",(function(){i.fullscreen=!i.fullscreen})),t.on("fullscreen",(function(t){P(e,o.get(t?"Exit fullscreen":"Fullscreen"))}))}})}}({name:"fullscreen",disable:!i.fullscreen,position:"right",index:70})),i.controls.forEach((function(e){n.add(e)}))})),n}return n(o,[{key:"add",value:function(e){var t="function"==typeof e?e(this.art):e,n=this.art.template,r=n.$progress,i=n.$controlsLeft,a=n.$controlsRight;switch(t.position){case"top":this.$parent=r;break;case"left":this.$parent=i;break;case"right":this.$parent=a;break;default:N(!1,"Control option.position must one of 'top', 'left', 'right'")}Ae(l(o.prototype),"add",this).call(this,t)}}]),o}(ke);function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}var gt=function(t){i(r,t);var n=mt(r);function r(t){var o;e(this,r),(o=n.call(this,t)).name="contextmenu";var i=t.option,a=t.template,s=a.$player,l=a.$contextmenu,u=t.events.proxy;return o.$parent=l,t.once("ready",(function(){o.add(function(e){return function(t){var n=t.i18n,r=t.player;return at(at({},e),{},{html:"".concat(n.get("Play speed"),':<span data-rate="0.5">0.5</span><span data-rate="0.75">0.75</span><span data-rate="1.0" class="art-current">').concat(n.get("Normal"),'</span><span data-rate="1.25">1.25</span><span data-rate="1.5">1.5</span><span data-rate="2.0">2.0</span>'),click:function(e,t){var n=t.target.dataset.rate;n&&(r.playbackRate=Number(n),e.show=!1)},mounted:function(e){t.on("playbackRate",(function(t){var n=y("span",e).find((function(e){return Number(e.dataset.rate)===t}));n&&k(n,"art-current")}))}})}}({disable:!i.playbackRate,name:"playbackRate",index:10})),o.add(function(e){return function(t){var n=t.i18n,r=t.player;return lt(lt({},e),{},{html:"".concat(n.get("Aspect ratio"),':<span data-ratio="default" class="art-current">').concat(n.get("Default"),'</span><span data-ratio="4:3">4:3</span><span data-ratio="16:9">16:9</span>'),click:function(e,t){var n=t.target.dataset.ratio;n&&(r.aspectRatio=n,e.show=!1)},mounted:function(e){t.on("aspectRatio",(function(t){var n=y("span",e).find((function(e){return e.dataset.ratio===t}));n&&k(n,"art-current")}))}})}}({disable:!i.aspectRatio,name:"aspectRatio",index:20})),o.add(function(e){return function(t){return ct(ct({},e),{},{html:t.i18n.get("Video info"),click:function(e){t.info.show=!0,e.show=!1}})}}({disable:!1,name:"info",index:30})),o.add(ft(ft({},{disable:!1,name:"version",index:40}),{},{html:'<a href="https://artplayer.org" target="_blank">ArtPlayer 4.0.8</a>'})),o.add(function(e){return function(t){return ht(ht({},e),{},{html:t.i18n.get("Close"),click:function(e){e.show=!1}})}}({disable:!1,name:"close",index:60})),i.contextmenu.forEach((function(e){o.add(e)})),u(s,"contextmenu",(function(e){e.preventDefault(),o.show=!0;var t=e.clientX,n=e.clientY,r=s.getBoundingClientRect(),i=r.height,a=r.width,u=r.left,c=r.top,d=l.getBoundingClientRect(),f=d.height,p=d.width,h=t-u,m=n-c;t+p>u+a&&(h=a-p),n+f>c+i&&(m=i-f),x(l,{top:"".concat(m,"px"),left:"".concat(h,"px")})})),u(s,"click",(function(e){L(e,l)||(o.show=!1)})),t.on("blur",(function(){o.show=!1}))})),o}return r}(ke);function vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}var yt=function(t){i(o,t);var r=vt(o);function o(t){var n;return e(this,o),(n=r.call(this,t)).name="info",n.art.template.$info&&n.init(),n}return n(o,[{key:"init",value:function(){var e=this,t=this.art,n=t.template,r=n.$infoPanel,o=n.$infoClose,i=n.$video;(0,t.events.proxy)(o,"click",(function(){e.show=!1}));var a=null,s=y("[data-video]",r);function l(){s.forEach((function(e){var t=i[e.dataset.video];e.innerText="number"==typeof t?t.toFixed(2):t})),a=setTimeout((function(){l()}),1e3)}this.art.on("destroy",(function(){clearTimeout(a)})),this.art.on("info",(function(e){clearTimeout(a),e&&l()}))}}]),o}(ke);function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}var Et=function(t){i(o,t);var r=wt(o);function o(t){var n;return e(this,o),(n=r.call(this,t)).name="subtitle",t.once("ready",(function(){n.init(t.option.subtitle)})),n}return n(o,[{key:"url",get:function(){return this.art.template.$track.src},set:function(e){this.switch(e)}},{key:"textTrack",get:function(){return this.art.template.$video.textTracks[0]}},{key:"activeCue",get:function(){return this.textTrack.activeCues[0]}},{key:"bilingual",get:function(){return w(this.art.template.$subtitle,"art-bilingual")},set:function(e){var t=this.art.template.$subtitle;e?b(t,"art-bilingual"):_(t,"art-bilingual")}},{key:"style",value:function(e,t){var n=this.art.template.$subtitle;return"object"===a(e)?x(n,e):S(n,e,t)}},{key:"update",value:function(){var e=this.art.template.$subtitle;e.innerHTML="",this.activeCue&&(e.innerHTML=this.activeCue.text.split(/\r?\n/).map((function(e){return"<p>".concat(te(e),"</p>")})).join(""),this.art.emit("subtitleUpdate",this.activeCue.text))}},{key:"switch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.art,r=n.i18n,o=n.notice,i=_t(_t(_t({},n.option.subtitle),t),{},{url:e});return this.init(i).then((function(e){return t.name&&(o.show="".concat(r.get("Switch subtitle"),": ").concat(t.name)),e}))}},{key:"init",value:function(e){var t=this;if(c(e,pe.subtitle),e.url){var n=this.art,r=n.notice,o=n.events.proxy,i=n.template,a=i.$subtitle,s=i.$video;if(!i.$track){var l=document.createElement("track");l.default=!0,l.kind="metadata",s.appendChild(l),this.art.template.$track=l,o(this.textTrack,"cuechange",this.update.bind(this))}return this.style(e.style),this.bilingual=e.bilingual,N(window.fetch,"fetch not support"),fetch(e.url).then((function(e){return e.arrayBuffer()})).then((function(n){N(window.TextDecoder,"TextDecoder not support");var r=new TextDecoder(e.encoding).decode(n);switch(t.art.emit("subtitleLoad",e.url),e.type||V(e.url)){case"srt":return U(B(r));case"ass":return U(F(r));case"vtt":return U(r);default:return e.url}})).then((function(e){return a.innerHTML="",t.url===e||(URL.revokeObjectURL(t.url),t.art.template.$track.src=e,t.art.emit("subtitleSwitch",e)),e})).catch((function(e){throw r.show=e,e}))}}}]),o}(ke),St=function(){function t(n){var r=this;e(this,t),this.destroyEvents=[],this.proxy=this.proxy.bind(this),this.hover=this.hover.bind(this),this.loadImg=this.loadImg.bind(this),n.whitelist.state&&n.once("ready",(function(){!function(e,t){var n=e.template.$player;t.proxy(document,["click","contextmenu"],(function(t){L(t,n)?(e.isFocus=!0,e.emit("focus")):(e.isFocus=!1,e.emit("blur"))}))}(n,r),function(e,t){var n=e.template.$player;t.hover(n,(function(){b(n,"art-hover"),e.emit("hover",!0)}),(function(){_(n,"art-hover"),e.emit("hover")}))}(n,r),function(e,t){var n=e.template.$player;t.proxy(n,"mousemove",(function(t){e.emit("mousemove",t)}))}(n,r),function(e,t){var n=e.option,r=e.player,o=Z((function(){r.normalSize&&(r.autoSize=n.autoSize),r.aspectRatioReset=!0,e.emit("resize")}),500);t.proxy(window,["orientationchange","resize"],(function(){o()})),screen&&screen.orientation&&screen.orientation.onchange&&t.proxy(screen.orientation,"change",(function(){o()}))}(n,r),function(e,t){if(p&&!e.option.isLive){var n=e.player,r=e.notice,o=e.template.$video,i=!1,a=0,s=0;t.proxy(o,"touchstart",(function(e){1===e.touches.length&&(i=!0,a=e.touches[0].clientX)})),t.proxy(document,"touchmove",(function(e){if(1===e.touches.length&&i){var t=J((e.touches[0].clientX-a)/o.clientWidth,-1,1);s=J(n.currentTime+60*t,0,n.duration),r.show="".concat(ee(s)," / ").concat(ee(n.duration))}})),t.proxy(document,"touchend",(function(){i&&s&&(n.seek=s),i=!1,a=0,s=0}))}}(n,r),function(e,t){var n=e.player,r=e.option,o=e.template.$container,i=Z((function(){e.emit("view",T(o,50))}),200);t.proxy(window,"scroll",(function(){i()})),e.on("view",(function(e){r.autoMini&&(n.mini=!e)}))}(n,r)}))}return n(t,[{key:"proxy",value:function(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(Array.isArray(t))return t.map((function(t){return r.proxy(e,t,n,o)}));e.addEventListener(t,n,o);var i=function(){return e.removeEventListener(t,n,o)};return this.destroyEvents.push(i),i}},{key:"hover",value:function(e,t,n){t&&this.proxy(e,"mouseenter",t),n&&this.proxy(e,"mouseleave",n)}},{key:"loadImg",value:function(e){var t=this;return new Promise((function(n,r){var o;if(e instanceof HTMLImageElement)o=e;else{if("string"!=typeof e)return r(new j("Unable to get Image"));(o=new Image).src=e}if(o.complete)return n(o);t.proxy(o,"load",(function(){return n(o)})),t.proxy(o,"error",(function(){return r(new j("Failed to load Image: ".concat(o.src)))}))}))}},{key:"destroy",value:function(){this.destroyEvents.forEach((function(e){return e()}))}}]),t}(),xt=function(){function t(n){var r=this;e(this,t),this.keys={};var o=n.option,i=n.player,a=n.events.proxy;o.hotkey&&n.once("ready",(function(){r.add(27,(function(){i.fullscreenWeb&&(i.fullscreenWeb=!1)})),r.add(32,(function(){i.toggle()})),r.add(37,(function(){i.backward=5})),r.add(38,(function(){i.volume+=.1})),r.add(39,(function(){i.forward=5})),r.add(40,(function(){i.volume-=.1})),a(window,"keydown",(function(e){if(n.isFocus){var t=document.activeElement.tagName.toUpperCase(),o=document.activeElement.getAttribute("contenteditable");if("INPUT"!==t&&"TEXTAREA"!==t&&""!==o&&"true"!==o){var i=r.keys[e.keyCode];i&&(e.preventDefault(),i.forEach((function(t){return t.call(n,e)})),n.emit("hotkey",e))}}}))}))}return n(t,[{key:"add",value:function(e,t){return N("number"==typeof e,"The Hotkey.add() first parameter is not a number"),N("function"==typeof t,"The Hotkey.add() second parameter is not a function"),this.keys[e]?this.keys[e].push(t):this.keys[e]=[t],this}}]),t}();function Ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}var At=function(t){i(r,t);var n=Ot(r);function r(t){var o;return e(this,r),(o=n.call(this,t)).name="layer",o.$parent=t.template.$layer,t.once("ready",(function(){t.option.layers.forEach((function(e){o.add(e)}))})),o}return r}(ke);function kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}var Pt=function(t){i(r,t);var n=kt(r);function r(t){var o;return e(this,r),(o=n.call(this,t)).name="loading",E(t.template.$loading,t.icons.loading),o}return r}(ke),Tt=function(){function t(n){e(this,t),this.art=n,this.time=2e3,this.timer=null}return n(t,[{key:"show",set:function(e){var t=this.art.template,n=t.$player,r=t.$noticeInner;if(!e)return _(n,"art-notice-show");r.innerText=e instanceof Error?e.message.trim():e,b(n,"art-notice-show"),clearTimeout(this.timer),this.timer=setTimeout((function(){r.innerText="",_(n,"art-notice-show")}),this.time)}}]),t}();function Lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}var Ct=function(t){i(r,t);var n=Lt(r);function r(t){var o;return e(this,r),(o=n.call(this,t)).name="mask",E(t.template.$state,t.icons.state),o}return r}(ke);function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Mt=function t(n){var r=this;e(this,t);var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({loading:'<svg xmlns="http://www.w3.org/2000/svg" width="50px" height="50px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="uil-default"><rect x="0" y="0" width="100" height="100" fill="none" class="bk"/><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(0 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-1s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(30 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.9166666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(60 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.8333333333333334s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(90 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.75s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(120 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.6666666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(150 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.5833333333333334s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(180 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.5s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(210 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.4166666666666667s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(240 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.3333333333333333s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(270 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.25s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(300 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.16666666666666666s" repeatCount="indefinite"/></rect><rect x="47" y="40" width="6" height="20" rx="5" ry="5" fill="#ffffff" transform="rotate(330 50 50) translate(0 -30)"><animate attributeName="opacity" from="1" to="0" dur="1s" begin="-0.08333333333333333s" repeatCount="indefinite"/></rect></svg>',state:'<svg xmlns="http://www.w3.org/2000/svg" height="60" width="60" style="filter: drop-shadow(0px 1px 1px black);" viewBox="0 0 24 24"><path d="M20,2H4C1.8,2,0,3.8,0,6v12c0,2.2,1.8,4,4,4h16c2.2,0,4-1.8,4-4V6C24,3.8,22.2,2,20,2z M15.6,12.8L10.5,16 C9.9,16.5,9,16,9,15.2V8.8C9,8,9.9,7.5,10.5,8l5.1,3.2C16.3,11.5,16.3,12.5,15.6,12.8z"/></svg>',play:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M17.982 9.275L8.06 3.27A2.013 2.013 0 0 0 5 4.994v12.011a2.017 2.017 0 0 0 3.06 1.725l9.922-6.005a2.017 2.017 0 0 0 0-3.45z"></path></svg>',pause:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M7 3a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2zM15 3a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2z"></path></svg>',volume:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M10.188 4.65L6 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39V5.04a.498.498 0 0 0-.812-.39zM14.446 3.778a1 1 0 0 0-.862 1.804 6.002 6.002 0 0 1-.007 10.838 1 1 0 0 0 .86 1.806A8.001 8.001 0 0 0 19 11a8.001 8.001 0 0 0-4.554-7.222z"></path><path d="M15 11a3.998 3.998 0 0 0-2-3.465v6.93A3.998 3.998 0 0 0 15 11z"></path></svg>',volumeClose:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><path d="M15 11a3.998 3.998 0 0 0-2-3.465v2.636l1.865 1.865A4.02 4.02 0 0 0 15 11z"></path><path d="M13.583 5.583A5.998 5.998 0 0 1 17 11a6 6 0 0 1-.585 2.587l1.477 1.477a8.001 8.001 0 0 0-3.446-11.286 1 1 0 0 0-.863 1.805zM18.778 18.778l-2.121-2.121-1.414-1.414-1.415-1.415L13 13l-2-2-3.889-3.889-3.889-3.889a.999.999 0 1 0-1.414 1.414L5.172 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39v-3.131l2.587 2.587-.01.005a1 1 0 0 0 .86 1.806c.215-.102.424-.214.627-.333l2.3 2.3a1.001 1.001 0 0 0 1.414-1.416zM11 5.04a.5.5 0 0 0-.813-.39L8.682 5.854 11 8.172V5.04z"></path></svg>',subtitle:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 48 48"><path d="M0 0h48v48H0z" fill="none"/><path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"/></svg>',screenshot:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 50 50">\t<path d="M 19.402344 6 C 17.019531 6 14.96875 7.679688 14.5 10.011719 L 14.097656 12 L 9 12 C 6.238281 12 4 14.238281 4 17 L 4 38 C 4 40.761719 6.238281 43 9 43 L 41 43 C 43.761719 43 46 40.761719 46 38 L 46 17 C 46 14.238281 43.761719 12 41 12 L 35.902344 12 L 35.5 10.011719 C 35.03125 7.679688 32.980469 6 30.597656 6 Z M 25 17 C 30.519531 17 35 21.480469 35 27 C 35 32.519531 30.519531 37 25 37 C 19.480469 37 15 32.519531 15 27 C 15 21.480469 19.480469 17 25 17 Z M 25 19 C 20.589844 19 17 22.589844 17 27 C 17 31.410156 20.589844 35 25 35 C 29.410156 35 33 31.410156 33 27 C 33 22.589844 29.410156 19 25 19 Z "/></svg>',setting:'<svg xmlns="http://www.w3.org/2000/svg" height="22" width="22" viewBox="0 0 22 22"><circle cx="11" cy="11" r="2"></circle><path d="M19.164 8.861L17.6 8.6a6.978 6.978 0 0 0-1.186-2.099l.574-1.533a1 1 0 0 0-.436-1.217l-1.997-1.153a1.001 1.001 0 0 0-1.272.23l-1.008 1.225a7.04 7.04 0 0 0-2.55.001L8.716 2.829a1 1 0 0 0-1.272-.23L5.447 3.751a1 1 0 0 0-.436 1.217l.574 1.533A6.997 6.997 0 0 0 4.4 8.6l-1.564.261A.999.999 0 0 0 2 9.847v2.306c0 .489.353.906.836.986l1.613.269a7 7 0 0 0 1.228 2.075l-.558 1.487a1 1 0 0 0 .436 1.217l1.997 1.153c.423.244.961.147 1.272-.23l1.04-1.263a7.089 7.089 0 0 0 2.272 0l1.04 1.263a1 1 0 0 0 1.272.23l1.997-1.153a1 1 0 0 0 .436-1.217l-.557-1.487c.521-.61.94-1.31 1.228-2.075l1.613-.269a.999.999 0 0 0 .835-.986V9.847a.999.999 0 0 0-.836-.986zM11 15a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"></path></svg>',fullscreen:'<svg xmlns="http://www.w3.org/2000/svg" height="36" width="36" viewBox="0 0 36 36">\t<path d="m 10,16 2,0 0,-4 4,0 0,-2 L 10,10 l 0,6 0,0 z"></path>\t<path d="m 20,10 0,2 4,0 0,4 2,0 L 26,10 l -6,0 0,0 z"></path>\t<path d="m 24,24 -4,0 0,2 L 26,26 l 0,-6 -2,0 0,4 0,0 z"></path>\t<path d="M 12,20 10,20 10,26 l 6,0 0,-2 -4,0 0,-4 0,0 z"></path></svg>',fullscreenWeb:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36" height="36" width="36">\t<path d="m 28,11 0,14 -20,0 0,-14 z m -18,2 16,0 0,10 -16,0 0,-10 z" fill-rule="evenodd"></path></svg>',pip:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36" height="32" width="32"><path d="M25,17 L17,17 L17,23 L25,23 L25,17 L25,17 Z M29,25 L29,10.98 C29,9.88 28.1,9 27,9 L9,9 C7.9,9 7,9.88 7,10.98 L7,25 C7,26.1 7.9,27 9,27 L27,27 C28.1,27 29,26.1 29,25 L29,25 Z M27,25.02 L9,25.02 L9,10.97 L27,10.97 L27,25.02 L27,25.02 Z"></path></svg>'},n.option.icons);Object.keys(o).forEach((function(e){W(r,e,{get:function(){var t=document.createElement("i");return b(t,"art-icon"),b(t,"art-icon-".concat(e)),E(t,o[e]),t}})}))};function Dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}var Ht=function(t){i(r,t);var n=zt(r);function r(t){var o;e(this,r),(o=n.call(this,t)).name="setting";var i=t.option,a=t.template,s=a.$setting,l=a.$settingBody,u=t.events.proxy;return o.$parent=l,i.setting&&(t.once("ready",(function(){u(s,"click",(function(e){e.target===s&&(o.show=!1)})),o.add(function(e){return function(t){var n=t.i18n,r=t.player;return It(It({},e),{},{html:'<div class="art-setting-header">'.concat(n.get("Flip"),'</div><div class="art-setting-radio"><div class="art-radio-item current"><button type="button" data-value="normal">').concat(n.get("Normal"),'</button></div><div class="art-radio-item"><button type="button" data-value="horizontal">').concat(n.get("Horizontal"),'</button></div><div class="art-radio-item"><button type="button" data-value="vertical">').concat(n.get("Vertical"),"</button></div></div>"),click:function(e,t){var n=t.target.dataset.value;n&&(r.flip=n)},mounted:function(e){t.on("flip",(function(t){var n=y("button",e).find((function(e){return e.dataset.value===t}));n&&k(n.parentElement,"current")}))}})}}({disable:!i.flip,name:"flip"})),o.add(function(e){return function(t){var n=t.i18n,r=t.player;return Nt(Nt({},e),{},{html:'<div class="art-setting-header">'.concat(n.get("Rotate"),': <span class="art-rotate-value">0</span></div><div class="art-setting-radio"><div class="art-radio-item"><button type="button" data-value="90">+90</button></div><div class="art-radio-item"><button type="button" data-value="-90">-90</button></div></div>'),click:function(e,t){var n=t.target.dataset.value;if(n){var o=r.rotate+Number(n);r.rotate=360===o||-360===o?0:o}else r.rotate=0},mounted:function(e){var n=v(".art-rotate-value",e);t.on("rotate",(function(e){n.innerText="".concat(e||0,"")}))}})}}({disable:!i.rotate,name:"rotate"})),o.add(function(e){return function(t){var n=t.i18n,r=t.player;return Ut(Ut({},e),{},{html:'<div class="art-setting-header">'.concat(n.get("Aspect ratio"),'</div><div class="art-setting-radio"><div class="art-radio-item current"><button type="button" data-value="default">').concat(n.get("Default"),'</button></div><div class="art-radio-item"><button type="button" data-value="4:3">4:3</button></div><div class="art-radio-item"><button type="button" data-value="16:9">16:9</button></div></div>'),click:function(e,t){var n=t.target.dataset.value;n&&(r.aspectRatio=n)},mounted:function(e){t.on("aspectRatio",(function(t){var n=y("button",e).find((function(e){return e.dataset.value===t}));n&&k(n.parentElement,"current")}))}})}}({disable:!i.aspectRatio,name:"aspectRatio"})),o.add(function(e){return function(t){var n=t.i18n,r=t.player,o=t.events.proxy;return Vt(Vt({},e),{},{html:'<div class="art-setting-header">'.concat(n.get("Play speed"),': <span class="art-subtitle-value">1.0</span>x</div><div class="art-setting-range"><input class="art-subtitle-range" value="1" type="range" min="0.5" max="2" step="0.25"></div>'),mounted:function(e){var n=v(".art-setting-range input",e),i=v(".art-subtitle-value",e);o(n,"change",(function(){var e=n.value;i.innerText=e,r.playbackRate=Number(e)})),t.on("playbackRate",(function(e){e&&n.value!==e&&(n.value=e,i.innerText=e)}))}})}}({disable:!i.playbackRate,name:"playbackRate"})),i.settings.forEach((function(e){o.add(e)}))})),t.on("blur",(function(){o.show=!1}))),o}return r}(ke),Gt=function(){function t(){e(this,t),this.name="artplayer_settings",this.settings={}}return n(t,[{key:"get",value:function(e){try{var t=JSON.parse(window.localStorage.getItem(this.name))||{};return e?t[e]:t}catch(n){return e?this.settings[e]:this.settings}}},{key:"set",value:function(e,t){try{var n=Object.assign({},this.get(),re({},e,t));window.localStorage.setItem(this.name,JSON.stringify(n))}catch(r){this.settings[e]=t}}},{key:"del",value:function(e){try{var t=this.get();delete t[e],window.localStorage.setItem(this.name,JSON.stringify(t))}catch(n){delete this.settings[e]}}},{key:"clean",value:function(){try{window.localStorage.removeItem(this.name)}catch(e){this.settings={}}}}]),t}();function Wt(e){var t=e.i18n,n=e.subtitle,r=e.events.proxy;return{title:"Subtitle",name:"subtitleOffset",index:20,html:'<div class="art-setting-header">'.concat(t.get("Subtitle offset time"),': <span class="art-subtitle-value">0</span>s</div><div class="art-setting-range"><input class="art-subtitle-range" value="0" type="range" min="-5" max="5" step="0.5"></div>'),mounted:function(t){var o=v(".art-setting-range input",t),i=v(".art-subtitle-value",t);r(o,"change",(function(){var t=o.value;i.innerText=t,e.plugins.subtitleOffset.offset(Number(t))})),e.on("subtitle:switch",(function(){o.value=0,i.innerText=0})),e.on("subtitleOffset",(function(e){n.update(),o.value!==e&&(o.value=e,i.innerText=e)}))}}}function Kt(e){var t=e.constructor.utils.clamp,n=e.setting,r=e.notice,o=e.template,i=e.i18n,a=e.player;n.add(Wt);var s=[];return e.on("subtitle:switch",(function(){s=[]})),{name:"subtitleOffset",offset:function(n){if(o.$track&&o.$track.track){var l=Array.from(o.$track.track.cues),u=t(n,-5,5);l.forEach((function(e,n){s[n]||(s[n]={startTime:e.startTime,endTime:e.endTime}),e.startTime=t(s[n].startTime+u,0,a.duration),e.endTime=t(s[n].endTime+u,0,a.duration)})),r.show="".concat(i.get("Subtitle offset time"),": ").concat(n,"s"),e.emit("subtitleOffset",n)}else r.show="".concat(i.get("No subtitles found")),e.emit("subtitleOffset",0)}}}function $t(e){var t=e.events.proxy,n=e.template,r=e.player,o=e.option,i=e.setting,a=e.i18n;function s(t){if(t){var i=n.$video.canPlayType(t.type);if("maybe"===i||"probably"===i){var a=URL.createObjectURL(t);o.title=t.name,r.switchUrl(a,t.name),e.emit("localVideo",t)}else N(!1,"Playback of this file format is not supported")}}function l(e){var n=E(e,'<input type="file">');S(e,"position","relative"),x(n,{position:"absolute",width:"100%",height:"100%",left:"0",top:"0",opacity:"0"}),t(n,"change",(function(){s(n.files[0])}))}return t(n.$player,"dragover",(function(e){e.preventDefault()})),t(n.$player,"drop",(function(e){e.preventDefault(),s(e.dataTransfer.files[0])})),e.once("ready",(function(){i.add({title:"Local Video",name:"localVideo",index:30,html:'<div class="art-setting-header">'.concat(a.get("Local Video"),'</div><div class="art-setting-upload"><div class="art-upload-btn">').concat(a.get("Open"),'</div><div class="art-upload-value"></div></div>'),mounted:function(t){var n=v(".art-upload-btn",t),r=v(".art-upload-value",t);e.on("localVideo",(function(e){r.textContent=e.name,r.title=e.name})),l(n)}})})),{name:"localVideo",attach:l}}function qt(e){var t=e.events.proxy,n=e.subtitle,r=e.setting,o=e.i18n;function i(r){var o=E(r,'<input type="file">');S(r,"position","relative"),x(o,{position:"absolute",width:"100%",height:"100%",left:"0",top:"0",opacity:"0"}),t(o,"change",(function(){!function(t){if(t){var r=V(t.name);["ass","vtt","srt"].includes(r)?(n.switch(URL.createObjectURL(t),{name:t.name,ext:r}),e.emit("localSubtitle",t)):N(!1,"Only supports subtitle files in .ass, .vtt and .srt format")}}(o.files[0])}))}return e.once("ready",(function(){r.add({title:"Local Subtitle",name:"localSubtitle",index:40,html:'<div class="art-setting-header">'.concat(o.get("Local Subtitle"),'</div><div class="art-setting-upload"><div class="art-upload-btn">').concat(o.get("Open"),'</div><div class="art-upload-value"></div></div>'),mounted:function(t){var n=v(".art-upload-btn",t),r=v(".art-upload-value",t);e.on("localSubtitle",(function(e){r.textContent=e.name,r.title=e.name})),i(n)}})})),{name:"localSubtitle",attach:i}}function Yt(e){var t=e.layers,n=e.player,r=e.option.theme;return t.add({name:"miniProgressBar",style:{display:"none",position:"absolute",left:0,right:0,bottom:0,height:"2px",backgroundColor:r},mounted:function(t){e.on("control",(function(e){t.style.display=e?"none":"block"})),e.on("destroy",(function(){t.style.display="none"})),e.on("video:timeupdate",(function(){t.style.width="".concat(100*n.played,"%")}))}}),{name:"miniProgressBar"}}var Xt=function(){function t(n){var r=this;e(this,t),this.art=n,this.id=0;var o=n.option;o.subtitle.url&&o.subtitleOffset&&this.add(Kt),!o.isLive&&o.miniProgressBar&&this.add(Yt),o.localVideo&&this.add($t),o.localSubtitle&&this.add(qt),n.option.plugins.forEach((function(e){r.add(e)}))}return n(t,[{key:"add",value:function(e){this.id+=1,N("function"==typeof e,"The Plugins.add() first parameter is not a function");var t=e.call(this,this.art),n=t&&t.name||e.name||"plugin".concat(this.id);return N(!$(this,n),"Cannot add a plugin that already has the same name: ".concat(n)),W(this,n,{value:t}),this}}]),t}(),Qt=function t(n){e(this,t);var r=n.option,o=n.events.proxy,i=n.template.$video;he.events.forEach((function(e){o(i,e,(function(e){n.emit("video:".concat(e.type),e)}))})),Object.keys(r.moreVideoAttr).forEach((function(e){i[e]=r.moreVideoAttr[e]})),r.muted&&(i.muted=r.muted),r.volume&&(i.volume=J(r.volume,0,1)),r.poster&&(i.poster=r.poster),r.autoplay&&(i.autoplay=r.autoplay),i.controls=!0;var a=r.type||V(r.url),s=r.customType[a];a&&s?(s(i,r.url,n),n.emit("customType",a)):(i.src=r.url,n.emit("url",i.src))};function Zt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}var Jt=0,en=[],tn=function(t){i(a,t);var o=Zt(a);function a(t){var n;e(this,a),(n=o.call(this)).id=++Jt;var i=X(a.option,t);return n.option=c(i,pe),n.isFocus=!1,n.isDestroy=!1,n.whitelist=new me(r(n)),n.template=new ge(r(n)),n.events=new St(r(n)),n.whitelist.state?(n.storage=new Gt(r(n)),n.icons=new Mt(r(n)),n.i18n=new be(r(n)),n.notice=new Tt(r(n)),n.player=new xe(r(n)),n.layers=new At(r(n)),n.controls=new ot(r(n)),n.contextmenu=new gt(r(n)),n.subtitle=new Et(r(n)),n.info=new yt(r(n)),n.loading=new Pt(r(n)),n.hotkey=new xt(r(n)),n.mask=new Ct(r(n)),n.setting=new Ht(r(n)),n.plugins=new Xt(r(n))):n.mobile=new Qt(r(n)),en.push(r(n)),n}return n(a,[{key:"proxy",get:function(){return this.events.proxy}},{key:"query",get:function(){return this.template.query}},{key:"destroy",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.events.destroy(),this.template.destroy(e),en.splice(en.indexOf(this),1),this.isDestroy=!0,this.emit("destroy")}}],[{key:"instances",get:function(){return en}},{key:"version",get:function(){return"4.0.8"}},{key:"env",get:function(){return"production"}},{key:"build",get:function(){return"1639632966298"}},{key:"config",get:function(){return he}},{key:"utils",get:function(){return ne}},{key:"scheme",get:function(){return pe}},{key:"Emitter",get:function(){return d}},{key:"validator",get:function(){return c}},{key:"kindOf",get:function(){return c.kindOf}},{key:"html",get:function(){return ge.html}},{key:"option",get:function(){return{container:"#artplayer",url:"",poster:"",title:"",type:"",theme:"#f00",volume:.7,isLive:!1,muted:!1,autoplay:!1,autoSize:!1,autoMini:!1,loop:!1,flip:!1,rotate:!1,playbackRate:!1,aspectRatio:!1,screenshot:!1,setting:!1,hotkey:!0,pip:!1,mutex:!0,backdrop:!0,fullscreen:!1,fullscreenWeb:!1,subtitleOffset:!1,miniProgressBar:!1,localVideo:!1,localSubtitle:!1,useSSR:!1,layers:[],contextmenu:[],controls:[],settings:[],quality:[],highlight:[],plugins:[],whitelist:[],thumbnails:{url:"",number:60,width:160,height:90,column:10},subtitle:{url:"",type:"",style:{},encoding:"utf-8",bilingual:!1},moreVideoAttr:{controls:!1,preload:h?"auto":"metadata"},icons:{},customType:{},lang:navigator.language.toLowerCase()}}}]),a}(d);return console.log("%c ArtPlayer %c 4.0.8 %c https://artplayer.org","color: #fff; background: #5f5f5f","color: #fff; background: #4bc729",""),tn}(),Bs={exports:{}};self;var Us=g(Bs.exports=function(){var e={"./node_modules/es6-promise/dist/es6-promise.js":function(e,t,n){
/*!
           * @overview es6-promise - a tiny implementation of Promises/A+.
           * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
           * @license   Licensed under MIT license
           *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
           * @version   v4.2.8+1e68dce6
           */
e.exports=function(){function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function t(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,i=void 0,a=void 0,s=function(e,t){_[o]=e,_[o+1]=t,2===(o+=2)&&(a?a(w):S())};function l(e){a=e}function u(e){s=e}var c="undefined"!=typeof window?window:void 0,d=c||{},f=d.MutationObserver||d.WebKitMutationObserver,p="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function m(){return function(){return process.nextTick(w)}}function g(){return void 0!==i?function(){i(w)}:b()}function v(){var e=0,t=new f(w),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function y(){var e=new MessageChannel;return e.port1.onmessage=w,function(){return e.port2.postMessage(0)}}function b(){var e=setTimeout;return function(){return e(w,1)}}var _=new Array(1e3);function w(){for(var e=0;e<o;e+=2)(0,_[e])(_[e+1]),_[e]=void 0,_[e+1]=void 0;o=0}function E(){try{var e=Function("return this")().require("vertx");return i=e.runOnLoop||e.runOnContext,g()}catch(t){return b()}}var S=void 0;function x(e,t){var n=this,r=new this.constructor(k);void 0===r[A]&&$(r);var o=n._state;if(o){var i=arguments[o-1];s((function(){return H(o,r,i,n._result)}))}else V(n,r,e,t);return r}function O(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(k);return N(n,e),n}S=p?m():f?v():h?y():void 0===c?E():b();var A=Math.random().toString(36).substring(2);function k(){}var P=void 0,T=1,L=2;function C(){return new TypeError("You cannot resolve a promise with itself")}function R(){return new TypeError("A promises callback cannot return that same promise.")}function M(e,t,n,r){try{e.call(t,n,r)}catch(o){return o}}function D(e,t,n){s((function(e){var r=!1,o=M(n,t,(function(n){r||(r=!0,t!==n?N(e,n):U(e,n))}),(function(t){r||(r=!0,F(e,t))}),"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,F(e,o))}),e)}function I(e,t){t._state===T?U(e,t._result):t._state===L?F(e,t._result):V(t,void 0,(function(t){return N(e,t)}),(function(t){return F(e,t)}))}function j(e,n,r){n.constructor===e.constructor&&r===x&&n.constructor.resolve===O?I(e,n):void 0===r?U(e,n):t(r)?D(e,n,r):U(e,n)}function N(t,n){if(t===n)F(t,C());else if(e(n)){var r=void 0;try{r=n.then}catch(o){return void F(t,o)}j(t,n,r)}else U(t,n)}function B(e){e._onerror&&e._onerror(e._result),z(e)}function U(e,t){e._state===P&&(e._result=t,e._state=T,0!==e._subscribers.length&&s(z,e))}function F(e,t){e._state===P&&(e._state=L,e._result=t,s(B,e))}function V(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+T]=n,o[i+L]=r,0===i&&e._state&&s(z,e)}function z(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,a=0;a<t.length;a+=3)r=t[a],o=t[a+n],r?H(n,r,o,i):o(i);e._subscribers.length=0}}function H(e,n,r,o){var i=t(r),a=void 0,s=void 0,l=!0;if(i){try{a=r(o)}catch(u){l=!1,s=u}if(n===a)return void F(n,R())}else a=o;n._state!==P||(i&&l?N(n,a):!1===l?F(n,s):e===T?U(n,a):e===L&&F(n,a))}function G(e,t){try{t((function(t){N(e,t)}),(function(t){F(e,t)}))}catch(n){F(e,n)}}var W=0;function K(){return W++}function $(e){e[A]=W++,e._state=void 0,e._result=void 0,e._subscribers=[]}function q(){return new Error("Array Methods must be provided an Array")}var Y=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(k),this.promise[A]||$(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?U(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&U(this.promise,this._result))):F(this.promise,q())}return e.prototype._enumerate=function(e){for(var t=0;this._state===P&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===O){var o=void 0,i=void 0,a=!1;try{o=e.then}catch(l){a=!0,i=l}if(o===x&&e._state!==P)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===te){var s=new n(k);a?F(s,i):j(s,e,o),this._willSettleAt(s,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===P&&(this._remaining--,e===L?F(r,n):this._result[t]=n),0===this._remaining&&U(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;V(e,void 0,(function(e){return n._settledAt(T,t,e)}),(function(e){return n._settledAt(L,t,e)}))},e}();function X(e){return new Y(this,e).promise}function Q(e){var t=this;return r(e)?new t((function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))}function Z(e){var t=new this(k);return F(t,e),t}function J(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ee(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var te=function(){function e(t){this[A]=K(),this._result=this._state=void 0,this._subscribers=[],k!==t&&("function"!=typeof t&&J(),this instanceof e?G(this,t):ee())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var n=this,r=n.constructor;return t(e)?n.then((function(t){return r.resolve(e()).then((function(){return t}))}),(function(t){return r.resolve(e()).then((function(){throw t}))})):n.then(e,e)},e}();function ne(){var e=void 0;if(void 0!==n.g)e=n.g;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(o){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(o){}if("[object Promise]"===r&&!t.cast)return}e.Promise=te}return te.prototype.then=x,te.all=X,te.race=Q,te.resolve=O,te.reject=Z,te._setScheduler=l,te._setAsap=u,te._asap=s,te.polyfill=ne,te.Promise=te,te}()},"./node_modules/events/events.js":function(e){var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(n,r){function o(n){e.removeListener(t,i),r(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}m(e,t,i,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&m(e,"error",t,n)}(e,o,{once:!0})}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var o,i,a,u;if(s(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]),void 0===a)a=i[t]=n,++e._eventsCount;else if("function"==typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(o=l(e))>0&&a.length>o&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,u=c,console&&console.warn&&console.warn(u)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=c.bind(r);return o.listener=n,r.wrapFn=o,o}function f(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):h(o,o.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(i){r.once&&e.removeEventListener(t,o),n(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)r(l,this,t);else{var u=l.length,c=h(l,u);for(n=0;n<u;++n)r(c[n],this,t)}return!0},i.prototype.addListener=function(e,t){return u(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return u(this,e,t,!0)},i.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,o,i,a;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return f(this,e,!0)},i.prototype.rawListeners=function(e){return f(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},i.prototype.listenerCount=p,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},"./node_modules/webworkify-webpack/index.js":function(e,t,n){function r(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var r=n(n.s=ENTRY_MODULE);return r.default||r}var o="[\\.|\\-|\\+|\\w|/|@]+",i="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function a(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(e,t,r){var s={};s[r]=[];var l=t.toString(),u=l.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!u)return s;for(var c,d=u[1],f=new RegExp("(\\\\n|\\W)"+a(d)+i,"g");c=f.exec(l);)"dll-reference"!==c[3]&&s[r].push(c[3]);for(f=new RegExp("\\("+a(d)+'\\("(dll-reference\\s('+o+'))"\\)\\)'+i,"g");c=f.exec(l);)e[c[2]]||(s[r].push(c[1]),e[c[2]]=n(c[1]).m),s[c[2]]=s[c[2]]||[],s[c[2]].push(c[4]);for(var p,h=Object.keys(s),m=0;m<h.length;m++)for(var g=0;g<s[h[m]].length;g++)p=s[h[m]][g],isNaN(1*p)||(s[h[m]][g]=1*s[h[m]][g]);return s}function l(e){return Object.keys(e).reduce((function(t,n){return t||e[n].length>0}),!1)}e.exports=function(e,t){t=t||{};var o={main:n.m},i=t.all?{main:Object.keys(o.main)}:function(e,t){for(var n={main:[t]},r={main:[]},o={main:{}};l(n);)for(var i=Object.keys(n),a=0;a<i.length;a++){var u=i[a],c=n[u].pop();if(o[u]=o[u]||{},!o[u][c]&&e[u][c]){o[u][c]=!0,r[u]=r[u]||[],r[u].push(c);for(var d=s(e,e[u][c],u),f=Object.keys(d),p=0;p<f.length;p++)n[f[p]]=n[f[p]]||[],n[f[p]]=n[f[p]].concat(d[f[p]])}}return r}(o,e),a="";Object.keys(i).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;i[e][t];)t++;i[e].push(t),o[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+e+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+i[e].map((function(t){return JSON.stringify(t)+": "+o[e][t].toString()})).join(",")+"});\n"})),a=a+"new (("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+i.main.map((function(e){return JSON.stringify(e)+": "+o.main[e].toString()})).join(",")+"}))(self);";var u=new window.Blob([a],{type:"text/javascript"});if(t.bare)return u;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(u),d=new window.Worker(c);return d.objectURL=c,d}},"./src/config.js":function(e,t,n){n.r(t),n.d(t,{defaultConfig:function(){return r},createDefaultConfig:function(){return o}});var r={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0};function o(){return Object.assign({},r)}},"./src/core/features.js":function(e,t,n){n.r(t);var r=n("./src/io/io-controller.js"),o=n("./src/config.js"),i=function(){function e(){}return e.supportMSEH264Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},e.supportNetworkStreamIO=function(){var e=new r.default({},(0,o.createDefaultConfig)()),t=e.loaderType;return e.destroy(),"fetch-stream-loader"==t||"xhr-moz-chunked-loader"==t},e.getNetworkLoaderTypeName=function(){var e=new r.default({},(0,o.createDefaultConfig)()),t=e.loaderType;return e.destroy(),t},e.supportNativeMediaPlayback=function(t){null==e.videoElement&&(e.videoElement=window.document.createElement("video"));var n=e.videoElement.canPlayType(t);return"probably"===n||"maybe"==n},e.getFeatureList=function(){var t={mseFlvPlayback:!1,mseLiveFlvPlayback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return t.mseFlvPlayback=e.supportMSEH264Playback(),t.networkStreamIO=e.supportNetworkStreamIO(),t.networkLoaderName=e.getNetworkLoaderTypeName(),t.mseLiveFlvPlayback=t.mseFlvPlayback&&t.networkStreamIO,t.nativeMP4H264Playback=e.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),t.nativeWebmVP8Playback=e.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),t.nativeWebmVP9Playback=e.supportNativeMediaPlayback('video/webm; codecs="vp9"'),t},e}();t.default=i},"./src/core/media-info.js":function(e,t,n){n.r(t);var r=function(){function e(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return e.prototype.isComplete=function(){var e=!1===this.hasAudio||!0===this.hasAudio&&null!=this.audioCodec&&null!=this.audioSampleRate&&null!=this.audioChannelCount,t=!1===this.hasVideo||!0===this.hasVideo&&null!=this.videoCodec&&null!=this.width&&null!=this.height&&null!=this.fps&&null!=this.profile&&null!=this.level&&null!=this.refFrames&&null!=this.chromaFormat&&null!=this.sarNum&&null!=this.sarDen;return null!=this.mimeType&&null!=this.duration&&null!=this.metadata&&null!=this.hasKeyframesIndex&&e&&t},e.prototype.isSeekable=function(){return!0===this.hasKeyframesIndex},e.prototype.getNearestKeyframe=function(e){if(null==this.keyframesIndex)return null;var t=this.keyframesIndex,n=this._search(t.times,e);return{index:n,milliseconds:t.times[n],fileposition:t.filepositions[n]}},e.prototype._search=function(e,t){var n=0,r=e.length-1,o=0,i=0,a=r;for(t<e[0]&&(n=0,i=a+1);i<=a;){if((o=i+Math.floor((a-i)/2))===r||t>=e[o]&&t<e[o+1]){n=o;break}e[o]<t?i=o+1:a=o-1}return n},e}();t.default=r},"./src/core/media-segment-info.js":function(e,t,n){n.r(t),n.d(t,{SampleInfo:function(){return r},MediaSegmentInfo:function(){return o},IDRSampleList:function(){return i},MediaSegmentInfoList:function(){return a}});var r=function(e,t,n,r,o){this.dts=e,this.pts=t,this.duration=n,this.originalDts=r,this.isSyncPoint=o,this.fileposition=null},o=function(){function e(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return e.prototype.appendSyncPoint=function(e){e.isSyncPoint=!0,this.syncPoints.push(e)},e}(),i=function(){function e(){this._list=[]}return e.prototype.clear=function(){this._list=[]},e.prototype.appendArray=function(e){var t=this._list;0!==e.length&&(t.length>0&&e[0].originalDts<t[t.length-1].originalDts&&this.clear(),Array.prototype.push.apply(t,e))},e.prototype.getLastSyncPointBeforeDts=function(e){if(0==this._list.length)return null;var t=this._list,n=0,r=t.length-1,o=0,i=0,a=r;for(e<t[0].dts&&(n=0,i=a+1);i<=a;){if((o=i+Math.floor((a-i)/2))===r||e>=t[o].dts&&e<t[o+1].dts){n=o;break}t[o].dts<e?i=o+1:a=o-1}return this._list[n]},e}(),a=function(){function e(e){this._type=e,this._list=[],this._lastAppendLocation=-1}return Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return 0===this._list.length},e.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},e.prototype._searchNearestSegmentBefore=function(e){var t=this._list;if(0===t.length)return-2;var n=t.length-1,r=0,o=0,i=n,a=0;if(e<t[0].originalBeginDts)return a=-1;for(;o<=i;){if((r=o+Math.floor((i-o)/2))===n||e>t[r].lastSample.originalDts&&e<t[r+1].originalBeginDts){a=r;break}t[r].originalBeginDts<e?o=r+1:i=r-1}return a},e.prototype._searchNearestSegmentAfter=function(e){return this._searchNearestSegmentBefore(e)+1},e.prototype.append=function(e){var t=this._list,n=e,r=this._lastAppendLocation,o=0;-1!==r&&r<t.length&&n.originalBeginDts>=t[r].lastSample.originalDts&&(r===t.length-1||r<t.length-1&&n.originalBeginDts<t[r+1].originalBeginDts)?o=r+1:t.length>0&&(o=this._searchNearestSegmentBefore(n.originalBeginDts)+1),this._lastAppendLocation=o,this._list.splice(o,0,n)},e.prototype.getLastSegmentBefore=function(e){var t=this._searchNearestSegmentBefore(e);return t>=0?this._list[t]:null},e.prototype.getLastSampleBefore=function(e){var t=this.getLastSegmentBefore(e);return null!=t?t.lastSample:null},e.prototype.getLastSyncPointBefore=function(e){for(var t=this._searchNearestSegmentBefore(e),n=this._list[t].syncPoints;0===n.length&&t>0;)t--,n=this._list[t].syncPoints;return n.length>0?n[n.length-1]:null},e}()},"./src/core/mse-controller.js":function(e,t,n){n.r(t);var r=n("./node_modules/events/events.js"),o=n.n(r),i=n("./src/utils/logger.js"),a=n("./src/utils/browser.js"),s=n("./src/core/mse-events.js"),l=n("./src/core/media-segment-info.js"),u=n("./src/utils/exception.js"),c=function(){function e(e){this.TAG="MSEController",this._config=e,this._emitter=new(o()),this._config.isLive&&null==this._config.autoCleanupSourceBuffer&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new l.IDRSampleList}return e.prototype.destroy=function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null},e.prototype.on=function(e,t){this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.attachMediaElement=function(e){if(this._mediaSource)throw new u.IllegalStateException("MediaSource has been attached to an HTMLMediaElement!");var t=this._mediaSource=new window.MediaSource;t.addEventListener("sourceopen",this.e.onSourceOpen),t.addEventListener("sourceended",this.e.onSourceEnded),t.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=e,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),e.src=this._mediaSourceObjectURL},e.prototype.detachMediaElement=function(){if(this._mediaSource){var e=this._mediaSource;for(var t in this._sourceBuffers){var n=this._pendingSegments[t];n.splice(0,n.length),this._pendingSegments[t]=null,this._pendingRemoveRanges[t]=null,this._lastInitSegments[t]=null;var r=this._sourceBuffers[t];if(r){if("closed"!==e.readyState){try{e.removeSourceBuffer(r)}catch(o){i.default.e(this.TAG,o.message)}r.removeEventListener("error",this.e.onSourceBufferError),r.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[t]=null,this._sourceBuffers[t]=null}}if("open"===e.readyState)try{e.endOfStream()}catch(o){i.default.e(this.TAG,o.message)}e.removeEventListener("sourceopen",this.e.onSourceOpen),e.removeEventListener("sourceended",this.e.onSourceEnded),e.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},e.prototype.appendInitSegment=function(e,t){if(!this._mediaSource||"open"!==this._mediaSource.readyState)return this._pendingSourceBufferInit.push(e),void this._pendingSegments[e.type].push(e);var n=e,r=""+n.container;n.codec&&n.codec.length>0&&(r+=";codecs="+n.codec);var o=!1;if(i.default.v(this.TAG,"Received Initialization Segment, mimeType: "+r),this._lastInitSegments[n.type]=n,r!==this._mimeTypes[n.type]){if(this._mimeTypes[n.type])i.default.v(this.TAG,"Notice: "+n.type+" mimeType changed, origin: "+this._mimeTypes[n.type]+", target: "+r);else{o=!0;try{var l=this._sourceBuffers[n.type]=this._mediaSource.addSourceBuffer(r);l.addEventListener("error",this.e.onSourceBufferError),l.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(u){return i.default.e(this.TAG,u.message),void this._emitter.emit(s.default.ERROR,{code:u.code,msg:u.message})}}this._mimeTypes[n.type]=r}t||this._pendingSegments[n.type].push(n),o||this._sourceBuffers[n.type]&&!this._sourceBuffers[n.type].updating&&this._doAppendSegments(),a.default.safari&&"audio/mpeg"===n.container&&n.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=n.mediaDuration/1e3,this._updateMediaSourceDuration())},e.prototype.appendMediaSegment=function(e){var t=e;this._pendingSegments[t.type].push(t),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();var n=this._sourceBuffers[t.type];!n||n.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()},e.prototype.seek=function(e){for(var t in this._sourceBuffers)if(this._sourceBuffers[t]){var n=this._sourceBuffers[t];if("open"===this._mediaSource.readyState)try{n.abort()}catch(c){i.default.e(this.TAG,c.message)}this._idrList.clear();var r=this._pendingSegments[t];if(r.splice(0,r.length),"closed"!==this._mediaSource.readyState){for(var o=0;o<n.buffered.length;o++){var s=n.buffered.start(o),l=n.buffered.end(o);this._pendingRemoveRanges[t].push({start:s,end:l})}if(n.updating||this._doRemoveRanges(),a.default.safari){var u=this._lastInitSegments[t];u&&(this._pendingSegments[t].push(u),n.updating||this._doAppendSegments())}}}},e.prototype.endOfStream=function(){var e=this._mediaSource,t=this._sourceBuffers;e&&"open"===e.readyState?t.video&&t.video.updating||t.audio&&t.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,e.endOfStream()):e&&"closed"===e.readyState&&this._hasPendingSegments()&&(this._hasPendingEos=!0)},e.prototype.getNearestKeyframe=function(e){return this._idrList.getLastSyncPointBeforeDts(e)},e.prototype._needCleanupSourceBuffer=function(){if(!this._config.autoCleanupSourceBuffer)return!1;var e=this._mediaElement.currentTime;for(var t in this._sourceBuffers){var n=this._sourceBuffers[t];if(n){var r=n.buffered;if(r.length>=1&&e-r.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1},e.prototype._doCleanupSourceBuffer=function(){var e=this._mediaElement.currentTime;for(var t in this._sourceBuffers){var n=this._sourceBuffers[t];if(n){for(var r=n.buffered,o=!1,i=0;i<r.length;i++){var a=r.start(i),s=r.end(i);if(a<=e&&e<s+3){if(e-a>=this._config.autoCleanupMaxBackwardDuration){o=!0;var l=e-this._config.autoCleanupMinBackwardDuration;this._pendingRemoveRanges[t].push({start:a,end:l})}}else s<e&&(o=!0,this._pendingRemoveRanges[t].push({start:a,end:s}))}o&&!n.updating&&this._doRemoveRanges()}}},e.prototype._updateMediaSourceDuration=function(){var e=this._sourceBuffers;if(0!==this._mediaElement.readyState&&"open"===this._mediaSource.readyState&&!(e.video&&e.video.updating||e.audio&&e.audio.updating)){var t=this._mediaSource.duration,n=this._pendingMediaDuration;n>0&&(isNaN(t)||n>t)&&(i.default.v(this.TAG,"Update MediaSource duration from "+t+" to "+n),this._mediaSource.duration=n),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}},e.prototype._doRemoveRanges=function(){for(var e in this._pendingRemoveRanges)if(this._sourceBuffers[e]&&!this._sourceBuffers[e].updating)for(var t=this._sourceBuffers[e],n=this._pendingRemoveRanges[e];n.length&&!t.updating;){var r=n.shift();t.remove(r.start,r.end)}},e.prototype._doAppendSegments=function(){var e=this._pendingSegments;for(var t in e)if(this._sourceBuffers[t]&&!this._sourceBuffers[t].updating&&e[t].length>0){var n=e[t].shift();if(n.timestampOffset){var r=this._sourceBuffers[t].timestampOffset,o=n.timestampOffset/1e3;Math.abs(r-o)>.1&&(i.default.v(this.TAG,"Update MPEG audio timestampOffset from "+r+" to "+o),this._sourceBuffers[t].timestampOffset=o),delete n.timestampOffset}if(!n.data||0===n.data.byteLength)continue;try{this._sourceBuffers[t].appendBuffer(n.data),this._isBufferFull=!1,"video"===t&&n.hasOwnProperty("info")&&this._idrList.appendArray(n.info.syncPoints)}catch(a){this._pendingSegments[t].unshift(n),22===a.code?(this._isBufferFull||this._emitter.emit(s.default.BUFFER_FULL),this._isBufferFull=!0):(i.default.e(this.TAG,a.message),this._emitter.emit(s.default.ERROR,{code:a.code,msg:a.message}))}}},e.prototype._onSourceOpen=function(){if(i.default.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0)for(var e=this._pendingSourceBufferInit;e.length;){var t=e.shift();this.appendInitSegment(t,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(s.default.SOURCE_OPEN)},e.prototype._onSourceEnded=function(){i.default.v(this.TAG,"MediaSource onSourceEnded")},e.prototype._onSourceClose=function(){i.default.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&null!=this.e&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))},e.prototype._hasPendingSegments=function(){var e=this._pendingSegments;return e.video.length>0||e.audio.length>0},e.prototype._hasPendingRemoveRanges=function(){var e=this._pendingRemoveRanges;return e.video.length>0||e.audio.length>0},e.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(s.default.UPDATE_END)},e.prototype._onSourceBufferError=function(e){i.default.e(this.TAG,"SourceBuffer Error: "+e)},e}();t.default=c},"./src/core/mse-events.js":function(e,t,n){n.r(t),t.default={ERROR:"error",SOURCE_OPEN:"source_open",UPDATE_END:"update_end",BUFFER_FULL:"buffer_full"}},"./src/core/transmuxer.js":function(e,t,n){n.r(t);var r=n("./node_modules/events/events.js"),o=n.n(r),i=n("./node_modules/webworkify-webpack/index.js"),a=n.n(i),s=n("./src/utils/logger.js"),l=n("./src/utils/logging-control.js"),u=n("./src/core/transmuxing-controller.js"),c=n("./src/core/transmuxing-events.js"),d=n("./src/core/media-info.js"),f=function(){function e(e,t){if(this.TAG="Transmuxer",this._emitter=new(o()),t.enableWorker&&"undefined"!=typeof Worker)try{this._worker=a()("./src/core/transmuxing-worker.js"),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[e,t]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},l.default.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:l.default.getConfig()})}catch(r){s.default.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new u.default(e,t)}else this._controller=new u.default(e,t);if(this._controller){var n=this._controller;n.on(c.default.IO_ERROR,this._onIOError.bind(this)),n.on(c.default.DEMUX_ERROR,this._onDemuxError.bind(this)),n.on(c.default.INIT_SEGMENT,this._onInitSegment.bind(this)),n.on(c.default.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),n.on(c.default.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),n.on(c.default.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),n.on(c.default.MEDIA_INFO,this._onMediaInfo.bind(this)),n.on(c.default.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),n.on(c.default.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),n.on(c.default.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),n.on(c.default.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this))}}return e.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),l.default.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null},e.prototype.on=function(e,t){this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.hasWorker=function(){return null!=this._worker},e.prototype.open=function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()},e.prototype.close=function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()},e.prototype.seek=function(e){this._worker?this._worker.postMessage({cmd:"seek",param:e}):this._controller.seek(e)},e.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()},e.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()},e.prototype._onInitSegment=function(e,t){var n=this;Promise.resolve().then((function(){n._emitter.emit(c.default.INIT_SEGMENT,e,t)}))},e.prototype._onMediaSegment=function(e,t){var n=this;Promise.resolve().then((function(){n._emitter.emit(c.default.MEDIA_SEGMENT,e,t)}))},e.prototype._onLoadingComplete=function(){var e=this;Promise.resolve().then((function(){e._emitter.emit(c.default.LOADING_COMPLETE)}))},e.prototype._onRecoveredEarlyEof=function(){var e=this;Promise.resolve().then((function(){e._emitter.emit(c.default.RECOVERED_EARLY_EOF)}))},e.prototype._onMediaInfo=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(c.default.MEDIA_INFO,e)}))},e.prototype._onMetaDataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(c.default.METADATA_ARRIVED,e)}))},e.prototype._onScriptDataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(c.default.SCRIPTDATA_ARRIVED,e)}))},e.prototype._onStatisticsInfo=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(c.default.STATISTICS_INFO,e)}))},e.prototype._onIOError=function(e,t){var n=this;Promise.resolve().then((function(){n._emitter.emit(c.default.IO_ERROR,e,t)}))},e.prototype._onDemuxError=function(e,t){var n=this;Promise.resolve().then((function(){n._emitter.emit(c.default.DEMUX_ERROR,e,t)}))},e.prototype._onRecommendSeekpoint=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(c.default.RECOMMEND_SEEKPOINT,e)}))},e.prototype._onLoggingConfigChanged=function(e){this._worker&&this._worker.postMessage({cmd:"logging_config",param:e})},e.prototype._onWorkerMessage=function(e){var t=e.data,n=t.data;if("destroyed"===t.msg||this._workerDestroying)return this._workerDestroying=!1,this._worker.terminate(),void(this._worker=null);switch(t.msg){case c.default.INIT_SEGMENT:case c.default.MEDIA_SEGMENT:this._emitter.emit(t.msg,n.type,n.data);break;case c.default.LOADING_COMPLETE:case c.default.RECOVERED_EARLY_EOF:this._emitter.emit(t.msg);break;case c.default.MEDIA_INFO:Object.setPrototypeOf(n,d.default.prototype),this._emitter.emit(t.msg,n);break;case c.default.METADATA_ARRIVED:case c.default.SCRIPTDATA_ARRIVED:case c.default.STATISTICS_INFO:this._emitter.emit(t.msg,n);break;case c.default.IO_ERROR:case c.default.DEMUX_ERROR:this._emitter.emit(t.msg,n.type,n.info);break;case c.default.RECOMMEND_SEEKPOINT:this._emitter.emit(t.msg,n);break;case"logcat_callback":s.default.emitter.emit("log",n.type,n.logcat)}},e}();t.default=f},"./src/core/transmuxing-controller.js":function(e,t,n){n.r(t);var r=n("./node_modules/events/events.js"),o=n.n(r),i=n("./src/utils/logger.js"),a=n("./src/utils/browser.js"),s=n("./src/core/media-info.js"),l=n("./src/demux/flv-demuxer.js"),u=n("./src/remux/mp4-remuxer.js"),c=n("./src/demux/demux-errors.js"),d=n("./src/io/io-controller.js"),f=n("./src/core/transmuxing-events.js"),p=function(){function e(e,t){this.TAG="TransmuxingController",this._emitter=new(o()),this._config=t,e.segments||(e.segments=[{duration:e.duration,filesize:e.filesize,url:e.url}]),"boolean"!=typeof e.cors&&(e.cors=!0),"boolean"!=typeof e.withCredentials&&(e.withCredentials=!1),this._mediaDataSource=e,this._currentSegmentIndex=0;var n=0;this._mediaDataSource.segments.forEach((function(r){r.timestampBase=n,n+=r.duration,r.cors=e.cors,r.withCredentials=e.withCredentials,t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy)})),isNaN(n)||this._mediaDataSource.duration===n||(this._mediaDataSource.duration=n),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}return e.prototype.destroy=function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null},e.prototype.on=function(e,t){this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},e.prototype._loadSegment=function(e,t){this._currentSegmentIndex=e;var n=this._mediaDataSource.segments[e],r=this._ioctl=new d.default(n,this._config,e);r.onError=this._onIOException.bind(this),r.onSeeked=this._onIOSeeked.bind(this),r.onComplete=this._onIOComplete.bind(this),r.onRedirect=this._onIORedirect.bind(this),r.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),t?this._demuxer.bindDataSource(this._ioctl):r.onDataArrival=this._onInitChunkArrival.bind(this),r.open(t)},e.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},e.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},e.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},e.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},e.prototype.seek=function(e){if(null!=this._mediaInfo&&this._mediaInfo.isSeekable()){var t=this._searchSegmentIndexContains(e);if(t===this._currentSegmentIndex){var n=this._mediaInfo.segments[t];if(null==n)this._pendingSeekTime=e;else{var r=n.getNearestKeyframe(e);this._remuxer.seek(r.milliseconds),this._ioctl.seek(r.fileposition),this._pendingResolveSeekPoint=r.milliseconds}}else{var o=this._mediaInfo.segments[t];null==o?(this._pendingSeekTime=e,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(t)):(r=o.getNearestKeyframe(e),this._internalAbort(),this._remuxer.seek(e),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[t].timestampBase,this._loadSegment(t,r.fileposition),this._pendingResolveSeekPoint=r.milliseconds,this._reportSegmentMediaInfo(t))}this._enableStatisticsReporter()}},e.prototype._searchSegmentIndexContains=function(e){for(var t=this._mediaDataSource.segments,n=t.length-1,r=0;r<t.length;r++)if(e<t[r].timestampBase){n=r-1;break}return n},e.prototype._onInitChunkArrival=function(e,t){var n=this,r=null,o=0;if(t>0)this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,o=this._demuxer.parseChunks(e,t);else if((r=l.default.probe(e)).match){this._demuxer=new l.default(r,this._config),this._remuxer||(this._remuxer=new u.default(this._config));var a=this._mediaDataSource;null==a.duration||isNaN(a.duration)||(this._demuxer.overridedDuration=a.duration),"boolean"==typeof a.hasAudio&&(this._demuxer.overridedHasAudio=a.hasAudio),"boolean"==typeof a.hasVideo&&(this._demuxer.overridedHasVideo=a.hasVideo),this._demuxer.timestampBase=a.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this),o=this._demuxer.parseChunks(e,t)}else r=null,i.default.e(this.TAG,"Non-FLV, Unsupported media type!"),Promise.resolve().then((function(){n._internalAbort()})),this._emitter.emit(f.default.DEMUX_ERROR,c.default.FORMAT_UNSUPPORTED,"Non-FLV, Unsupported media type"),o=0;return o},e.prototype._onMediaInfo=function(e){var t=this;null==this._mediaInfo&&(this._mediaInfo=Object.assign({},e),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,s.default.prototype));var n=Object.assign({},e);Object.setPrototypeOf(n,s.default.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=n,this._reportSegmentMediaInfo(this._currentSegmentIndex),null!=this._pendingSeekTime&&Promise.resolve().then((function(){var e=t._pendingSeekTime;t._pendingSeekTime=null,t.seek(e)}))},e.prototype._onMetaDataArrived=function(e){this._emitter.emit(f.default.METADATA_ARRIVED,e)},e.prototype._onScriptDataArrived=function(e){this._emitter.emit(f.default.SCRIPTDATA_ARRIVED,e)},e.prototype._onIOSeeked=function(){this._remuxer.insertDiscontinuity()},e.prototype._onIOComplete=function(e){var t=e+1;t<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer.flushStashedSamples(),this._loadSegment(t)):(this._remuxer.flushStashedSamples(),this._emitter.emit(f.default.LOADING_COMPLETE),this._disableStatisticsReporter())},e.prototype._onIORedirect=function(e){var t=this._ioctl.extraData;this._mediaDataSource.segments[t].redirectedURL=e},e.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(f.default.RECOVERED_EARLY_EOF)},e.prototype._onIOException=function(e,t){i.default.e(this.TAG,"IOException: type = "+e+", code = "+t.code+", msg = "+t.msg),this._emitter.emit(f.default.IO_ERROR,e,t),this._disableStatisticsReporter()},e.prototype._onDemuxException=function(e,t){i.default.e(this.TAG,"DemuxException: type = "+e+", info = "+t),this._emitter.emit(f.default.DEMUX_ERROR,e,t)},e.prototype._onRemuxerInitSegmentArrival=function(e,t){this._emitter.emit(f.default.INIT_SEGMENT,e,t)},e.prototype._onRemuxerMediaSegmentArrival=function(e,t){if(null==this._pendingSeekTime&&(this._emitter.emit(f.default.MEDIA_SEGMENT,e,t),null!=this._pendingResolveSeekPoint&&"video"===e)){var n=t.info.syncPoints,r=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,a.default.safari&&n.length>0&&n[0].originalDts===r&&(r=n[0].pts),this._emitter.emit(f.default.RECOMMEND_SEEKPOINT,r)}},e.prototype._enableStatisticsReporter=function(){null==this._statisticsReporter&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},e.prototype._disableStatisticsReporter=function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},e.prototype._reportSegmentMediaInfo=function(e){var t=this._mediaInfo.segments[e],n=Object.assign({},t);n.duration=this._mediaInfo.duration,n.segmentCount=this._mediaInfo.segmentCount,delete n.segments,delete n.keyframesIndex,this._emitter.emit(f.default.MEDIA_INFO,n)},e.prototype._reportStatisticsInfo=function(){var e={};e.url=this._ioctl.currentURL,e.hasRedirect=this._ioctl.hasRedirect,e.hasRedirect&&(e.redirectedURL=this._ioctl.currentRedirectedURL),e.speed=this._ioctl.currentSpeed,e.loaderType=this._ioctl.loaderType,e.currentSegmentIndex=this._currentSegmentIndex,e.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(f.default.STATISTICS_INFO,e)},e}();t.default=p},"./src/core/transmuxing-events.js":function(e,t,n){n.r(t),t.default={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"}},"./src/core/transmuxing-worker.js":function(e,t,n){n.r(t);var r=n("./src/utils/logging-control.js"),o=n("./src/utils/polyfill.js"),i=n("./src/core/transmuxing-controller.js"),a=n("./src/core/transmuxing-events.js");t.default=function(e){var t=null,n=function(t,n){e.postMessage({msg:"logcat_callback",data:{type:t,logcat:n}})}.bind(this);function s(t,n){var r={msg:a.default.INIT_SEGMENT,data:{type:t,data:n}};e.postMessage(r,[n.data])}function l(t,n){var r={msg:a.default.MEDIA_SEGMENT,data:{type:t,data:n}};e.postMessage(r,[n.data])}function u(){var t={msg:a.default.LOADING_COMPLETE};e.postMessage(t)}function c(){var t={msg:a.default.RECOVERED_EARLY_EOF};e.postMessage(t)}function d(t){var n={msg:a.default.MEDIA_INFO,data:t};e.postMessage(n)}function f(t){var n={msg:a.default.METADATA_ARRIVED,data:t};e.postMessage(n)}function p(t){var n={msg:a.default.SCRIPTDATA_ARRIVED,data:t};e.postMessage(n)}function h(t){var n={msg:a.default.STATISTICS_INFO,data:t};e.postMessage(n)}function m(t,n){e.postMessage({msg:a.default.IO_ERROR,data:{type:t,info:n}})}function g(t,n){e.postMessage({msg:a.default.DEMUX_ERROR,data:{type:t,info:n}})}function v(t){e.postMessage({msg:a.default.RECOMMEND_SEEKPOINT,data:t})}o.default.install(),e.addEventListener("message",(function(o){switch(o.data.cmd){case"init":(t=new i.default(o.data.param[0],o.data.param[1])).on(a.default.IO_ERROR,m.bind(this)),t.on(a.default.DEMUX_ERROR,g.bind(this)),t.on(a.default.INIT_SEGMENT,s.bind(this)),t.on(a.default.MEDIA_SEGMENT,l.bind(this)),t.on(a.default.LOADING_COMPLETE,u.bind(this)),t.on(a.default.RECOVERED_EARLY_EOF,c.bind(this)),t.on(a.default.MEDIA_INFO,d.bind(this)),t.on(a.default.METADATA_ARRIVED,f.bind(this)),t.on(a.default.SCRIPTDATA_ARRIVED,p.bind(this)),t.on(a.default.STATISTICS_INFO,h.bind(this)),t.on(a.default.RECOMMEND_SEEKPOINT,v.bind(this));break;case"destroy":t&&(t.destroy(),t=null),e.postMessage({msg:"destroyed"});break;case"start":t.start();break;case"stop":t.stop();break;case"seek":t.seek(o.data.param);break;case"pause":t.pause();break;case"resume":t.resume();break;case"logging_config":var y=o.data.param;r.default.applyConfig(y),!0===y.enableCallback?r.default.addLogListener(n):r.default.removeLogListener(n)}}))}},"./src/demux/amf-parser.js":function(e,t,n){n.r(t);var r,o=n("./src/utils/logger.js"),i=n("./src/utils/utf8-conv.js"),a=n("./src/utils/exception.js"),s=(r=new ArrayBuffer(2),new DataView(r).setInt16(0,256,!0),256===new Int16Array(r)[0]),l=function(){function e(){}return e.parseScriptData=function(t,n,r){var i={};try{var a=e.parseValue(t,n,r),s=e.parseValue(t,n+a.size,r-a.size);i[a.data]=s.data}catch(l){o.default.e("AMF",l.toString())}return i},e.parseObject=function(t,n,r){if(r<3)throw new a.IllegalStateException("Data not enough when parse ScriptDataObject");var o=e.parseString(t,n,r),i=e.parseValue(t,n+o.size,r-o.size),s=i.objectEnd;return{data:{name:o.data,value:i.data},size:o.size+i.size,objectEnd:s}},e.parseVariable=function(t,n,r){return e.parseObject(t,n,r)},e.parseString=function(e,t,n){if(n<2)throw new a.IllegalStateException("Data not enough when parse String");var r=new DataView(e,t,n).getUint16(0,!s);return{data:r>0?(0,i.default)(new Uint8Array(e,t+2,r)):"",size:2+r}},e.parseLongString=function(e,t,n){if(n<4)throw new a.IllegalStateException("Data not enough when parse LongString");var r=new DataView(e,t,n).getUint32(0,!s);return{data:r>0?(0,i.default)(new Uint8Array(e,t+4,r)):"",size:4+r}},e.parseDate=function(e,t,n){if(n<10)throw new a.IllegalStateException("Data size invalid when parse Date");var r=new DataView(e,t,n),o=r.getFloat64(0,!s),i=r.getInt16(8,!s);return{data:new Date(o+=60*i*1e3),size:10}},e.parseValue=function(t,n,r){if(r<1)throw new a.IllegalStateException("Data not enough when parse Value");var i,l=new DataView(t,n,r),u=1,c=l.getUint8(0),d=!1;try{switch(c){case 0:i=l.getFloat64(1,!s),u+=8;break;case 1:i=!!l.getUint8(1),u+=1;break;case 2:var f=e.parseString(t,n+1,r-1);i=f.data,u+=f.size;break;case 3:i={};var p=0;for(9==(16777215&l.getUint32(r-4,!s))&&(p=3);u<r-4;){var h=e.parseObject(t,n+u,r-u-p);if(h.objectEnd)break;i[h.data.name]=h.data.value,u+=h.size}u<=r-3&&9==(16777215&l.getUint32(u-1,!s))&&(u+=3);break;case 8:for(i={},u+=4,p=0,9==(16777215&l.getUint32(r-4,!s))&&(p=3);u<r-8;){var m=e.parseVariable(t,n+u,r-u-p);if(m.objectEnd)break;i[m.data.name]=m.data.value,u+=m.size}u<=r-3&&9==(16777215&l.getUint32(u-1,!s))&&(u+=3);break;case 9:i=void 0,u=1,d=!0;break;case 10:i=[];var g=l.getUint32(1,!s);u+=4;for(var v=0;v<g;v++){var y=e.parseValue(t,n+u,r-u);i.push(y.data),u+=y.size}break;case 11:var b=e.parseDate(t,n+1,r-1);i=b.data,u+=b.size;break;case 12:var _=e.parseString(t,n+1,r-1);i=_.data,u+=_.size;break;default:u=r,o.default.w("AMF","Unsupported AMF value type "+c)}}catch(w){o.default.e("AMF",w.toString())}return{data:i,size:u,objectEnd:d}},e}();t.default=l},"./src/demux/demux-errors.js":function(e,t,n){n.r(t),t.default={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"}},"./src/demux/exp-golomb.js":function(e,t,n){n.r(t);var r=n("./src/utils/exception.js"),o=function(){function e(e){this.TAG="ExpGolomb",this._buffer=e,this._buffer_index=0,this._total_bytes=e.byteLength,this._total_bits=8*e.byteLength,this._current_word=0,this._current_word_bits_left=0}return e.prototype.destroy=function(){this._buffer=null},e.prototype._fillCurrentWord=function(){var e=this._total_bytes-this._buffer_index;if(e<=0)throw new r.IllegalStateException("ExpGolomb: _fillCurrentWord() but no bytes available");var t=Math.min(4,e),n=new Uint8Array(4);n.set(this._buffer.subarray(this._buffer_index,this._buffer_index+t)),this._current_word=new DataView(n.buffer).getUint32(0,!1),this._buffer_index+=t,this._current_word_bits_left=8*t},e.prototype.readBits=function(e){if(e>32)throw new r.InvalidArgumentException("ExpGolomb: readBits() bits exceeded max 32bits!");if(e<=this._current_word_bits_left){var t=this._current_word>>>32-e;return this._current_word<<=e,this._current_word_bits_left-=e,t}var n=this._current_word_bits_left?this._current_word:0;n>>>=32-this._current_word_bits_left;var o=e-this._current_word_bits_left;this._fillCurrentWord();var i=Math.min(o,this._current_word_bits_left),a=this._current_word>>>32-i;return this._current_word<<=i,this._current_word_bits_left-=i,n=n<<i|a},e.prototype.readBool=function(){return 1===this.readBits(1)},e.prototype.readByte=function(){return this.readBits(8)},e.prototype._skipLeadingZero=function(){var e;for(e=0;e<this._current_word_bits_left;e++)if(0!=(this._current_word&2147483648>>>e))return this._current_word<<=e,this._current_word_bits_left-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()},e.prototype.readUEG=function(){var e=this._skipLeadingZero();return this.readBits(e+1)-1},e.prototype.readSEG=function(){var e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)},e}();t.default=o},"./src/demux/flv-demuxer.js":function(e,t,n){n.r(t);var r=n("./src/utils/logger.js"),o=n("./src/demux/amf-parser.js"),i=n("./src/demux/sps-parser.js"),a=n("./src/demux/demux-errors.js"),s=n("./src/core/media-info.js"),l=n("./src/utils/exception.js"),u=function(){function e(e,t){var n;this.TAG="FLVDemuxer",this._config=t,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=e.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=e.hasAudioTrack,this._hasVideo=e.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new s.default,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=(n=new ArrayBuffer(2),new DataView(n).setInt16(0,256,!0),256===new Int16Array(n)[0])}return e.prototype.destroy=function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null},e.probe=function(e){var t=new Uint8Array(e),n={match:!1};if(70!==t[0]||76!==t[1]||86!==t[2]||1!==t[3])return n;var r,o,i=(4&t[4])>>>2!=0,a=0!=(1&t[4]),s=(r=t)[o=5]<<24|r[o+1]<<16|r[o+2]<<8|r[o+3];return s<9?n:{match:!0,consumed:s,dataOffset:s,hasAudioTrack:i,hasVideoTrack:a}},e.prototype.bindDataSource=function(e){return e.onDataArrival=this.parseChunks.bind(this),this},Object.defineProperty(e.prototype,"onTrackMetadata",{get:function(){return this._onTrackMetadata},set:function(e){this._onTrackMetadata=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onMediaInfo",{get:function(){return this._onMediaInfo},set:function(e){this._onMediaInfo=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onMetaDataArrived",{get:function(){return this._onMetaDataArrived},set:function(e){this._onMetaDataArrived=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onScriptDataArrived",{get:function(){return this._onScriptDataArrived},set:function(e){this._onScriptDataArrived=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDataAvailable",{get:function(){return this._onDataAvailable},set:function(e){this._onDataAvailable=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(e){this._timestampBase=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overridedDuration",{get:function(){return this._duration},set:function(e){this._durationOverrided=!0,this._duration=e,this._mediaInfo.duration=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overridedHasAudio",{set:function(e){this._hasAudioFlagOverrided=!0,this._hasAudio=e,this._mediaInfo.hasAudio=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overridedHasVideo",{set:function(e){this._hasVideoFlagOverrided=!0,this._hasVideo=e,this._mediaInfo.hasVideo=e},enumerable:!1,configurable:!0}),e.prototype.resetMediaInfo=function(){this._mediaInfo=new s.default},e.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched},e.prototype.parseChunks=function(t,n){if(!(this._onError&&this._onMediaInfo&&this._onTrackMetadata&&this._onDataAvailable))throw new l.IllegalStateException("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var o=0,i=this._littleEndian;if(0===n){if(!(t.byteLength>13))return 0;o=e.probe(t).dataOffset}for(this._firstParse&&(this._firstParse=!1,n+o!==this._dataOffset&&r.default.w(this.TAG,"First time parsing but chunk byteStart invalid!"),0!==(a=new DataView(t,o)).getUint32(0,!i)&&r.default.w(this.TAG,"PrevTagSize0 !== 0 !!!"),o+=4);o<t.byteLength;){this._dispatch=!0;var a=new DataView(t,o);if(o+11+4>t.byteLength)break;var s=a.getUint8(0),u=16777215&a.getUint32(0,!i);if(o+11+u+4>t.byteLength)break;if(8===s||9===s||18===s){var c=a.getUint8(4),d=a.getUint8(5),f=a.getUint8(6)|d<<8|c<<16|a.getUint8(7)<<24;0!=(16777215&a.getUint32(7,!i))&&r.default.w(this.TAG,"Meet tag which has StreamID != 0!");var p=o+11;switch(s){case 8:this._parseAudioData(t,p,u,f);break;case 9:this._parseVideoData(t,p,u,f,n+o);break;case 18:this._parseScriptData(t,p,u)}var h=a.getUint32(11+u,!i);h!==11+u&&r.default.w(this.TAG,"Invalid PrevTagSize "+h),o+=11+u+4}else r.default.w(this.TAG,"Unsupported tag type "+s+", skipped"),o+=11+u+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),o},e.prototype._parseScriptData=function(e,t,n){var i=o.default.parseScriptData(e,t,n);if(i.hasOwnProperty("onMetaData")){if(null==i.onMetaData||"object"!=typeof i.onMetaData)return void r.default.w(this.TAG,"Invalid onMetaData structure!");this._metadata&&r.default.w(this.TAG,"Found another onMetaData tag!"),this._metadata=i;var a=this._metadata.onMetaData;if(this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},a)),"boolean"==typeof a.hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=a.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),"boolean"==typeof a.hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=a.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),"number"==typeof a.audiodatarate&&(this._mediaInfo.audioDataRate=a.audiodatarate),"number"==typeof a.videodatarate&&(this._mediaInfo.videoDataRate=a.videodatarate),"number"==typeof a.width&&(this._mediaInfo.width=a.width),"number"==typeof a.height&&(this._mediaInfo.height=a.height),"number"==typeof a.duration){if(!this._durationOverrided){var s=Math.floor(a.duration*this._timescale);this._duration=s,this._mediaInfo.duration=s}}else this._mediaInfo.duration=0;if("number"==typeof a.framerate){var l=Math.floor(1e3*a.framerate);if(l>0){var u=l/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=u,this._referenceFrameRate.fps_num=l,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=u}}if("object"==typeof a.keyframes){this._mediaInfo.hasKeyframesIndex=!0;var c=a.keyframes;this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(c),a.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;this._dispatch=!1,this._mediaInfo.metadata=a,r.default.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}Object.keys(i).length>0&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},i))},e.prototype._parseKeyframesIndex=function(e){for(var t=[],n=[],r=1;r<e.times.length;r++){var o=this._timestampBase+Math.floor(1e3*e.times[r]);t.push(o),n.push(e.filepositions[r])}return{times:t,filepositions:n}},e.prototype._parseAudioData=function(e,t,n,o){if(n<=1)r.default.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");else if(!0!==this._hasAudioFlagOverrided||!1!==this._hasAudio){this._littleEndian;var i=new DataView(e,t,n).getUint8(0),s=i>>>4;if(2===s||10===s){var l=0,u=(12&i)>>>2;if(u>=0&&u<=4){l=this._flvSoundRateTable[u];var c=1&i,d=this._audioMetadata,f=this._audioTrack;if(d||(!1===this._hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(d=this._audioMetadata={}).type="audio",d.id=f.id,d.timescale=this._timescale,d.duration=this._duration,d.audioSampleRate=l,d.channelCount=0===c?1:2),10===s){var p=this._parseAACAudioData(e,t+1,n-1);if(null==p)return;if(0===p.packetType){d.config&&r.default.w(this.TAG,"Found another AudioSpecificConfig!");var h=p.data;d.audioSampleRate=h.samplingRate,d.channelCount=h.channelCount,d.codec=h.codec,d.originalCodec=h.originalCodec,d.config=h.config,d.refSampleDuration=1024/d.audioSampleRate*d.timescale,r.default.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",d),(v=this._mediaInfo).audioCodec=d.originalCodec,v.audioSampleRate=d.audioSampleRate,v.audioChannelCount=d.channelCount,v.hasVideo?null!=v.videoCodec&&(v.mimeType='video/x-flv; codecs="'+v.videoCodec+","+v.audioCodec+'"'):v.mimeType='video/x-flv; codecs="'+v.audioCodec+'"',v.isComplete()&&this._onMediaInfo(v)}else if(1===p.packetType){var m=this._timestampBase+o,g={unit:p.data,length:p.data.byteLength,dts:m,pts:m};f.samples.push(g),f.length+=p.data.length}else r.default.e(this.TAG,"Flv: Unsupported AAC data type "+p.packetType)}else if(2===s){if(!d.codec){var v;if(null==(h=this._parseMP3AudioData(e,t+1,n-1,!0)))return;d.audioSampleRate=h.samplingRate,d.channelCount=h.channelCount,d.codec=h.codec,d.originalCodec=h.originalCodec,d.refSampleDuration=1152/d.audioSampleRate*d.timescale,r.default.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",d),(v=this._mediaInfo).audioCodec=d.codec,v.audioSampleRate=d.audioSampleRate,v.audioChannelCount=d.channelCount,v.audioDataRate=h.bitRate,v.hasVideo?null!=v.videoCodec&&(v.mimeType='video/x-flv; codecs="'+v.videoCodec+","+v.audioCodec+'"'):v.mimeType='video/x-flv; codecs="'+v.audioCodec+'"',v.isComplete()&&this._onMediaInfo(v)}var y=this._parseMP3AudioData(e,t+1,n-1,!1);if(null==y)return;m=this._timestampBase+o;var b={unit:y,length:y.byteLength,dts:m,pts:m};f.samples.push(b),f.length+=y.length}}else this._onError(a.default.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+u)}else this._onError(a.default.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+s)}},e.prototype._parseAACAudioData=function(e,t,n){if(!(n<=1)){var o={},i=new Uint8Array(e,t,n);return o.packetType=i[0],0===i[0]?o.data=this._parseAACAudioSpecificConfig(e,t+1,n-1):o.data=i.subarray(1),o}r.default.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!")},e.prototype._parseAACAudioSpecificConfig=function(e,t,n){var r,o,i=new Uint8Array(e,t,n),s=null,l=0,u=null;if(l=r=i[0]>>>3,(o=(7&i[0])<<1|i[1]>>>7)<0||o>=this._mpegSamplingRates.length)this._onError(a.default.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");else{var c=this._mpegSamplingRates[o],d=(120&i[1])>>>3;if(!(d<0||d>=8)){5===l&&(u=(7&i[1])<<1|i[2]>>>7,i[2]);var f=self.navigator.userAgent.toLowerCase();return-1!==f.indexOf("firefox")?o>=6?(l=5,s=new Array(4),u=o-3):(l=2,s=new Array(2),u=o):-1!==f.indexOf("android")?(l=2,s=new Array(2),u=o):(l=5,u=o,s=new Array(4),o>=6?u=o-3:1===d&&(l=2,s=new Array(2),u=o)),s[0]=l<<3,s[0]|=(15&o)>>>1,s[1]=(15&o)<<7,s[1]|=(15&d)<<3,5===l&&(s[1]|=(15&u)>>>1,s[2]=(1&u)<<7,s[2]|=8,s[3]=0),{config:s,samplingRate:c,channelCount:d,codec:"mp4a.40."+l,originalCodec:"mp4a.40."+r}}this._onError(a.default.FORMAT_ERROR,"Flv: AAC invalid channel configuration")}},e.prototype._parseMP3AudioData=function(e,t,n,o){if(!(n<4)){this._littleEndian;var i=new Uint8Array(e,t,n),a=null;if(o){if(255!==i[0])return;var s=i[1]>>>3&3,l=(6&i[1])>>1,u=(240&i[2])>>>4,c=(12&i[2])>>>2,d=3!=(i[3]>>>6&3)?2:1,f=0,p=0;switch(s){case 0:f=this._mpegAudioV25SampleRateTable[c];break;case 2:f=this._mpegAudioV20SampleRateTable[c];break;case 3:f=this._mpegAudioV10SampleRateTable[c]}switch(l){case 1:u<this._mpegAudioL3BitRateTable.length&&(p=this._mpegAudioL3BitRateTable[u]);break;case 2:u<this._mpegAudioL2BitRateTable.length&&(p=this._mpegAudioL2BitRateTable[u]);break;case 3:u<this._mpegAudioL1BitRateTable.length&&(p=this._mpegAudioL1BitRateTable[u])}a={bitRate:p,samplingRate:f,channelCount:d,codec:"mp3",originalCodec:"mp3"}}else a=i;return a}r.default.w(this.TAG,"Flv: Invalid MP3 packet, header missing!")},e.prototype._parseVideoData=function(e,t,n,o,i){if(n<=1)r.default.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");else if(!0!==this._hasVideoFlagOverrided||!1!==this._hasVideo){var s=new Uint8Array(e,t,n)[0],l=(240&s)>>>4,u=15&s;7===u?this._parseAVCVideoPacket(e,t+1,n-1,o,i,l):this._onError(a.default.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+u)}},e.prototype._parseAVCVideoPacket=function(e,t,n,o,i,s){if(n<4)r.default.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");else{var l=this._littleEndian,u=new DataView(e,t,n),c=u.getUint8(0),d=(16777215&u.getUint32(0,!l))<<8>>8;if(0===c)this._parseAVCDecoderConfigurationRecord(e,t+4,n-4);else if(1===c)this._parseAVCVideoData(e,t+4,n-4,o,i,s,d);else if(2!==c)return void this._onError(a.default.FORMAT_ERROR,"Flv: Invalid video packet type "+c)}},e.prototype._parseAVCDecoderConfigurationRecord=function(e,t,n){if(n<7)r.default.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");else{var o=this._videoMetadata,s=this._videoTrack,l=this._littleEndian,u=new DataView(e,t,n);o?void 0!==o.avcc&&r.default.w(this.TAG,"Found another AVCDecoderConfigurationRecord!"):(!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(o=this._videoMetadata={}).type="video",o.id=s.id,o.timescale=this._timescale,o.duration=this._duration);var c=u.getUint8(0),d=u.getUint8(1);if(u.getUint8(2),u.getUint8(3),1===c&&0!==d)if(this._naluLengthSize=1+(3&u.getUint8(4)),3===this._naluLengthSize||4===this._naluLengthSize){var f=31&u.getUint8(5);if(0!==f){f>1&&r.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = "+f);for(var p=6,h=0;h<f;h++){var m=u.getUint16(p,!l);if(p+=2,0!==m){var g=new Uint8Array(e,t+p,m);p+=m;var v=i.default.parseSPS(g);if(0===h){o.codecWidth=v.codec_size.width,o.codecHeight=v.codec_size.height,o.presentWidth=v.present_size.width,o.presentHeight=v.present_size.height,o.profile=v.profile_string,o.level=v.level_string,o.bitDepth=v.bit_depth,o.chromaFormat=v.chroma_format,o.sarRatio=v.sar_ratio,o.frameRate=v.frame_rate,!1!==v.frame_rate.fixed&&0!==v.frame_rate.fps_num&&0!==v.frame_rate.fps_den||(o.frameRate=this._referenceFrameRate);var y=o.frameRate.fps_den,b=o.frameRate.fps_num;o.refSampleDuration=o.timescale*(y/b);for(var _=g.subarray(1,4),w="avc1.",E=0;E<3;E++){var S=_[E].toString(16);S.length<2&&(S="0"+S),w+=S}o.codec=w;var x=this._mediaInfo;x.width=o.codecWidth,x.height=o.codecHeight,x.fps=o.frameRate.fps,x.profile=o.profile,x.level=o.level,x.refFrames=v.ref_frames,x.chromaFormat=v.chroma_format_string,x.sarNum=o.sarRatio.width,x.sarDen=o.sarRatio.height,x.videoCodec=w,x.hasAudio?null!=x.audioCodec&&(x.mimeType='video/x-flv; codecs="'+x.videoCodec+","+x.audioCodec+'"'):x.mimeType='video/x-flv; codecs="'+x.videoCodec+'"',x.isComplete()&&this._onMediaInfo(x)}}}var O=u.getUint8(p);if(0!==O){for(O>1&&r.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = "+O),p++,h=0;h<O;h++)m=u.getUint16(p,!l),p+=2,0!==m&&(p+=m);o.avcc=new Uint8Array(n),o.avcc.set(new Uint8Array(e,t,n),0),r.default.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",o)}else this._onError(a.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS")}else this._onError(a.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS")}else this._onError(a.default.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));else this._onError(a.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord")}},e.prototype._parseAVCVideoData=function(e,t,n,o,i,a,s){for(var l=this._littleEndian,u=new DataView(e,t,n),c=[],d=0,f=0,p=this._naluLengthSize,h=this._timestampBase+o,m=1===a;f<n;){if(f+4>=n){r.default.w(this.TAG,"Malformed Nalu near timestamp "+h+", offset = "+f+", dataSize = "+n);break}var g=u.getUint32(f,!l);if(3===p&&(g>>>=8),g>n-p)return void r.default.w(this.TAG,"Malformed Nalus near timestamp "+h+", NaluSize > DataSize!");var v=31&u.getUint8(f+p);5===v&&(m=!0);var y=new Uint8Array(e,t+f,p+g),b={type:v,data:y};c.push(b),d+=y.byteLength,f+=p+g}if(c.length){var _=this._videoTrack,w={units:c,length:d,isKeyframe:m,dts:h,cts:s,pts:h+s};m&&(w.fileposition=i),_.samples.push(w),_.length+=d}},e}();t.default=u},"./src/demux/sps-parser.js":function(e,t,n){n.r(t);var r=n("./src/demux/exp-golomb.js"),o=function(){function e(){}return e._ebsp2rbsp=function(e){for(var t=e,n=t.byteLength,r=new Uint8Array(n),o=0,i=0;i<n;i++)i>=2&&3===t[i]&&0===t[i-1]&&0===t[i-2]||(r[o]=t[i],o++);return new Uint8Array(r.buffer,0,o)},e.parseSPS=function(t){var n=e._ebsp2rbsp(t),o=new r.default(n);o.readByte();var i=o.readByte();o.readByte();var a=o.readByte();o.readUEG();var s=e.getProfileString(i),l=e.getLevelString(a),u=1,c=420,d=8;if((100===i||110===i||122===i||244===i||44===i||83===i||86===i||118===i||128===i||138===i||144===i)&&(3===(u=o.readUEG())&&o.readBits(1),u<=3&&(c=[0,420,422,444][u]),d=o.readUEG()+8,o.readUEG(),o.readBits(1),o.readBool()))for(var f=3!==u?8:12,p=0;p<f;p++)o.readBool()&&(p<6?e._skipScalingList(o,16):e._skipScalingList(o,64));o.readUEG();var h=o.readUEG();if(0===h)o.readUEG();else if(1===h){o.readBits(1),o.readSEG(),o.readSEG();var m=o.readUEG();for(p=0;p<m;p++)o.readSEG()}var g=o.readUEG();o.readBits(1);var v=o.readUEG(),y=o.readUEG(),b=o.readBits(1);0===b&&o.readBits(1),o.readBits(1);var _=0,w=0,E=0,S=0;o.readBool()&&(_=o.readUEG(),w=o.readUEG(),E=o.readUEG(),S=o.readUEG());var x=1,O=1,A=0,k=!0,P=0,T=0;if(o.readBool()){if(o.readBool()){var L=o.readByte();L>0&&L<16?(x=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][L-1],O=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][L-1]):255===L&&(x=o.readByte()<<8|o.readByte(),O=o.readByte()<<8|o.readByte())}if(o.readBool()&&o.readBool(),o.readBool()&&(o.readBits(4),o.readBool()&&o.readBits(24)),o.readBool()&&(o.readUEG(),o.readUEG()),o.readBool()){var C=o.readBits(32),R=o.readBits(32);k=o.readBool(),A=(P=R)/(T=2*C)}}var M=1;1===x&&1===O||(M=x/O);var D=0,I=0;0===u?(D=1,I=2-b):(D=3===u?1:2,I=(1===u?2:1)*(2-b));var j=16*(v+1),N=16*(y+1)*(2-b);j-=(_+w)*D,N-=(E+S)*I;var B=Math.ceil(j*M);return o.destroy(),o=null,{profile_string:s,level_string:l,bit_depth:d,ref_frames:g,chroma_format:c,chroma_format_string:e.getChromaFormatString(c),frame_rate:{fixed:k,fps:A,fps_den:T,fps_num:P},sar_ratio:{width:x,height:O},codec_size:{width:j,height:N},present_size:{width:B,height:N}}},e._skipScalingList=function(e,t){for(var n=8,r=8,o=0;o<t;o++)0!==r&&(r=(n+e.readSEG()+256)%256),n=0===r?n:r},e.getProfileString=function(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},e.getLevelString=function(e){return(e/10).toFixed(1)},e.getChromaFormatString=function(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},e}();t.default=o},"./src/flv.js":function(e,t,n){n.r(t);var r=n("./src/utils/polyfill.js"),o=n("./src/core/features.js"),i=n("./src/io/loader.js"),a=n("./src/player/flv-player.js"),s=n("./src/player/native-player.js"),l=n("./src/player/player-events.js"),u=n("./src/player/player-errors.js"),c=n("./src/utils/logging-control.js"),d=n("./src/utils/exception.js");r.default.install();var f={createPlayer:function(e,t){var n=e;if(null==n||"object"!=typeof n)throw new d.InvalidArgumentException("MediaDataSource must be an javascript object!");if(!n.hasOwnProperty("type"))throw new d.InvalidArgumentException("MediaDataSource must has type field to indicate video file type!");switch(n.type){case"flv":return new a.default(n,t);default:return new s.default(n,t)}},isSupported:function(){return o.default.supportMSEH264Playback()},getFeatureList:function(){return o.default.getFeatureList()}};f.BaseLoader=i.BaseLoader,f.LoaderStatus=i.LoaderStatus,f.LoaderErrors=i.LoaderErrors,f.Events=l.default,f.ErrorTypes=u.ErrorTypes,f.ErrorDetails=u.ErrorDetails,f.FlvPlayer=a.default,f.NativePlayer=s.default,f.LoggingControl=c.default,Object.defineProperty(f,"version",{enumerable:!0,get:function(){return"1.6.2"}}),t.default=f},"./src/index.js":function(e,t,n){e.exports=n("./src/flv.js").default},"./src/io/fetch-stream-loader.js":function(e,t,n){n.r(t);var r,o=n("./src/utils/browser.js"),i=n("./src/io/loader.js"),a=n("./src/utils/exception.js"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t,n){var r=e.call(this,"fetch-stream-loader")||this;return r.TAG="FetchStreamLoader",r._seekHandler=t,r._config=n,r._needStash=!0,r._requestAbort=!1,r._contentLength=null,r._receivedLength=0,r}return s(t,e),t.isSupported=function(){try{var e=o.default.msedge&&o.default.version.minor>=15048,t=!o.default.msedge||e;return self.fetch&&self.ReadableStream&&t}catch(n){return!1}},t.prototype.destroy=function(){this.isWorking()&&this.abort(),e.prototype.destroy.call(this)},t.prototype.open=function(e,t){var n=this;this._dataSource=e,this._range=t;var r=e.url;this._config.reuseRedirectedURL&&null!=e.redirectedURL&&(r=e.redirectedURL);var o=this._seekHandler.getConfig(r,t),s=new self.Headers;if("object"==typeof o.headers){var l=o.headers;for(var u in l)l.hasOwnProperty(u)&&s.append(u,l[u])}var c={method:"GET",headers:s,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if("object"==typeof this._config.headers)for(var u in this._config.headers)s.append(u,this._config.headers[u]);!1===e.cors&&(c.mode="same-origin"),e.withCredentials&&(c.credentials="include"),e.referrerPolicy&&(c.referrerPolicy=e.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,c.signal=this._abortController.signal),this._status=i.LoaderStatus.kConnecting,self.fetch(o.url,c).then((function(e){if(n._requestAbort)return n._status=i.LoaderStatus.kIdle,void e.body.cancel();if(e.ok&&e.status>=200&&e.status<=299){if(e.url!==o.url&&n._onURLRedirect){var t=n._seekHandler.removeURLParameters(e.url);n._onURLRedirect(t)}var r=e.headers.get("Content-Length");return null!=r&&(n._contentLength=parseInt(r),0!==n._contentLength&&n._onContentLengthKnown&&n._onContentLengthKnown(n._contentLength)),n._pump.call(n,e.body.getReader())}if(n._status=i.LoaderStatus.kError,!n._onError)throw new a.RuntimeException("FetchStreamLoader: Http code invalid, "+e.status+" "+e.statusText);n._onError(i.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})})).catch((function(e){if(!n._abortController||!n._abortController.signal.aborted){if(n._status=i.LoaderStatus.kError,!n._onError)throw e;n._onError(i.LoaderErrors.EXCEPTION,{code:-1,msg:e.message})}}))},t.prototype.abort=function(){if(this._requestAbort=!0,(this._status!==i.LoaderStatus.kBuffering||!o.default.chrome)&&this._abortController)try{this._abortController.abort()}catch(e){}},t.prototype._pump=function(e){var t=this;return e.read().then((function(n){if(n.done)if(null!==t._contentLength&&t._receivedLength<t._contentLength){t._status=i.LoaderStatus.kError;var r=i.LoaderErrors.EARLY_EOF,o={code:-1,msg:"Fetch stream meet Early-EOF"};if(!t._onError)throw new a.RuntimeException(o.msg);t._onError(r,o)}else t._status=i.LoaderStatus.kComplete,t._onComplete&&t._onComplete(t._range.from,t._range.from+t._receivedLength-1);else{if(t._abortController&&t._abortController.signal.aborted)return void(t._status=i.LoaderStatus.kComplete);if(!0===t._requestAbort)return t._status=i.LoaderStatus.kComplete,e.cancel();t._status=i.LoaderStatus.kBuffering;var s=n.value.buffer,l=t._range.from+t._receivedLength;t._receivedLength+=s.byteLength,t._onDataArrival&&t._onDataArrival(s,l,t._receivedLength),t._pump(e)}})).catch((function(e){if(t._abortController&&t._abortController.signal.aborted)t._status=i.LoaderStatus.kComplete;else if(11!==e.code||!o.default.msedge){t._status=i.LoaderStatus.kError;var n=0,r=null;if(19!==e.code&&"network error"!==e.message||!(null===t._contentLength||null!==t._contentLength&&t._receivedLength<t._contentLength)?(n=i.LoaderErrors.EXCEPTION,r={code:e.code,msg:e.message}):(n=i.LoaderErrors.EARLY_EOF,r={code:e.code,msg:"Fetch stream meet Early-EOF"}),!t._onError)throw new a.RuntimeException(r.msg);t._onError(n,r)}}))},t}(i.BaseLoader);t.default=l},"./src/io/io-controller.js":function(e,t,n){n.r(t);var r=n("./src/utils/logger.js"),o=n("./src/io/speed-sampler.js"),i=n("./src/io/loader.js"),a=n("./src/io/fetch-stream-loader.js"),s=n("./src/io/xhr-moz-chunked-loader.js"),l=n("./src/io/xhr-range-loader.js"),u=n("./src/io/websocket-loader.js"),c=n("./src/io/range-seek-handler.js"),d=n("./src/io/param-seek-handler.js"),f=n("./src/utils/exception.js"),p=function(){function e(e,t,n){this.TAG="IOController",this._config=t,this._extraData=n,this._stashInitialSize=393216,null!=t.stashInitialSize&&t.stashInitialSize>0&&(this._stashInitialSize=t.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=3145728,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,!1===t.enableStashBuffer&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=e,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(e.url),this._refTotalLength=e.filesize?e.filesize:null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new o.default,this._speedNormalizeList=[64,128,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}return e.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null},e.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},e.prototype.isPaused=function(){return this._paused},Object.defineProperty(e.prototype,"status",{get:function(){return this._loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"extraData",{get:function(){return this._extraData},set:function(e){this._extraData=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onSeeked",{get:function(){return this._onSeeked},set:function(e){this._onSeeked=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onComplete",{get:function(){return this._onComplete},set:function(e){this._onComplete=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onRedirect",{get:function(){return this._onRedirect},set:function(e){this._onRedirect=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onRecoveredEarlyEof",{get:function(){return this._onRecoveredEarlyEof},set:function(e){this._onRecoveredEarlyEof=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentURL",{get:function(){return this._dataSource.url},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasRedirect",{get:function(){return null!=this._redirectedURL||null!=this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentRedirectedURL",{get:function(){return this._redirectedURL||this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentSpeed",{get:function(){return this._loaderClass===l.default?this._loader.currentSpeed:this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loaderType",{get:function(){return this._loader.type},enumerable:!1,configurable:!0}),e.prototype._selectSeekHandler=function(){var e=this._config;if("range"===e.seekType)this._seekHandler=new c.default(this._config.rangeLoadZeroStart);else if("param"===e.seekType){var t=e.seekParamStart||"bstart",n=e.seekParamEnd||"bend";this._seekHandler=new d.default(t,n)}else{if("custom"!==e.seekType)throw new f.InvalidArgumentException("Invalid seekType in config: "+e.seekType);if("function"!=typeof e.customSeekHandler)throw new f.InvalidArgumentException("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new e.customSeekHandler}},e.prototype._selectLoader=function(){if(null!=this._config.customLoader)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=u.default;else if(a.default.isSupported())this._loaderClass=a.default;else if(s.default.isSupported())this._loaderClass=s.default;else{if(!l.default.isSupported())throw new f.RuntimeException("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=l.default}},e.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),!1===this._loader.needStashBuffer&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)},e.prototype.open=function(e){this._currentRange={from:0,to:-1},e&&(this._currentRange.from=e),this._speedSampler.reset(),e||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))},e.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},e.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),0!==this._stashUsed?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},e.prototype.resume=function(){if(this._paused){this._paused=!1;var e=this._resumeFrom;this._resumeFrom=0,this._internalSeek(e,!0)}},e.prototype.seek=function(e){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(e,!0)},e.prototype._internalSeek=function(e,t){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(t),this._loader.destroy(),this._loader=null;var n={from:e,to:-1};this._currentRange={from:n.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,n),this._onSeeked&&this._onSeeked()},e.prototype.updateUrl=function(e){if(!e||"string"!=typeof e||0===e.length)throw new f.InvalidArgumentException("Url must be a non-empty string!");this._dataSource.url=e},e.prototype._expandBuffer=function(e){for(var t=this._stashSize;t+1048576<e;)t*=2;if((t+=1048576)!==this._bufferSize){var n=new ArrayBuffer(t);if(this._stashUsed>0){var r=new Uint8Array(this._stashBuffer,0,this._stashUsed);new Uint8Array(n,0,t).set(r,0)}this._stashBuffer=n,this._bufferSize=t}},e.prototype._normalizeSpeed=function(e){var t=this._speedNormalizeList,n=t.length-1,r=0,o=0,i=n;if(e<t[0])return t[0];for(;o<=i;){if((r=o+Math.floor((i-o)/2))===n||e>=t[r]&&e<t[r+1])return t[r];t[r]<e?o=r+1:i=r-1}},e.prototype._adjustStashSize=function(e){var t=0;(t=this._config.isLive||e<512?e:e>=512&&e<=1024?Math.floor(1.5*e):2*e)>8192&&(t=8192);var n=1024*t+1048576;this._bufferSize<n&&this._expandBuffer(n),this._stashSize=1024*t},e.prototype._dispatchChunks=function(e,t){return this._currentRange.to=t+e.byteLength-1,this._onDataArrival(e,t)},e.prototype._onURLRedirect=function(e){this._redirectedURL=e,this._onRedirect&&this._onRedirect(e)},e.prototype._onContentLengthKnown=function(e){e&&this._fullRequestFlag&&(this._totalLength=e,this._fullRequestFlag=!1)},e.prototype._onLoaderChunkArrival=function(e,t,n){if(!this._onDataArrival)throw new f.IllegalStateException("IOController: No existing consumer (onDataArrival) callback!");if(!this._paused){this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),this._speedSampler.addBytes(e.byteLength);var r=this._speedSampler.lastSecondKBps;if(0!==r){var o=this._normalizeSpeed(r);this._speedNormalized!==o&&(this._speedNormalized=o,this._adjustStashSize(o))}if(this._enableStash)if(0===this._stashUsed&&0===this._stashByteStart&&(this._stashByteStart=t),this._stashUsed+e.byteLength<=this._stashSize)(s=new Uint8Array(this._stashBuffer,0,this._stashSize)).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength;else if(s=new Uint8Array(this._stashBuffer,0,this._bufferSize),this._stashUsed>0){var i=this._stashBuffer.slice(0,this._stashUsed);(l=this._dispatchChunks(i,this._stashByteStart))<i.byteLength?l>0&&(u=new Uint8Array(i,l),s.set(u,0),this._stashUsed=u.byteLength,this._stashByteStart+=l):(this._stashUsed=0,this._stashByteStart+=l),this._stashUsed+e.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+e.byteLength),s=new Uint8Array(this._stashBuffer,0,this._bufferSize)),s.set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength}else(l=this._dispatchChunks(e,t))<e.byteLength&&((a=e.byteLength-l)>this._bufferSize&&(this._expandBuffer(a),s=new Uint8Array(this._stashBuffer,0,this._bufferSize)),s.set(new Uint8Array(e,l),0),this._stashUsed+=a,this._stashByteStart=t+l);else if(0===this._stashUsed){var a;(l=this._dispatchChunks(e,t))<e.byteLength&&((a=e.byteLength-l)>this._bufferSize&&this._expandBuffer(a),(s=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(e,l),0),this._stashUsed+=a,this._stashByteStart=t+l)}else{var s,l;if(this._stashUsed+e.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+e.byteLength),(s=new Uint8Array(this._stashBuffer,0,this._bufferSize)).set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength,(l=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart))<this._stashUsed&&l>0){var u=new Uint8Array(this._stashBuffer,l);s.set(u,0)}this._stashUsed-=l,this._stashByteStart+=l}}},e.prototype._flushStashBuffer=function(e){if(this._stashUsed>0){var t=this._stashBuffer.slice(0,this._stashUsed),n=this._dispatchChunks(t,this._stashByteStart),o=t.byteLength-n;if(n<t.byteLength){if(!e){if(n>0){var i=new Uint8Array(this._stashBuffer,0,this._bufferSize),a=new Uint8Array(t,n);i.set(a,0),this._stashUsed=a.byteLength,this._stashByteStart+=n}return 0}r.default.w(this.TAG,o+" bytes unconsumed data remain when flush buffer, dropped")}return this._stashUsed=0,this._stashByteStart=0,o}return 0},e.prototype._onLoaderComplete=function(e,t){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},e.prototype._onLoaderError=function(e,t){switch(r.default.e(this.TAG,"Loader error, code = "+t.code+", msg = "+t.msg),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,e=i.LoaderErrors.UNRECOVERABLE_EARLY_EOF),e){case i.LoaderErrors.EARLY_EOF:if(!this._config.isLive&&this._totalLength){var n=this._currentRange.to+1;return void(n<this._totalLength&&(r.default.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(n,!1)))}e=i.LoaderErrors.UNRECOVERABLE_EARLY_EOF;break;case i.LoaderErrors.UNRECOVERABLE_EARLY_EOF:case i.LoaderErrors.CONNECTING_TIMEOUT:case i.LoaderErrors.HTTP_STATUS_CODE_INVALID:case i.LoaderErrors.EXCEPTION:}if(!this._onError)throw new f.RuntimeException("IOException: "+t.msg);this._onError(e,t)},e}();t.default=p},"./src/io/loader.js":function(e,t,n){n.r(t),n.d(t,{LoaderStatus:function(){return o},LoaderErrors:function(){return i},BaseLoader:function(){return a}});var r=n("./src/utils/exception.js"),o={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},i={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},a=function(){function e(e){this._type=e||"undefined",this._status=o.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}return e.prototype.destroy=function(){this._status=o.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},e.prototype.isWorking=function(){return this._status===o.kConnecting||this._status===o.kBuffering},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"needStashBuffer",{get:function(){return this._needStash},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onContentLengthKnown",{get:function(){return this._onContentLengthKnown},set:function(e){this._onContentLengthKnown=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onURLRedirect",{get:function(){return this._onURLRedirect},set:function(e){this._onURLRedirect=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onComplete",{get:function(){return this._onComplete},set:function(e){this._onComplete=e},enumerable:!1,configurable:!0}),e.prototype.open=function(e,t){throw new r.NotImplementedException("Unimplemented abstract function!")},e.prototype.abort=function(){throw new r.NotImplementedException("Unimplemented abstract function!")},e}()},"./src/io/param-seek-handler.js":function(e,t,n){n.r(t);var r=function(){function e(e,t){this._startName=e,this._endName=t}return e.prototype.getConfig=function(e,t){var n=e;if(0!==t.from||-1!==t.to){var r=!0;-1===n.indexOf("?")&&(n+="?",r=!1),r&&(n+="&"),n+=this._startName+"="+t.from.toString(),-1!==t.to&&(n+="&"+this._endName+"="+t.to.toString())}return{url:n,headers:{}}},e.prototype.removeURLParameters=function(e){var t=e.split("?")[0],n=void 0,r=e.indexOf("?");-1!==r&&(n=e.substring(r+1));var o="";if(null!=n&&n.length>0)for(var i=n.split("&"),a=0;a<i.length;a++){var s=i[a].split("="),l=a>0;s[0]!==this._startName&&s[0]!==this._endName&&(l&&(o+="&"),o+=i[a])}return 0===o.length?t:t+"?"+o},e}();t.default=r},"./src/io/range-seek-handler.js":function(e,t,n){n.r(t);var r=function(){function e(e){this._zeroStart=e||!1}return e.prototype.getConfig=function(e,t){var n={};if(0!==t.from||-1!==t.to){var r=void 0;r=-1!==t.to?"bytes="+t.from.toString()+"-"+t.to.toString():"bytes="+t.from.toString()+"-",n.Range=r}else this._zeroStart&&(n.Range="bytes=0-");return{url:e,headers:n}},e.prototype.removeURLParameters=function(e){return e},e}();t.default=r},"./src/io/speed-sampler.js":function(e,t,n){n.r(t);var r=function(){function e(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}return e.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},e.prototype.addBytes=function(e){0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=e,this._totalBytes+=e):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=e,this._totalBytes+=e):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=e,this._totalBytes+=e,this._lastCheckpoint=this._now())},Object.defineProperty(e.prototype,"currentKBps",{get:function(){this.addBytes(0);var e=(this._now()-this._lastCheckpoint)/1e3;return 0==e&&(e=1),this._intervalBytes/e/1024},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),0!==this._lastSecondBytes?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"averageKBps",{get:function(){var e=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/e/1024},enumerable:!1,configurable:!0}),e}();t.default=r},"./src/io/websocket-loader.js":function(e,t,n){n.r(t);var r,o=n("./src/io/loader.js"),i=n("./src/utils/exception.js"),a=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e){function t(){var t=e.call(this,"websocket-loader")||this;return t.TAG="WebSocketLoader",t._needStash=!0,t._ws=null,t._requestAbort=!1,t._receivedLength=0,t}return a(t,e),t.isSupported=function(){try{return void 0!==self.WebSocket}catch(e){return!1}},t.prototype.destroy=function(){this._ws&&this.abort(),e.prototype.destroy.call(this)},t.prototype.open=function(e){try{var t=this._ws=new self.WebSocket(e.url);t.binaryType="arraybuffer",t.onopen=this._onWebSocketOpen.bind(this),t.onclose=this._onWebSocketClose.bind(this),t.onmessage=this._onWebSocketMessage.bind(this),t.onerror=this._onWebSocketError.bind(this),this._status=o.LoaderStatus.kConnecting}catch(r){this._status=o.LoaderStatus.kError;var n={code:r.code,msg:r.message};if(!this._onError)throw new i.RuntimeException(n.msg);this._onError(o.LoaderErrors.EXCEPTION,n)}},t.prototype.abort=function(){var e=this._ws;!e||0!==e.readyState&&1!==e.readyState||(this._requestAbort=!0,e.close()),this._ws=null,this._status=o.LoaderStatus.kComplete},t.prototype._onWebSocketOpen=function(e){this._status=o.LoaderStatus.kBuffering},t.prototype._onWebSocketClose=function(e){!0!==this._requestAbort?(this._status=o.LoaderStatus.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)):this._requestAbort=!1},t.prototype._onWebSocketMessage=function(e){var t=this;if(e.data instanceof ArrayBuffer)this._dispatchArrayBuffer(e.data);else if(e.data instanceof Blob){var n=new FileReader;n.onload=function(){t._dispatchArrayBuffer(n.result)},n.readAsArrayBuffer(e.data)}else{this._status=o.LoaderStatus.kError;var r={code:-1,msg:"Unsupported WebSocket message type: "+e.data.constructor.name};if(!this._onError)throw new i.RuntimeException(r.msg);this._onError(o.LoaderErrors.EXCEPTION,r)}},t.prototype._dispatchArrayBuffer=function(e){var t=e,n=this._receivedLength;this._receivedLength+=t.byteLength,this._onDataArrival&&this._onDataArrival(t,n,this._receivedLength)},t.prototype._onWebSocketError=function(e){this._status=o.LoaderStatus.kError;var t={code:e.code,msg:e.message};if(!this._onError)throw new i.RuntimeException(t.msg);this._onError(o.LoaderErrors.EXCEPTION,t)},t}(o.BaseLoader);t.default=s},"./src/io/xhr-moz-chunked-loader.js":function(e,t,n){n.r(t);var r,o=n("./src/utils/logger.js"),i=n("./src/io/loader.js"),a=n("./src/utils/exception.js"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t,n){var r=e.call(this,"xhr-moz-chunked-loader")||this;return r.TAG="MozChunkedLoader",r._seekHandler=t,r._config=n,r._needStash=!0,r._xhr=null,r._requestAbort=!1,r._contentLength=null,r._receivedLength=0,r}return s(t,e),t.isSupported=function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),e.responseType="moz-chunked-arraybuffer","moz-chunked-arraybuffer"===e.responseType}catch(t){return o.default.w("MozChunkedLoader",t.message),!1}},t.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),e.prototype.destroy.call(this)},t.prototype.open=function(e,t){this._dataSource=e,this._range=t;var n=e.url;this._config.reuseRedirectedURL&&null!=e.redirectedURL&&(n=e.redirectedURL);var r=this._seekHandler.getConfig(n,t);this._requestURL=r.url;var o=this._xhr=new XMLHttpRequest;if(o.open("GET",r.url,!0),o.responseType="moz-chunked-arraybuffer",o.onreadystatechange=this._onReadyStateChange.bind(this),o.onprogress=this._onProgress.bind(this),o.onloadend=this._onLoadEnd.bind(this),o.onerror=this._onXhrError.bind(this),e.withCredentials&&(o.withCredentials=!0),"object"==typeof r.headers){var a=r.headers;for(var s in a)a.hasOwnProperty(s)&&o.setRequestHeader(s,a[s])}if("object"==typeof this._config.headers)for(var s in a=this._config.headers)a.hasOwnProperty(s)&&o.setRequestHeader(s,a[s]);this._status=i.LoaderStatus.kConnecting,o.send()},t.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=i.LoaderStatus.kComplete},t.prototype._onReadyStateChange=function(e){var t=e.target;if(2===t.readyState){if(null!=t.responseURL&&t.responseURL!==this._requestURL&&this._onURLRedirect){var n=this._seekHandler.removeURLParameters(t.responseURL);this._onURLRedirect(n)}if(0!==t.status&&(t.status<200||t.status>299)){if(this._status=i.LoaderStatus.kError,!this._onError)throw new a.RuntimeException("MozChunkedLoader: Http code invalid, "+t.status+" "+t.statusText);this._onError(i.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:t.status,msg:t.statusText})}else this._status=i.LoaderStatus.kBuffering}},t.prototype._onProgress=function(e){if(this._status!==i.LoaderStatus.kError){null===this._contentLength&&null!==e.total&&0!==e.total&&(this._contentLength=e.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));var t=e.target.response,n=this._range.from+this._receivedLength;this._receivedLength+=t.byteLength,this._onDataArrival&&this._onDataArrival(t,n,this._receivedLength)}},t.prototype._onLoadEnd=function(e){!0!==this._requestAbort?this._status!==i.LoaderStatus.kError&&(this._status=i.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)):this._requestAbort=!1},t.prototype._onXhrError=function(e){this._status=i.LoaderStatus.kError;var t=0,n=null;if(this._contentLength&&e.loaded<this._contentLength?(t=i.LoaderErrors.EARLY_EOF,n={code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(t=i.LoaderErrors.EXCEPTION,n={code:-1,msg:e.constructor.name+" "+e.type}),!this._onError)throw new a.RuntimeException(n.msg);this._onError(t,n)},t}(i.BaseLoader);t.default=l},"./src/io/xhr-range-loader.js":function(e,t,n){n.r(t);var r,o=n("./src/utils/logger.js"),i=n("./src/io/speed-sampler.js"),a=n("./src/io/loader.js"),s=n("./src/utils/exception.js"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(t,n){var r=e.call(this,"xhr-range-loader")||this;return r.TAG="RangeLoader",r._seekHandler=t,r._config=n,r._needStash=!1,r._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],r._currentChunkSizeKB=384,r._currentSpeedNormalized=0,r._zeroSpeedChunkCount=0,r._xhr=null,r._speedSampler=new i.default,r._requestAbort=!1,r._waitForTotalLength=!1,r._totalLengthReceived=!1,r._currentRequestURL=null,r._currentRedirectedURL=null,r._currentRequestRange=null,r._totalLength=null,r._contentLength=null,r._receivedLength=0,r._lastTimeLoaded=0,r}return l(t,e),t.isSupported=function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),e.responseType="arraybuffer","arraybuffer"===e.responseType}catch(t){return o.default.w("RangeLoader",t.message),!1}},t.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),e.prototype.destroy.call(this)},Object.defineProperty(t.prototype,"currentSpeed",{get:function(){return this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),t.prototype.open=function(e,t){this._dataSource=e,this._range=t,this._status=a.LoaderStatus.kConnecting;var n=!1;null!=this._dataSource.filesize&&0!==this._dataSource.filesize&&(n=!0,this._totalLength=this._dataSource.filesize),this._totalLengthReceived||n?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1}))},t.prototype._openSubRange=function(){var e=1024*this._currentChunkSizeKB,t=this._range.from+this._receivedLength,n=t+e;null!=this._contentLength&&n-this._range.from>=this._contentLength&&(n=this._range.from+this._contentLength-1),this._currentRequestRange={from:t,to:n},this._internalOpen(this._dataSource,this._currentRequestRange)},t.prototype._internalOpen=function(e,t){this._lastTimeLoaded=0;var n=e.url;this._config.reuseRedirectedURL&&(null!=this._currentRedirectedURL?n=this._currentRedirectedURL:null!=e.redirectedURL&&(n=e.redirectedURL));var r=this._seekHandler.getConfig(n,t);this._currentRequestURL=r.url;var o=this._xhr=new XMLHttpRequest;if(o.open("GET",r.url,!0),o.responseType="arraybuffer",o.onreadystatechange=this._onReadyStateChange.bind(this),o.onprogress=this._onProgress.bind(this),o.onload=this._onLoad.bind(this),o.onerror=this._onXhrError.bind(this),e.withCredentials&&(o.withCredentials=!0),"object"==typeof r.headers){var i=r.headers;for(var a in i)i.hasOwnProperty(a)&&o.setRequestHeader(a,i[a])}if("object"==typeof this._config.headers)for(var a in i=this._config.headers)i.hasOwnProperty(a)&&o.setRequestHeader(a,i[a]);o.send()},t.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=a.LoaderStatus.kComplete},t.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},t.prototype._onReadyStateChange=function(e){var t=e.target;if(2===t.readyState){if(null!=t.responseURL){var n=this._seekHandler.removeURLParameters(t.responseURL);t.responseURL!==this._currentRequestURL&&n!==this._currentRedirectedURL&&(this._currentRedirectedURL=n,this._onURLRedirect&&this._onURLRedirect(n))}if(t.status>=200&&t.status<=299){if(this._waitForTotalLength)return;this._status=a.LoaderStatus.kBuffering}else{if(this._status=a.LoaderStatus.kError,!this._onError)throw new s.RuntimeException("RangeLoader: Http code invalid, "+t.status+" "+t.statusText);this._onError(a.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:t.status,msg:t.statusText})}}},t.prototype._onProgress=function(e){if(this._status!==a.LoaderStatus.kError){if(null===this._contentLength){var t=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,t=!0;var n=e.total;this._internalAbort(),null!=n&0!==n&&(this._totalLength=n)}if(-1===this._range.to?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,t)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var r=e.loaded-this._lastTimeLoaded;this._lastTimeLoaded=e.loaded,this._speedSampler.addBytes(r)}},t.prototype._normalizeSpeed=function(e){var t=this._chunkSizeKBList,n=t.length-1,r=0,o=0,i=n;if(e<t[0])return t[0];for(;o<=i;){if((r=o+Math.floor((i-o)/2))===n||e>=t[r]&&e<t[r+1])return t[r];t[r]<e?o=r+1:i=r-1}},t.prototype._onLoad=function(e){if(this._status!==a.LoaderStatus.kError)if(this._waitForTotalLength)this._waitForTotalLength=!1;else{this._lastTimeLoaded=0;var t=this._speedSampler.lastSecondKBps;if(0===t&&(this._zeroSpeedChunkCount++,this._zeroSpeedChunkCount>=3&&(t=this._speedSampler.currentKBps)),0!==t){var n=this._normalizeSpeed(t);this._currentSpeedNormalized!==n&&(this._currentSpeedNormalized=n,this._currentChunkSizeKB=n)}var r=e.target.response,o=this._range.from+this._receivedLength;this._receivedLength+=r.byteLength;var i=!1;null!=this._contentLength&&this._receivedLength<this._contentLength?this._openSubRange():i=!0,this._onDataArrival&&this._onDataArrival(r,o,this._receivedLength),i&&(this._status=a.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}},t.prototype._onXhrError=function(e){this._status=a.LoaderStatus.kError;var t=0,n=null;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(t=a.LoaderErrors.EARLY_EOF,n={code:-1,msg:"RangeLoader meet Early-Eof"}):(t=a.LoaderErrors.EXCEPTION,n={code:-1,msg:e.constructor.name+" "+e.type}),!this._onError)throw new s.RuntimeException(n.msg);this._onError(t,n)},t}(a.BaseLoader);t.default=u},"./src/player/flv-player.js":function(e,t,n){n.r(t);var r=n("./node_modules/events/events.js"),o=n.n(r),i=n("./src/utils/logger.js"),a=n("./src/utils/browser.js"),s=n("./src/player/player-events.js"),l=n("./src/core/transmuxer.js"),u=n("./src/core/transmuxing-events.js"),c=n("./src/core/mse-controller.js"),d=n("./src/core/mse-events.js"),f=n("./src/player/player-errors.js"),p=n("./src/config.js"),h=n("./src/utils/exception.js"),m=function(){function e(e,t){if(this.TAG="FlvPlayer",this._type="FlvPlayer",this._emitter=new(o()),this._config=(0,p.createDefaultConfig)(),"object"==typeof t&&Object.assign(this._config,t),"flv"!==e.type.toLowerCase())throw new h.InvalidArgumentException("FlvPlayer requires an flv MediaDataSource input!");!0===e.isLive&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=e,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;var n=a.default.chrome&&(a.default.version.major<50||50===a.default.version.major&&a.default.version.build<2661);this._alwaysSeekKeyframe=!!(n||a.default.msedge||a.default.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}return e.prototype.destroy=function(){null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},e.prototype.on=function(e,t){var n=this;e===s.default.MEDIA_INFO?null!=this._mediaInfo&&Promise.resolve().then((function(){n._emitter.emit(s.default.MEDIA_INFO,n.mediaInfo)})):e===s.default.STATISTICS_INFO&&null!=this._statisticsInfo&&Promise.resolve().then((function(){n._emitter.emit(s.default.STATISTICS_INFO,n.statisticsInfo)})),this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.attachMediaElement=function(e){var t=this;if(this._mediaElement=e,e.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),e.addEventListener("seeking",this.e.onvSeeking),e.addEventListener("canplay",this.e.onvCanPlay),e.addEventListener("stalled",this.e.onvStalled),e.addEventListener("progress",this.e.onvProgress),this._msectl=new c.default(this._config),this._msectl.on(d.default.UPDATE_END,this._onmseUpdateEnd.bind(this)),this._msectl.on(d.default.BUFFER_FULL,this._onmseBufferFull.bind(this)),this._msectl.on(d.default.SOURCE_OPEN,(function(){t._mseSourceOpened=!0,t._hasPendingLoad&&(t._hasPendingLoad=!1,t.load())})),this._msectl.on(d.default.ERROR,(function(e){t._emitter.emit(s.default.ERROR,f.ErrorTypes.MEDIA_ERROR,f.ErrorDetails.MEDIA_MSE_ERROR,e)})),this._msectl.attachMediaElement(e),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(n){}},e.prototype.detachMediaElement=function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)},e.prototype.load=function(){var e=this;if(!this._mediaElement)throw new h.IllegalStateException("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new h.IllegalStateException("FlvPlayer.load() has been called, please call unload() first!");this._hasPendingLoad||(this._config.deferLoadAfterSourceOpen&&!1===this._mseSourceOpened?this._hasPendingLoad=!0:(this._mediaElement.readyState>0&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new l.default(this._mediaDataSource,this._config),this._transmuxer.on(u.default.INIT_SEGMENT,(function(t,n){e._msectl.appendInitSegment(n)})),this._transmuxer.on(u.default.MEDIA_SEGMENT,(function(t,n){if(e._msectl.appendMediaSegment(n),e._config.lazyLoad&&!e._config.isLive){var r=e._mediaElement.currentTime;n.info.endDts>=1e3*(r+e._config.lazyLoadMaxDuration)&&null==e._progressChecker&&(i.default.v(e.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),e._suspendTransmuxer())}})),this._transmuxer.on(u.default.LOADING_COMPLETE,(function(){e._msectl.endOfStream(),e._emitter.emit(s.default.LOADING_COMPLETE)})),this._transmuxer.on(u.default.RECOVERED_EARLY_EOF,(function(){e._emitter.emit(s.default.RECOVERED_EARLY_EOF)})),this._transmuxer.on(u.default.IO_ERROR,(function(t,n){e._emitter.emit(s.default.ERROR,f.ErrorTypes.NETWORK_ERROR,t,n)})),this._transmuxer.on(u.default.DEMUX_ERROR,(function(t,n){e._emitter.emit(s.default.ERROR,f.ErrorTypes.MEDIA_ERROR,t,{code:-1,msg:n})})),this._transmuxer.on(u.default.MEDIA_INFO,(function(t){e._mediaInfo=t,e._emitter.emit(s.default.MEDIA_INFO,Object.assign({},t))})),this._transmuxer.on(u.default.METADATA_ARRIVED,(function(t){e._emitter.emit(s.default.METADATA_ARRIVED,t)})),this._transmuxer.on(u.default.SCRIPTDATA_ARRIVED,(function(t){e._emitter.emit(s.default.SCRIPTDATA_ARRIVED,t)})),this._transmuxer.on(u.default.STATISTICS_INFO,(function(t){e._statisticsInfo=e._fillStatisticsInfo(t),e._emitter.emit(s.default.STATISTICS_INFO,Object.assign({},e._statisticsInfo))})),this._transmuxer.on(u.default.RECOMMEND_SEEKPOINT,(function(t){e._mediaElement&&!e._config.accurateSeek&&(e._requestSetTime=!0,e._mediaElement.currentTime=t/1e3)})),this._transmuxer.open()))},e.prototype.unload=function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)},e.prototype.play=function(){return this._mediaElement.play()},e.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._internalSeek(e):this._pendingSeekTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaInfo",{get:function(){return Object.assign({},this._mediaInfo)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statisticsInfo",{get:function(){return null==this._statisticsInfo&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)},enumerable:!1,configurable:!0}),e.prototype._fillStatisticsInfo=function(e){if(e.playerType=this._type,!(this._mediaElement instanceof HTMLVideoElement))return e;var t=!0,n=0,r=0;if(this._mediaElement.getVideoPlaybackQuality){var o=this._mediaElement.getVideoPlaybackQuality();n=o.totalVideoFrames,r=o.droppedVideoFrames}else null!=this._mediaElement.webkitDecodedFrameCount?(n=this._mediaElement.webkitDecodedFrameCount,r=this._mediaElement.webkitDroppedFrameCount):t=!1;return t&&(e.decodedFrames=n,e.droppedFrames=r),e},e.prototype._onmseUpdateEnd=function(){if(this._config.lazyLoad&&!this._config.isLive){for(var e=this._mediaElement.buffered,t=this._mediaElement.currentTime,n=0,r=0;r<e.length;r++){var o=e.start(r),a=e.end(r);if(o<=t&&t<a){n=a;break}}n>=t+this._config.lazyLoadMaxDuration&&null==this._progressChecker&&(i.default.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}},e.prototype._onmseBufferFull=function(){i.default.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),null==this._progressChecker&&this._suspendTransmuxer()},e.prototype._suspendTransmuxer=function(){this._transmuxer&&(this._transmuxer.pause(),null==this._progressChecker&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3)))},e.prototype._checkProgressAndResume=function(){for(var e=this._mediaElement.currentTime,t=this._mediaElement.buffered,n=!1,r=0;r<t.length;r++){var o=t.start(r),a=t.end(r);if(e>=o&&e<a){e>=a-this._config.lazyLoadRecoverDuration&&(n=!0);break}}n&&(window.clearInterval(this._progressChecker),this._progressChecker=null,n&&(i.default.v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume()))},e.prototype._isTimepointBuffered=function(e){for(var t=this._mediaElement.buffered,n=0;n<t.length;n++){var r=t.start(n),o=t.end(n);if(e>=r&&e<o)return!0}return!1},e.prototype._internalSeek=function(e){var t=this._isTimepointBuffered(e),n=!1,r=0;if(e<1&&this._mediaElement.buffered.length>0){var o=this._mediaElement.buffered.start(0);(o<1&&e<o||a.default.safari)&&(n=!0,r=a.default.safari?.1:o)}if(n)this._requestSetTime=!0,this._mediaElement.currentTime=r;else if(t){if(this._alwaysSeekKeyframe){var i=this._msectl.getNearestKeyframe(Math.floor(1e3*e));this._requestSetTime=!0,this._mediaElement.currentTime=null!=i?i.dts/1e3:e}else this._requestSetTime=!0,this._mediaElement.currentTime=e;null!=this._progressChecker&&this._checkProgressAndResume()}else null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e)},e.prototype._checkAndApplyUnbufferedSeekpoint=function(){if(this._seekpointRecord)if(this._seekpointRecord.recordTime<=this._now()-100){var e=this._mediaElement.currentTime;this._seekpointRecord=null,this._isTimepointBuffered(e)||(null!=this._progressChecker&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e))}else window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)},e.prototype._checkAndResumeStuckPlayback=function(e){var t=this._mediaElement;if(e||!this._receivedCanPlay||t.readyState<2){var n=t.buffered;n.length>0&&t.currentTime<n.start(0)&&(i.default.w(this.TAG,"Playback seems stuck at "+t.currentTime+", seek to "+n.start(0)),this._requestSetTime=!0,this._mediaElement.currentTime=n.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress))}else this._mediaElement.removeEventListener("progress",this.e.onvProgress)},e.prototype._onvLoadedMetadata=function(e){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)},e.prototype._onvSeeking=function(e){var t=this._mediaElement.currentTime,n=this._mediaElement.buffered;if(this._requestSetTime)this._requestSetTime=!1;else{if(t<1&&n.length>0){var r=n.start(0);if(r<1&&t<r||a.default.safari)return this._requestSetTime=!0,void(this._mediaElement.currentTime=a.default.safari?.1:r)}if(this._isTimepointBuffered(t)){if(this._alwaysSeekKeyframe){var o=this._msectl.getNearestKeyframe(Math.floor(1e3*t));null!=o&&(this._requestSetTime=!0,this._mediaElement.currentTime=o.dts/1e3)}null!=this._progressChecker&&this._checkProgressAndResume()}else this._seekpointRecord={seekPoint:t,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)}},e.prototype._onvCanPlay=function(e){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)},e.prototype._onvStalled=function(e){this._checkAndResumeStuckPlayback(!0)},e.prototype._onvProgress=function(e){this._checkAndResumeStuckPlayback()},e}();t.default=m},"./src/player/native-player.js":function(e,t,n){n.r(t);var r=n("./node_modules/events/events.js"),o=n.n(r),i=n("./src/player/player-events.js"),a=n("./src/config.js"),s=n("./src/utils/exception.js"),l=function(){function e(e,t){if(this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new(o()),this._config=(0,a.createDefaultConfig)(),"object"==typeof t&&Object.assign(this._config,t),"flv"===e.type.toLowerCase())throw new s.InvalidArgumentException("NativePlayer does't support flv MediaDataSource input!");if(e.hasOwnProperty("segments"))throw new s.InvalidArgumentException("NativePlayer("+e.type+") doesn't support multipart playback!");this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=e,this._mediaElement=null}return e.prototype.destroy=function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},e.prototype.on=function(e,t){var n=this;e===i.default.MEDIA_INFO?null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then((function(){n._emitter.emit(i.default.MEDIA_INFO,n.mediaInfo)})):e===i.default.STATISTICS_INFO&&null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then((function(){n._emitter.emit(i.default.STATISTICS_INFO,n.statisticsInfo)})),this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.attachMediaElement=function(e){if(this._mediaElement=e,e.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(t){}},e.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},e.prototype.load=function(){if(!this._mediaElement)throw new s.IllegalStateException("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)},e.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},e.prototype.play=function(){return this._mediaElement.play()},e.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._mediaElement.currentTime=e:this._pendingSeekTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaInfo",{get:function(){var e={mimeType:(this._mediaElement instanceof HTMLAudioElement?"audio/":"video/")+this._mediaDataSource.type};return this._mediaElement&&(e.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement&&(e.width=this._mediaElement.videoWidth,e.height=this._mediaElement.videoHeight)),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statisticsInfo",{get:function(){var e={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return e;var t=!0,n=0,r=0;if(this._mediaElement.getVideoPlaybackQuality){var o=this._mediaElement.getVideoPlaybackQuality();n=o.totalVideoFrames,r=o.droppedVideoFrames}else null!=this._mediaElement.webkitDecodedFrameCount?(n=this._mediaElement.webkitDecodedFrameCount,r=this._mediaElement.webkitDroppedFrameCount):t=!1;return t&&(e.decodedFrames=n,e.droppedFrames=r),e},enumerable:!1,configurable:!0}),e.prototype._onvLoadedMetadata=function(e){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(i.default.MEDIA_INFO,this.mediaInfo)},e.prototype._reportStatisticsInfo=function(){this._emitter.emit(i.default.STATISTICS_INFO,this.statisticsInfo)},e}();t.default=l},"./src/player/player-errors.js":function(e,t,n){n.r(t),n.d(t,{ErrorTypes:function(){return i},ErrorDetails:function(){return a}});var r=n("./src/io/loader.js"),o=n("./src/demux/demux-errors.js"),i={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},a={NETWORK_EXCEPTION:r.LoaderErrors.EXCEPTION,NETWORK_STATUS_CODE_INVALID:r.LoaderErrors.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:r.LoaderErrors.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:r.LoaderErrors.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:o.default.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:o.default.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:o.default.CODEC_UNSUPPORTED}},"./src/player/player-events.js":function(e,t,n){n.r(t),t.default={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info"}},"./src/remux/aac-silent.js":function(e,t,n){n.r(t);var r=function(){function e(){}return e.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}();t.default=r},"./src/remux/mp4-generator.js":function(e,t,n){n.r(t);var r=function(){function e(){}return e.init=function(){for(var t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=e.constants={};n.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),n.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),n.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),n.STSC=n.STCO=n.STTS,n.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),n.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),n.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),n.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},e.box=function(e){for(var t=8,n=null,r=Array.prototype.slice.call(arguments,1),o=r.length,i=0;i<o;i++)t+=r[i].byteLength;(n=new Uint8Array(t))[0]=t>>>24&255,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n.set(e,4);var a=8;for(i=0;i<o;i++)n.set(r[i],a),a+=r[i].byteLength;return n},e.generateInitSegment=function(t){var n=e.box(e.types.ftyp,e.constants.FTYP),r=e.moov(t),o=new Uint8Array(n.byteLength+r.byteLength);return o.set(n,0),o.set(r,n.byteLength),o},e.moov=function(t){var n=e.mvhd(t.timescale,t.duration),r=e.trak(t),o=e.mvex(t);return e.box(e.types.moov,n,r,o)},e.mvhd=function(t,n){return e.box(e.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},e.trak=function(t){return e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.tkhd=function(t){var n=t.id,r=t.duration,o=t.presentWidth,i=t.presentHeight;return e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>>8&255,255&o,0,0,i>>>8&255,255&i,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t),e.hdlr(t),e.minf(t))},e.mdhd=function(t){var n=t.timescale,r=t.duration;return e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,r>>>24&255,r>>>16&255,r>>>8&255,255&r,85,196,0,0]))},e.hdlr=function(t){var n=null;return n="audio"===t.type?e.constants.HDLR_AUDIO:e.constants.HDLR_VIDEO,e.box(e.types.hdlr,n)},e.minf=function(t){var n=null;return n="audio"===t.type?e.box(e.types.smhd,e.constants.SMHD):e.box(e.types.vmhd,e.constants.VMHD),e.box(e.types.minf,n,e.dinf(),e.stbl(t))},e.dinf=function(){return e.box(e.types.dinf,e.box(e.types.dref,e.constants.DREF))},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.constants.STTS),e.box(e.types.stsc,e.constants.STSC),e.box(e.types.stsz,e.constants.STSZ),e.box(e.types.stco,e.constants.STCO))},e.stsd=function(t){return"audio"===t.type?"mp3"===t.codec?e.box(e.types.stsd,e.constants.STSD_PREFIX,e.mp3(t)):e.box(e.types.stsd,e.constants.STSD_PREFIX,e.mp4a(t)):e.box(e.types.stsd,e.constants.STSD_PREFIX,e.avc1(t))},e.mp3=function(t){var n=t.channelCount,r=t.audioSampleRate,o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n,0,16,0,0,0,0,r>>>8&255,255&r,0,0]);return e.box(e.types[".mp3"],o)},e.mp4a=function(t){var n=t.channelCount,r=t.audioSampleRate,o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n,0,16,0,0,0,0,r>>>8&255,255&r,0,0]);return e.box(e.types.mp4a,o,e.esds(t))},e.esds=function(t){var n=t.config||[],r=n.length,o=new Uint8Array([0,0,0,0,3,23+r,0,1,0,4,15+r,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([r]).concat(n).concat([6,1,2]));return e.box(e.types.esds,o)},e.avc1=function(t){var n=t.avcc,r=t.codecWidth,o=t.codecHeight,i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,r>>>8&255,255&r,o>>>8&255,255&o,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return e.box(e.types.avc1,i,e.box(e.types.avcC,n))},e.mvex=function(t){return e.box(e.types.mvex,e.trex(t))},e.trex=function(t){var n=t.id,r=new Uint8Array([0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return e.box(e.types.trex,r)},e.moof=function(t,n){return e.box(e.types.moof,e.mfhd(t.sequenceNumber),e.traf(t,n))},e.mfhd=function(t){var n=new Uint8Array([0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t]);return e.box(e.types.mfhd,n)},e.traf=function(t,n){var r=t.id,o=e.box(e.types.tfhd,new Uint8Array([0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r])),i=e.box(e.types.tfdt,new Uint8Array([0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n])),a=e.sdtp(t),s=e.trun(t,a.byteLength+16+16+8+16+8+8);return e.box(e.types.traf,o,i,s,a)},e.sdtp=function(t){for(var n=t.samples||[],r=n.length,o=new Uint8Array(4+r),i=0;i<r;i++){var a=n[i].flags;o[i+4]=a.isLeading<<6|a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy}return e.box(e.types.sdtp,o)},e.trun=function(t,n){var r=t.samples||[],o=r.length,i=12+16*o,a=new Uint8Array(i);n+=8+i,a.set([0,0,15,1,o>>>24&255,o>>>16&255,o>>>8&255,255&o,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0);for(var s=0;s<o;s++){var l=r[s].duration,u=r[s].size,c=r[s].flags,d=r[s].cts;a.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,u>>>24&255,u>>>16&255,u>>>8&255,255&u,c.isLeading<<2|c.dependsOn,c.isDependedOn<<6|c.hasRedundancy<<4|c.isNonSync,0,0,d>>>24&255,d>>>16&255,d>>>8&255,255&d],12+16*s)}return e.box(e.types.trun,a)},e.mdat=function(t){return e.box(e.types.mdat,t)},e}();r.init(),t.default=r},"./src/remux/mp4-remuxer.js":function(e,t,n){n.r(t);var r=n("./src/utils/logger.js"),o=n("./src/remux/mp4-generator.js"),i=n("./src/remux/aac-silent.js"),a=n("./src/utils/browser.js"),s=n("./src/core/media-segment-info.js"),l=n("./src/utils/exception.js"),u=function(){function e(e){this.TAG="MP4Remuxer",this._config=e,this._isLive=!0===e.isLive,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new s.MediaSegmentInfoList("audio"),this._videoSegmentInfoList=new s.MediaSegmentInfoList("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!a.default.chrome||!(a.default.version.major<50||50===a.default.version.major&&a.default.version.build<2661)),this._fillSilentAfterSeek=a.default.msedge||a.default.msie,this._mp3UseMpegAudio=!a.default.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}return e.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null},e.prototype.bindDataSource=function(e){return e.onDataAvailable=this.remux.bind(this),e.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this},Object.defineProperty(e.prototype,"onInitSegment",{get:function(){return this._onInitSegment},set:function(e){this._onInitSegment=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onMediaSegment",{get:function(){return this._onMediaSegment},set:function(e){this._onMediaSegment=e},enumerable:!1,configurable:!0}),e.prototype.insertDiscontinuity=function(){this._audioNextDts=this._videoNextDts=void 0},e.prototype.seek=function(e){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()},e.prototype.remux=function(e,t){if(!this._onMediaSegment)throw new l.IllegalStateException("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(e,t),this._remuxVideo(t),this._remuxAudio(e)},e.prototype._onTrackMetadataReceived=function(e,t){var n=null,r="mp4",i=t.codec;if("audio"===e)this._audioMeta=t,"mp3"===t.codec&&this._mp3UseMpegAudio?(r="mpeg",i="",n=new Uint8Array):n=o.default.generateInitSegment(t);else{if("video"!==e)return;this._videoMeta=t,n=o.default.generateInitSegment(t)}if(!this._onInitSegment)throw new l.IllegalStateException("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(e,{type:e,data:n.buffer,codec:i,container:e+"/"+r,mediaDuration:t.duration})},e.prototype._calculateDtsBase=function(e,t){this._dtsBaseInited||(e.samples&&e.samples.length&&(this._audioDtsBase=e.samples[0].dts),t.samples&&t.samples.length&&(this._videoDtsBase=t.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},e.prototype.flushStashedSamples=function(){var e=this._videoStashedLastSample,t=this._audioStashedLastSample,n={type:"video",id:1,sequenceNumber:0,samples:[],length:0};null!=e&&(n.samples.push(e),n.length=e.length);var r={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};null!=t&&(r.samples.push(t),r.length=t.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(n,!0),this._remuxAudio(r,!0)},e.prototype._remuxAudio=function(e,t){if(null!=this._audioMeta){var n,l=e,u=l.samples,c=void 0,d=-1,f=this._audioMeta.refSampleDuration,p="mp3"===this._audioMeta.codec&&this._mp3UseMpegAudio,h=this._dtsBaseInited&&void 0===this._audioNextDts,m=!1;if(u&&0!==u.length&&(1!==u.length||t)){var g=0,v=null,y=0;p?(g=0,y=l.length):(g=8,y=8+l.length);var b=null;if(u.length>1&&(y-=(b=u.pop()).length),null!=this._audioStashedLastSample){var _=this._audioStashedLastSample;this._audioStashedLastSample=null,u.unshift(_),y+=_.length}null!=b&&(this._audioStashedLastSample=b);var w=u[0].dts-this._dtsBase;if(this._audioNextDts)c=w-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())c=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&"mp3"!==this._audioMeta.originalCodec&&(m=!0);else{var E=this._audioSegmentInfoList.getLastSampleBefore(w);if(null!=E){var S=w-(E.originalDts+E.duration);S<=3&&(S=0),c=w-(E.dts+E.duration+S)}else c=0}if(m){var x=w-c,O=this._videoSegmentInfoList.getLastSegmentBefore(w);if(null!=O&&O.beginDts<x){if(j=i.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount)){var A=O.beginDts,k=x-O.beginDts;r.default.v(this.TAG,"InsertPrefixSilentAudio: dts: "+A+", duration: "+k),u.unshift({unit:j,dts:A,pts:A}),y+=j.byteLength}}else m=!1}for(var P=[],T=0;T<u.length;T++){var L=(_=u[T]).unit,C=_.dts-this._dtsBase,R=(A=C,!1),M=null,D=0;if(!(C<-.001)){if("mp3"!==this._audioMeta.codec){var I=C;if(this._audioNextDts&&(I=this._audioNextDts),(c=C-I)<=-3*f){r.default.w(this.TAG,"Dropping 1 audio frame (originalDts: "+C+" ms ,curRefDts: "+I+" ms)  due to dtsCorrection: "+c+" ms overlap.");continue}if(c>=3*f&&this._fillAudioTimestampGap&&!a.default.safari){R=!0;var j,N=Math.floor(c/f);r.default.w(this.TAG,"Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.\noriginalDts: "+C+" ms, curRefDts: "+I+" ms, dtsCorrection: "+Math.round(c)+" ms, generate: "+N+" frames"),A=Math.floor(I),D=Math.floor(I+f)-A,null==(j=i.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount))&&(r.default.w(this.TAG,"Unable to generate silent frame for "+this._audioMeta.originalCodec+" with "+this._audioMeta.channelCount+" channels, repeat last frame"),j=L),M=[];for(var B=0;B<N;B++){I+=f;var U=Math.floor(I),F=Math.floor(I+f)-U,V={dts:U,pts:U,cts:0,unit:j,size:j.byteLength,duration:F,originalDts:C,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};M.push(V),y+=V.size}this._audioNextDts=I+f}else A=Math.floor(I),D=Math.floor(I+f)-A,this._audioNextDts=I+f}else A=C-c,D=T!==u.length-1?u[T+1].dts-this._dtsBase-c-A:null!=b?b.dts-this._dtsBase-c-A:P.length>=1?P[P.length-1].duration:Math.floor(f),this._audioNextDts=A+D;-1===d&&(d=A),P.push({dts:A,pts:A,cts:0,unit:_.unit,size:_.unit.byteLength,duration:D,originalDts:C,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),R&&P.push.apply(P,M)}}if(0===P.length)return l.samples=[],void(l.length=0);for(p?v=new Uint8Array(y):((v=new Uint8Array(y))[0]=y>>>24&255,v[1]=y>>>16&255,v[2]=y>>>8&255,v[3]=255&y,v.set(o.default.types.mdat,4)),T=0;T<P.length;T++)L=P[T].unit,v.set(L,g),g+=L.byteLength;var z=P[P.length-1];n=z.dts+z.duration;var H=new s.MediaSegmentInfo;H.beginDts=d,H.endDts=n,H.beginPts=d,H.endPts=n,H.originalBeginDts=P[0].originalDts,H.originalEndDts=z.originalDts+z.duration,H.firstSample=new s.SampleInfo(P[0].dts,P[0].pts,P[0].duration,P[0].originalDts,!1),H.lastSample=new s.SampleInfo(z.dts,z.pts,z.duration,z.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(H),l.samples=P,l.sequenceNumber++;var G=null;G=p?new Uint8Array:o.default.moof(l,d),l.samples=[],l.length=0;var W={type:"audio",data:this._mergeBoxes(G,v).buffer,sampleCount:P.length,info:H};p&&h&&(W.timestampOffset=d),this._onMediaSegment("audio",W)}}},e.prototype._remuxVideo=function(e,t){if(null!=this._videoMeta){var n,r,i=e,a=i.samples,l=void 0,u=-1,c=-1;if(a&&0!==a.length&&(1!==a.length||t)){var d=8,f=null,p=8+e.length,h=null;if(a.length>1&&(p-=(h=a.pop()).length),null!=this._videoStashedLastSample){var m=this._videoStashedLastSample;this._videoStashedLastSample=null,a.unshift(m),p+=m.length}null!=h&&(this._videoStashedLastSample=h);var g=a[0].dts-this._dtsBase;if(this._videoNextDts)l=g-this._videoNextDts;else if(this._videoSegmentInfoList.isEmpty())l=0;else{var v=this._videoSegmentInfoList.getLastSampleBefore(g);if(null!=v){var y=g-(v.originalDts+v.duration);y<=3&&(y=0),l=g-(v.dts+v.duration+y)}else l=0}for(var b=new s.MediaSegmentInfo,_=[],w=0;w<a.length;w++){var E=(m=a[w]).dts-this._dtsBase,S=m.isKeyframe,x=E-l,O=m.cts,A=x+O;-1===u&&(u=x,c=A);var k=0;if(k=w!==a.length-1?a[w+1].dts-this._dtsBase-l-x:null!=h?h.dts-this._dtsBase-l-x:_.length>=1?_[_.length-1].duration:Math.floor(this._videoMeta.refSampleDuration),S){var P=new s.SampleInfo(x,A,k,m.dts,!0);P.fileposition=m.fileposition,b.appendSyncPoint(P)}_.push({dts:x,pts:A,cts:O,units:m.units,size:m.length,isKeyframe:S,duration:k,originalDts:E,flags:{isLeading:0,dependsOn:S?2:1,isDependedOn:S?1:0,hasRedundancy:0,isNonSync:S?0:1}})}for((f=new Uint8Array(p))[0]=p>>>24&255,f[1]=p>>>16&255,f[2]=p>>>8&255,f[3]=255&p,f.set(o.default.types.mdat,4),w=0;w<_.length;w++)for(var T=_[w].units;T.length;){var L=T.shift().data;f.set(L,d),d+=L.byteLength}var C=_[_.length-1];if(n=C.dts+C.duration,r=C.pts+C.duration,this._videoNextDts=n,b.beginDts=u,b.endDts=n,b.beginPts=c,b.endPts=r,b.originalBeginDts=_[0].originalDts,b.originalEndDts=C.originalDts+C.duration,b.firstSample=new s.SampleInfo(_[0].dts,_[0].pts,_[0].duration,_[0].originalDts,_[0].isKeyframe),b.lastSample=new s.SampleInfo(C.dts,C.pts,C.duration,C.originalDts,C.isKeyframe),this._isLive||this._videoSegmentInfoList.append(b),i.samples=_,i.sequenceNumber++,this._forceFirstIDR){var R=_[0].flags;R.dependsOn=2,R.isNonSync=0}var M=o.default.moof(i,u);i.samples=[],i.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(M,f).buffer,sampleCount:_.length,info:b})}}},e.prototype._mergeBoxes=function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(e,0),n.set(t,e.byteLength),n},e}();t.default=u},"./src/utils/browser.js":function(e,t,n){n.r(t);var r={};!function(){var e=self.navigator.userAgent.toLowerCase(),t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(iemobile)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(e)||[],n=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(android)/.exec(e)||/(windows)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||[],o={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",majorVersion:t[4]||t[2]||"0",platform:n[0]||""},i={};if(o.browser){i[o.browser]=!0;var a=o.majorVersion.split(".");i.version={major:parseInt(o.majorVersion,10),string:o.version},a.length>1&&(i.version.minor=parseInt(a[1],10)),a.length>2&&(i.version.build=parseInt(a[2],10))}if(o.platform&&(i[o.platform]=!0),(i.chrome||i.opr||i.safari)&&(i.webkit=!0),i.rv||i.iemobile){i.rv&&delete i.rv;var s="msie";o.browser=s,i.msie=!0}if(i.edge){delete i.edge;var l="msedge";o.browser=l,i.msedge=!0}if(i.opr){var u="opera";o.browser=u,i.opera=!0}if(i.safari&&i.android){var c="android";o.browser=c,i.android=!0}for(var d in i.name=o.browser,i.platform=o.platform,r)r.hasOwnProperty(d)&&delete r[d];Object.assign(r,i)}(),t.default=r},"./src/utils/exception.js":function(e,t,n){n.r(t),n.d(t,{RuntimeException:function(){return i},IllegalStateException:function(){return a},InvalidArgumentException:function(){return s},NotImplementedException:function(){return l}});var r,o=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(){function e(e){this._message=e}return Object.defineProperty(e.prototype,"name",{get:function(){return"RuntimeException"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this.name+": "+this.message},e}(),a=function(e){function t(t){return e.call(this,t)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"IllegalStateException"},enumerable:!1,configurable:!0}),t}(i),s=function(e){function t(t){return e.call(this,t)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"InvalidArgumentException"},enumerable:!1,configurable:!0}),t}(i),l=function(e){function t(t){return e.call(this,t)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"NotImplementedException"},enumerable:!1,configurable:!0}),t}(i)},"./src/utils/logger.js":function(e,t,n){n.r(t);var r=n("./node_modules/events/events.js"),o=n.n(r),i=function(){function e(){}return e.e=function(t,n){t&&!e.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var r="["+t+"] > "+n;e.ENABLE_CALLBACK&&e.emitter.emit("log","error",r),e.ENABLE_ERROR&&(console.error?console.error(r):console.warn?console.warn(r):console.log(r))},e.i=function(t,n){t&&!e.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var r="["+t+"] > "+n;e.ENABLE_CALLBACK&&e.emitter.emit("log","info",r),e.ENABLE_INFO&&(console.info?console.info(r):console.log(r))},e.w=function(t,n){t&&!e.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var r="["+t+"] > "+n;e.ENABLE_CALLBACK&&e.emitter.emit("log","warn",r),e.ENABLE_WARN&&(console.warn?console.warn(r):console.log(r))},e.d=function(t,n){t&&!e.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var r="["+t+"] > "+n;e.ENABLE_CALLBACK&&e.emitter.emit("log","debug",r),e.ENABLE_DEBUG&&(console.debug?console.debug(r):console.log(r))},e.v=function(t,n){t&&!e.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var r="["+t+"] > "+n;e.ENABLE_CALLBACK&&e.emitter.emit("log","verbose",r),e.ENABLE_VERBOSE&&console.log(r)},e}();i.GLOBAL_TAG="flv.js",i.FORCE_GLOBAL_TAG=!1,i.ENABLE_ERROR=!0,i.ENABLE_INFO=!0,i.ENABLE_WARN=!0,i.ENABLE_DEBUG=!0,i.ENABLE_VERBOSE=!0,i.ENABLE_CALLBACK=!1,i.emitter=new(o()),t.default=i},"./src/utils/logging-control.js":function(e,t,n){n.r(t);var r=n("./node_modules/events/events.js"),o=n.n(r),i=n("./src/utils/logger.js"),a=function(){function e(){}return Object.defineProperty(e,"forceGlobalTag",{get:function(){return i.default.FORCE_GLOBAL_TAG},set:function(t){i.default.FORCE_GLOBAL_TAG=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"globalTag",{get:function(){return i.default.GLOBAL_TAG},set:function(t){i.default.GLOBAL_TAG=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableAll",{get:function(){return i.default.ENABLE_VERBOSE&&i.default.ENABLE_DEBUG&&i.default.ENABLE_INFO&&i.default.ENABLE_WARN&&i.default.ENABLE_ERROR},set:function(t){i.default.ENABLE_VERBOSE=t,i.default.ENABLE_DEBUG=t,i.default.ENABLE_INFO=t,i.default.ENABLE_WARN=t,i.default.ENABLE_ERROR=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableDebug",{get:function(){return i.default.ENABLE_DEBUG},set:function(t){i.default.ENABLE_DEBUG=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableVerbose",{get:function(){return i.default.ENABLE_VERBOSE},set:function(t){i.default.ENABLE_VERBOSE=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableInfo",{get:function(){return i.default.ENABLE_INFO},set:function(t){i.default.ENABLE_INFO=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableWarn",{get:function(){return i.default.ENABLE_WARN},set:function(t){i.default.ENABLE_WARN=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableError",{get:function(){return i.default.ENABLE_ERROR},set:function(t){i.default.ENABLE_ERROR=t,e._notifyChange()},enumerable:!1,configurable:!0}),e.getConfig=function(){return{globalTag:i.default.GLOBAL_TAG,forceGlobalTag:i.default.FORCE_GLOBAL_TAG,enableVerbose:i.default.ENABLE_VERBOSE,enableDebug:i.default.ENABLE_DEBUG,enableInfo:i.default.ENABLE_INFO,enableWarn:i.default.ENABLE_WARN,enableError:i.default.ENABLE_ERROR,enableCallback:i.default.ENABLE_CALLBACK}},e.applyConfig=function(e){i.default.GLOBAL_TAG=e.globalTag,i.default.FORCE_GLOBAL_TAG=e.forceGlobalTag,i.default.ENABLE_VERBOSE=e.enableVerbose,i.default.ENABLE_DEBUG=e.enableDebug,i.default.ENABLE_INFO=e.enableInfo,i.default.ENABLE_WARN=e.enableWarn,i.default.ENABLE_ERROR=e.enableError,i.default.ENABLE_CALLBACK=e.enableCallback},e._notifyChange=function(){var t=e.emitter;if(t.listenerCount("change")>0){var n=e.getConfig();t.emit("change",n)}},e.registerListener=function(t){e.emitter.addListener("change",t)},e.removeListener=function(t){e.emitter.removeListener("change",t)},e.addLogListener=function(t){i.default.emitter.addListener("log",t),i.default.emitter.listenerCount("log")>0&&(i.default.ENABLE_CALLBACK=!0,e._notifyChange())},e.removeLogListener=function(t){i.default.emitter.removeListener("log",t),0===i.default.emitter.listenerCount("log")&&(i.default.ENABLE_CALLBACK=!1,e._notifyChange())},e}();a.emitter=new(o()),t.default=a},"./src/utils/polyfill.js":function(e,t,n){n.r(t);var r=function(){function e(){}return e.install=function(){Object.setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Object.assign=Object.assign||function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])}return t},"function"!=typeof self.Promise&&n("./node_modules/es6-promise/dist/es6-promise.js").polyfill()},e}();r.install(),t.default=r},"./src/utils/utf8-conv.js":function(e,t,n){function r(e,t,n){var r=e;if(t+n<r.length){for(;n--;)if(128!=(192&r[++t]))return!1;return!0}return!1}n.r(t),t.default=function(e){for(var t=[],n=e,o=0,i=e.length;o<i;)if(n[o]<128)t.push(String.fromCharCode(n[o])),++o;else{if(n[o]<192);else if(n[o]<224){if(r(n,o,1)&&(a=(31&n[o])<<6|63&n[o+1])>=128){t.push(String.fromCharCode(65535&a)),o+=2;continue}}else if(n[o]<240){if(r(n,o,2)&&(a=(15&n[o])<<12|(63&n[o+1])<<6|63&n[o+2])>=2048&&55296!=(63488&a)){t.push(String.fromCharCode(65535&a)),o+=3;continue}}else if(n[o]<248){var a;if(r(n,o,3)&&(a=(7&n[o])<<18|(63&n[o+1])<<12|(63&n[o+2])<<6|63&n[o+3])>65536&&a<1114112){a-=65536,t.push(String.fromCharCode(a>>>10|55296)),t.push(String.fromCharCode(1023&a|56320)),o+=4;continue}}t.push(String.fromCharCode(65533)),++o}return t.join("")}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}return n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n("./src/index.js")}());const Fs=["Native","GoogleDrive"];var Vs=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",type:3,exts:[],default:({file:e})=>{const{getSetting:n,lastFiles:r}=t.exports.useContext(C),o=r.filter((e=>3===e.type)),{i18n:a}=l();let s=D(),d=s();I(!0);const p=Fs.includes(e.driver)?d:e.url,h=v();let m;return t.exports.useEffect((()=>{let t={container:"#video-player",title:e.name,url:p,autoplay:"true"===n("autoplay video"),autoMini:!0,autoSize:!1,playbackRate:!0,flip:!0,rotate:!0,aspectRatio:!0,fullscreen:!0,fullscreenWeb:!0,mutex:!0,light:!0,backdrop:!0,subtitleOffset:!0,miniProgressBar:!0,localVideo:!0,localSubtitle:!0,lang:"zh"===a.language?"zh-cn":"en",setting:!0,pip:!0,customType:{flv:function(e,t,n){const r=Us.createPlayer({type:"flv",url:t},{referrerPolicy:"no-referrer"});r.attachMediaElement(e),r.load()}}};e.name.toLowerCase().endsWith(".flv")&&(t.type="flv"),n("artplayer whitelist")&&(t.whitelist=n("artplayer whitelist").split(",")),"true"===n("artplayer autoSize")&&(t.autoSize=!0);const i=e.name.substring(0,e.name.lastIndexOf("."));const l=r.find((e=>{const t=e.name;if(!t.startsWith(i))return!1;for(const n of[".srt",".ass",".vtt"])if(t.endsWith(n))return!0;return!1}));if(l){l.name,t.subtitle={type:"",url:s(l),bilingual:!0,style:{color:"#03A9F4","font-size":"30px"}}}return m=new Ns(t),m.on("video:ended",(()=>{const t=o.findIndex((t=>t.name===e.name));t<o.length-1&&h.push(encodeURI(o[t+1].name))})),()=>{m&&m.destroy&&m.destroy()}}),[]),i.createElement(u,{w:"full",className:"video-preview-box"},i.createElement(y,null,i.createElement(b,{rightIcon:i.createElement(f,{boxSize:6,as:M}),w:"full",colorScheme:"gray",as:_,mb:2},i.createElement(w,{w:"full",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},e.name)),i.createElement(E,{w:"full",zIndex:999},o.map((e=>i.createElement(S,{key:e.name,w:"full"},i.createElement(x,{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxW:"85vw",w:"full",as:O,_hover:{textDecoration:"none"},to:encodeURI(e.name)},e.name)))))),i.createElement(u,{w:"full",h:"60vh",id:"video-player"}),i.createElement(c,{mt:"2",w:"full"},i.createElement(A,{spacing:"2"},i.createElement(_,{colorScheme:"telegram",as:k.a,href:`iina://weblink?url=${d}`},"IINA"),i.createElement(_,{colorScheme:"yellow",as:k.a,href:`potplayer://${d}`},"PotPlayer"),i.createElement(_,{colorScheme:"orange",as:k.a,href:`vlc://${d}`},"VLC"))))}});const zs={"../preview/audio.tsx":Cs,"../preview/image.tsx":Rs,"../preview/markdown.tsx":j,"../preview/office.tsx":Ds,"../preview/pdf.tsx":Is,"../preview/video.tsx":Vs},Hs=({file:e})=>{const{getSetting:n}=t.exports.useContext(C),r=e.name.split(".").pop()||"",o=D(),{t:a}=l();return i.createElement(c,{className:"no-preview",p:"4"},i.createElement(P,{spacing:"8"},i.createElement(f,{color:n("icon color")||"teal.300",boxSize:20,as:L(e.type,r)}),i.createElement(d,{size:"md"},e.name),i.createElement(_,{onClick:()=>{window.open(o(),"_blank")}},a("Download"))))},Gs=()=>{const{files:e}=t.exports.useContext(C);B(e[0].name);for(const t in zs){const n=zs[t],r=n.default;if(n.type===e[0].type||n.exts.includes(e[0].name.split(".").pop()))return i.createElement(r,{file:e[0]})}return i.createElement(Hs,{file:e[0]})};export{Gs as default};
